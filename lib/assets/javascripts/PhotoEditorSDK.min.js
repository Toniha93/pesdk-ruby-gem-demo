(function(_,T){'object'==typeof exports&&'object'==typeof module?module.exports=T():'function'==typeof define&&define.amd?define([],T):'object'==typeof exports?exports.PhotoEditorSDK=T():_.PhotoEditorSDK=T();})(this,function(){return function(u){function _(R){if(T[R])return T[R].exports;var M=T[R]={i:R,l:!1,exports:{}};return u[R].call(M.exports,M,M.exports,_),M.l=!0,M.exports;}var T={};return _.m=u,_.c=T,_.i=function(R){return R;},_.d=function(R,M,I){Object.defineProperty(R,M,{configurable:!1,enumerable:!0,get:I});},_.n=function(R){var M=R&&R.__esModule?function(){return R['default'];}:function(){return R;};return _.d(M,'a',M),M;},_.o=function(R,M){return Object.prototype.hasOwnProperty.call(R,M);},_.p="",_(_.s=245);}([function(u,_){"use strict";"use strict";_.__esModule=!0,_.default=function(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function");};},function(u,_,T){"use strict";"use strict";function R(z){return z&&z.__esModule?z:{default:z};}_.__esModule=!0;var M=T(184),I=R(M),U=T(183),N=R(U),G=T(21),V=R(G);_.default=function(z,W){if("function"!=typeof W&&null!==W)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof W?"undefined":(0,V.default)(W)));z.prototype=(0,N.default)(W&&W.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),W&&(I.default?(0,I.default)(z,W):z.__proto__=W);};},function(u,_,T){"use strict";"use strict";_.__esModule=!0;var M=T(21),I=function(U){return U&&U.__esModule?U:{default:U};}(M);_.default=function(U,N){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&("object"===("undefined"==typeof N?"undefined":(0,I.default)(N))||"function"==typeof N)?N:U;};},function(u,_,T){"use strict";'use strict';function M(se){return se&&se.__esModule?se:{default:se};}Object.defineProperty(_,"__esModule",{value:!0}),_.Licensing=_.Base64=_.GLUtils=_.Promise=_.Log=_.Constants=_.Color=_.Configurable=_.Utils=_.EventEmitter=_.Engine=_.cancelAnimationFrame=_.requestAnimationFrame=void 0;var I=T(182);Object.defineProperty(_,'requestAnimationFrame',{enumerable:!0,get:function(){return I.requestAnimationFrame;}}),Object.defineProperty(_,'cancelAnimationFrame',{enumerable:!0,get:function(){return I.cancelAnimationFrame;}});var U=T(64);Object.keys(U).forEach(function(se){"default"===se||"__esModule"===se||Object.defineProperty(_,se,{enumerable:!0,get:function(){return U[se];}});});var N=T(12),G=M(N),V=T(9),z=function(se){if(se&&se.__esModule)return se;var pe={};if(null!=se)for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(pe[ue]=se[ue]);return pe.default=se,pe;}(V),W=T(25),H=M(W),Y=T(26),X=M(Y),Z=T(19),J=M(Z),K=T(14),Q=M(K),$=T(11),ee=M($),te=T(27),re=M(te),oe=T(7),ae=M(oe),ne=T(74),ie=M(ne),le=T(112),de=M(le);_.Engine=G.default,_.EventEmitter=X.default,_.Utils=J.default,_.Configurable=Q.default,_.Color=ee.default,_.Constants=z,_.Log=re.default,_.Promise=ae.default,_.GLUtils=ie.default,_.Base64=H.default,_.Licensing=de.default;},function(u,_,T){"use strict";'use strict';function R(K){return K&&K.__esModule?K:{default:K};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(146),H=R(W),Y=T(14),X=R(Y),Z=z.Constants.OptionType,J=function(K){function Q(){var $=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,I.default)(this,Q);var ee=(0,N.default)(this,K.call(this,$,{intensity:{type:Z.NUMBER,default:1,setter:function(re){return this._stack&&this._stack.setIntensity(re),re;}},dirty:{type:Z.BOOLEAN,default:!0}}));return ee._stack=new H.default(ee._options.intensity),ee;}return(0,V.default)(Q,K),Q.prototype.render=function(ee,te,re){var oe=this;return this._stack.render(ee,te,re).then(function(ae){return oe.setDirty(!1),ae;});},Q.prototype.setDirtyForRenderer=function(ee,te){this._stack.setDirtyForRenderer(ee,te);},Q.prototype.disposeRenderTextures=function(){this._stack.disposeRenderTextures();},Q.prototype.dispose=function(){this._stack.dispose();},Q;}(X.default);J.identifier=null,J.isIdentity=!1,J.displayName=null,J.PrimitivesStack=H.default,_.default=J;},function(u,_,T){"use strict";'use strict';function R(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(147);Object.defineProperty(_,'Brightness',{enumerable:!0,get:function(){return R(M).default;}});var I=T(149);Object.defineProperty(_,'Contrast',{enumerable:!0,get:function(){return R(I).default;}});var U=T(148);Object.defineProperty(_,'ColorMatrixPrimitive',{enumerable:!0,get:function(){return R(U).default;}});var N=T(150);Object.defineProperty(_,'Desaturation',{enumerable:!0,get:function(){return R(N).default;}});var G=T(151);Object.defineProperty(_,'Gamma',{enumerable:!0,get:function(){return R(G).default;}});var V=T(152);Object.defineProperty(_,'Glow',{enumerable:!0,get:function(){return R(V).default;}});var z=T(153);Object.defineProperty(_,'Gobblin',{enumerable:!0,get:function(){return R(z).default;}});var W=T(154);Object.defineProperty(_,'Grayscale',{enumerable:!0,get:function(){return R(W).default;}});var H=T(80);Object.defineProperty(_,'LookupTable',{enumerable:!0,get:function(){return R(H).default;}});var Y=T(155);Object.defineProperty(_,'LookupTableImage',{enumerable:!0,get:function(){return R(Y).default;}});var X=T(156);Object.defineProperty(_,'Saturation',{enumerable:!0,get:function(){return R(X).default;}});var Z=T(157);Object.defineProperty(_,'SoftColorOverlay',{enumerable:!0,get:function(){return R(Z).default;}});var J=T(158);Object.defineProperty(_,'ToneCurve',{enumerable:!0,get:function(){return R(J).default;}});var K=T(159);Object.defineProperty(_,'X400',{enumerable:!0,get:function(){return R(K).default;}});},function(u,_,T){"use strict";'use strict';function M(oe){return oe&&oe.__esModule?oe:{default:oe};}var I=T(27),U=M(I),N=T(11),G=M(N),V=T(75),z=M(V),W=T(76),H=M(W),Y=T(20),X=M(Y),Z=T(26),J=M(Z),K=T(19),Q=M(K),$=T(74),ee=M($),te=T(9),re=function(oe){if(oe&&oe.__esModule)return oe;var ae={};if(null!=oe)for(var ne in oe)Object.prototype.hasOwnProperty.call(oe,ne)&&(ae[ne]=oe[ne]);return ae.default=oe,ae;}(te);_.BATCH_SIZE=2e3,_.VERTEX_SIZE=5,_.VERTEX_BYTE_SIZE=4*_.VERTEX_SIZE,_.Color=G.default,_.Matrix=z.default,_.Vector2=X.default,_.Rectangle=H.default,_.EventEmitter=J.default,_.Log=U.default,_.Utils=Q.default,_.Constants=re,_.GLUtils=ee.default;},function(u,_,T){"use strict";(function(R,M){/*
 * Native Promise Only
 * v0.8.0-a (c) Kyle Simpson
 * MIT License: http://getify.mit-license.org
 * @license
 */var U;var N=T(21),G=function(V){return V&&V.__esModule?V:{default:V};}(N);(function(z,W,H){W[z]=W[z]||H(),"undefined"!=typeof u&&u.exports?u.exports=W[z]:(U=function(){return W[z];}.call(_,T,_,u),!(U!==void 0&&(u.exports=U)));})("Promise","undefined"==typeof R?void 0:R,function(){"use strict";function z(ie,le){re.add(ie,le),te||(te=ae(re.drain));}function W(ie){var de="undefined"==typeof ie?"undefined":(0,G.default)(ie),le;return null!=ie&&("object"==de||"function"==de)&&(le=ie.then),"function"==typeof le&&le;}function H(){for(var ie=0;ie<this.chain.length;ie++)Y(this,1===this.state?this.chain[ie].success:this.chain[ie].failure,this.chain[ie]);this.chain.length=0;}function Y(ie,le,de){var se,pe;try{!1===le?de.reject(ie.msg):(se=!0===le?ie.msg:le.call(void 0,ie.msg),se===de.promise?de.reject(TypeError("Promise-chain cycle")):(pe=W(se))?pe.call(se,de.resolve,de.reject):de.resolve(se));}catch(ue){de.reject(ue);}}function X(ie){var de=this,le;if(!de.triggered){de.triggered=!0,de.def&&(de=de.def);try{(le=W(ie))?z(function(){var se=new K(de);try{le.call(ie,function(){X.apply(se,arguments);},function(){Z.apply(se,arguments);});}catch(pe){Z.call(se,pe);}}):(de.msg=ie,de.state=1,0<de.chain.length&&z(H,de));}catch(se){Z.call(new K(de),se);}}}function Z(ie){var le=this;le.triggered||(le.triggered=!0,le.def&&(le=le.def),le.msg=ie,le.state=2,0<le.chain.length&&z(H,le));}function J(ie,le,de,se){for(var pe=0;pe<le.length;pe++)(function(_e){ie.resolve(le[_e]).then(function(ye){de(_e,ye);},se);})(pe);}function K(ie){this.def=ie,this.triggered=!1;}function Q(ie){this.promise=ie,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0;}function $(ie){if("function"!=typeof ie)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var le=new Q(this);this.then=function(se,pe){var ue={success:"function"!=typeof se||se,failure:"function"==typeof pe&&pe};return ue.promise=new this.constructor(function(fe,ye){if("function"!=typeof fe||"function"!=typeof ye)throw TypeError("Not a function");ue.resolve=fe,ue.reject=ye;}),le.chain.push(ue),0!==le.state&&z(H,le),ue.promise;},this["catch"]=function(se){return this.then(void 0,se);};try{ie.call(void 0,function(se){X.call(le,se);},function(se){Z.call(le,se);});}catch(de){Z.call(le,de);}}var oe=Object.prototype.toString,ae="undefined"==typeof M?setTimeout:function(le){return M(le);},ee,te,re;try{Object.defineProperty({},"x",{}),ee=function(le,de,se,pe){return Object.defineProperty(le,de,{value:se,writable:!0,configurable:!1!==pe});};}catch(ie){ee=function(de,se,pe){return de[se]=pe,de;};}re=function(){function le(ue,_e){this.fn=ue,this.self=_e,this.next=void 0;}var de,se,pe;return{add:function(_e,fe){pe=new le(_e,fe),se?se.next=pe:de=pe,se=pe,pe=void 0;},drain:function(){var _e=de;for(de=se=te=void 0;_e;)_e.fn.call(_e.self),_e=_e.next;}};}();var ne=ee({},"constructor",$,!1);return $.prototype=ne,ee(ne,"__NPO__",0,!1),ee($,"resolve",function(le){var de=this;return le&&"object"==("undefined"==typeof le?"undefined":(0,G.default)(le))&&1===le.__NPO__?le:new de(function(pe,ue){if("function"!=typeof pe||"function"!=typeof ue)throw TypeError("Not a function");pe(le);});}),ee($,"reject",function(le){return new this(function(se,pe){if("function"!=typeof se||"function"!=typeof pe)throw TypeError("Not a function");pe(le);});}),ee($,"all",function(le){var de=this;return"[object Array]"==oe.call(le)?0===le.length?de.resolve([]):new de(function(pe,ue){if("function"!=typeof pe||"function"!=typeof ue)throw TypeError("Not a function");var _e=le.length,fe=Array(_e),ye=0;J(de,le,function(ce,me){fe[ce]=me,++ye===_e&&pe(fe);},ue);}):de.reject(TypeError("Not an array"));}),ee($,"race",function(le){var de=this;return"[object Array]"==oe.call(le)?new de(function(pe,ue){if("function"!=typeof pe||"function"!=typeof ue)throw TypeError("Not a function");J(de,le,function(fe,ye){pe(ye);},ue);}):de.reject(TypeError("Not an array"));}),$;});}).call(_,T(95),T(63).setImmediate);},function(u,_,T){"use strict";'use strict';function R(Y){return Y&&Y.__esModule?Y:{default:Y};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(14),W=R(z),H=function(Y){function X(){return(0,I.default)(this,X),(0,N.default)(this,Y.apply(this,arguments));}return(0,V.default)(X,Y),X.prototype.update=function(){},X.prototype.getFilter=function(){return this._filter;},X.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null);},X;}(W.default);_.default=H;},function(u,_){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var T=_.RenderType={IMAGE:'image',DATAURL:'data-url',BUFFER:'buffer',BLOB:'blob',MSBLOB:'ms-blob'},R=_.ImageFormat={PNG:'image/png',JPEG:'image/jpeg'},M=_.Events={OPERATION_UPDATED:'operation:update'},I=_.OptionType={NUMBER:'number',VECTOR2:'vector2',COLOR_MATRIX:'color-matrix',COLOR:'color',ARRAY:'array',OBJECT:'object',STRING:'string',BOOLEAN:'boolean',CONFIGURABLE:'configurable',IMAGE:'image',ALL:'*'},U=_.UniformType={SAMPLER2D:'sampler2d',INT:'i',INT1:'1i',FLOAT:'f',FLOAT1:'1f',FLOAT2:'2f',FLOAT_VECTOR2:'2fv',FLOAT3:'3f',FLOAT4:'4f',MAT3:'mat3',MAT3FV:'mat3fv',MAT4:'mat4'},N=_.RendererType={WEBGL:'webgl',CANVAS:'canvas'};},function(u,_,T){"use strict";'use strict';function R(re){return re&&re.__esModule?re:{default:re};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(9),W=T(7),H=R(W),Y=T(27),X=R(Y),Z=T(12),J=R(Z),K=T(14),Q=R(K),$=T(77),ee=R($),te=function(re){function oe(ae){var ne=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,I.default)(this,oe);var ie=(0,N.default)(this,re.call(this,ne,{enabled:{type:z.OptionType.BOOLEAN,default:!0}}));return ie._sdk=ae,ie._cacheEnabled=!1,ie._dirtiness={},ie._sprite=new J.default.Sprite(),ie._container=new J.default.Container(),ie._container.addChild(ie._sprite),ie;}return(0,V.default)(oe,re),oe.prototype._onOptionsChange=function(){this.setDirty(!0);},oe.prototype.render=function(ne){var ie=this;if(!this.getEnabled())return X.default.info(this.constructor.name,'Disabled - skipping'),H.default.resolve(ne);if(!this._renderTexture){var le=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new J.default.RenderTexture(this._sdk.getRenderer(),le.width,le.height);}var de=this._sdk.getRenderer(),se,pe;if(X.default.canLog('info')&&(pe=new ee.default(this.constructor.name,'Rendering')),this.isDirtyForRenderer(de)){this._sprite.setTexture(ne);var ue=this.getNewDimensions(ne.getDimensions()).floor();this._renderTexture.resizeTo(ue),this._renderTexture.clear(),se=this._render(ne).then(function(){return ie.setDirtyForRenderer(!1,de),ie._renderTexture;});}else X.default.info(this.constructor.name,'Rendering from cache'),se=H.default.resolve(this._renderTexture);return se.then(function(_e){return pe&&pe.stop(),_e;});},oe.prototype._render=function(ne){var ie;return ie=this._sdk.getRenderer().isOfType(z.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this),ie(ne);},oe.prototype._renderWebGL=function(){throw new Error('Operation#_renderWebGL is abstract and not implemented in inherited class.');},oe.prototype._renderCanvas=function(){throw new Error('Operation#_renderCanvas is abstract and not implemented in inherited class.');},oe.prototype.getNewDimensions=function(ne){return ne.clone();},oe.prototype.reset=function(){this._dirty=!0,this._glslPrograms={};},oe.prototype.isDirtyForRenderer=function(ne){var ie=this._dirtiness[ne.id];return'undefined'==typeof ie||ie;},oe.prototype.setDirtyForRenderer=function(ne,ie){2<arguments.length&&void 0!==arguments[2]&&arguments[2];this._dirtiness[ie.id]=ne;},oe.prototype.setDirty=function(ne){var ie=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var le in this._dirtiness)this.setDirtyForRenderer(ne,{id:le},ie);},oe.prototype.getSDK=function(){return this._sdk;},oe.prototype.getInputDimensions=function(){var ne=this,ie=this._sdk.getInputDimensions(),le;return this._sdk.getOperationsStack().forEach(function(de){return le?void 0:de===ne?void(le=!0):void(ie=de.getNewDimensions(ie));}),ie.floor();},oe.prototype.disposeRenderTextures=function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null;},oe.prototype.dispose=function(){this.disposeRenderTextures(),this._sprite.dispose();},oe;}(Q.default);te.identifier=null,_.default=te;},function(u,_,T){"use strict";'use strict';function R(V){return V&&V.__esModule?V:{default:V};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(37),N=R(U),G=function(){function V(z,W,H){var Y=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,I.default)(this,V),this.r=z,this.g=W,this.b=H,this.a=Y;}return V.prototype.toRGBA=function(){var W=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a];return'rgba('+W.join(',')+')';},V.prototype.toHex=function(){var W=[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))];return'#'+W.join('');},V.prototype.toGLColor=function(){return[this.r,this.g,this.b,this.a];},V.prototype.toArray=function(){return this.toGLColor();},V.prototype.toRGBGLColor=function(){return[this.r,this.g,this.b];},V.prototype.toHSV=function(){var W=Math.max(this.r,this.g,this.b),H=Math.min(this.r,this.g,this.b),J=W-H,Y,X;return X=0===W?0:J/W,W===H?Y=0:(W===this.r?(Y=(this.g-this.b)/J,this.g<this.b&&(Y+=6)):W===this.g?Y=(this.b-this.r)/J+2:W===this.b?Y=(this.r-this.g)/J+4:void 0,Y/=6),[Y,X,W];},V.fromHSV=function(W,H,Y){var X=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,Z=[],J=Z[0],K=Z[1],Q=Z[2],$=Math.floor(6*W),ee=6*W-$,te=Y*(1-H),re=Y*(1-ee*H),oe=Y*(1-(1-ee)*H);switch($%6){case 0:J=Y,K=oe,Q=te;break;case 1:J=re,K=Y,Q=te;break;case 2:J=te,K=Y,Q=oe;break;case 3:J=te,K=re,Q=Y;break;case 4:J=oe,K=te,Q=Y;break;case 5:J=Y,K=te,Q=re;}return new V(J,K,Q,X);},V.fromArray=function(W){return new V(W[0],W[1],W[2],W[3]);},V.prototype.clone=function(){return new V(this.r,this.g,this.b,this.a);},V.prototype.equals=function(W){return this.r===W.r&&this.g===W.g&&this.b===W.b&&this.a===W.a;},V.prototype._componentToHex=function(W){var H=W.toString(16);return 1===H.length?'0'+H:H;},V.prototype.toString=function(){return'Color('+this.r+', '+this.g+', '+this.b+', '+this.a+')';},(0,N.default)(V,null,[{key:'TRANSPARENT',get:function(){return new V(0,0,0,0);}},{key:'WHITE',get:function(){return new V(1,1,1,1);}},{key:'BLACK',get:function(){return new V(0,0,0,1);}}]),V;}();_.default=G;},function(u,_,T){"use strict";'use strict';function M(Te){return Te&&Te.__esModule?Te:{default:Te};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(101),U=M(I),N=T(103),G=M(N),V=T(45),z=M(V),W=T(46),H=M(W),Y=T(43),X=M(Y),Z=T(68),J=M(Z),K=T(31),Q=M(K),$=T(71),ee=M($),te=T(106),re=M(te),oe=T(33),ae=M(oe),ne=T(32),ie=M(ne),le=T(105),de=M(le),se=T(104),pe=M(se),ue=T(47),_e=M(ue),fe=T(44),ye=M(fe),ge=T(99),ce=function(Te){if(Te&&Te.__esModule)return Te;var ve={};if(null!=Te)for(var be in Te)Object.prototype.hasOwnProperty.call(Te,be)&&(ve[be]=Te[be]);return ve.default=Te,ve;}(ge),me=T(73),he=M(me),xe={WebGLRenderer:G.default,CanvasRenderer:U.default,WebGLFilterManager:H.default,CanvasFilterManager:z.default,DisplayObject:X.default,Container:J.default,BaseTexture:Q.default,Texture:ee.default,RenderTexture:re.default,WebGLRenderTarget:ae.default,CanvasRenderTarget:ie.default,Sprite:de.default,Shaders:pe.default,Shader:_e.default,Filter:ye.default,Filters:ce,PixelArrayImage:he.default,autoDetectRenderer:function(ve,be){var Ce=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return G.default.isSupported()?new G.default(ve,be,Ce):new U.default(ve,be,Ce);}};_.default=xe;},function(u){var T=u.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=T);},function(u,_,T){"use strict";'use strict';function R(se){return se&&se.__esModule?se:{default:se};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(21),I=R(M),U=T(83),N=R(U),G=T(0),V=R(G),z=T(2),W=R(z),H=T(1),Y=R(H),X=T(7),Z=R(X),J=T(26),K=R(J),Q=T(20),$=R(Q),ee=T(11),te=R(ee),re=T(19),oe=R(re),ae=T(34),ne=R(ae),ie=T(9),le;le=window.Image;var de=function(se){function pe(){var ue=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,V.default)(this,pe);var fe=(0,W.default)(this,se.call(this));return fe.availableOptions=fe.availableOptions||{},fe.availableOptions=oe.default.extend(fe.availableOptions,_e),fe._onConfigurableUpdate=fe._onConfigurableUpdate.bind(fe),fe._initOptions(ue),fe;}return(0,Y.default)(pe,se),pe.prototype._buildConfigError=function(_e){var fe='';return this.constructor.name&&(fe=this.constructor.name+': '),fe+=_e,new Error(fe);},pe.prototype._onOptionsChange=function(){},pe.prototype.validateSettings=function(){var _e=this;return new Z.default(function(fe,ye){for(var ge in _e.availableOptions){var ce=_e.availableOptions[ge];if(ce.required&&'undefined'==typeof _e._options[ge])return ye(_e._buildConfigError('Option `'+ge+'` is required.'));}fe();});},pe.prototype._initOptions=function(){var _e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._options={};var ce=this,fe,ye,ge;for(fe in this.availableOptions){if(ge=fe.charAt(0).toUpperCase()+fe.slice(1),ye=this.availableOptions[fe],-1===[ie.OptionType.STRING,ie.OptionType.NUMBER,ie.OptionType.BOOLEAN,ie.OptionType.OBJECT,ie.OptionType.VECTOR2,ie.OptionType.COLOR,ie.OptionType.CONFIGURABLE,ie.OptionType.COLOR_MATRIX,ie.OptionType.ARRAY,ie.OptionType.IMAGE,ie.OptionType.ALL].indexOf(ye.type))throw this._buildConfigError('Unknown option type: `'+ye.type+'`');var me=function(Te){ce['set'+ge]=function(be,Ce,Re){ce.setOption(Te,be,Ce,Re);},ce['get'+ge]=function(){return ce.getOption(Te);};};if(me(fe,ye),ye.type===ie.OptionType.CONFIGURABLE&&(this._options[fe]=new pe(void 0,ye.structure||{}),this._options[fe].on('update',this._onConfigurableUpdate)),'undefined'!=typeof ye.default&&!(fe in _e)){var he=ye.default;'function'==typeof ye.default&&(he=ye.default()),this['set'+ge](he,!1,!0);}}for(fe in _e){if('undefined'==typeof this.availableOptions[fe])throw new Error('Invalid option: '+fe);'undefined'!=typeof _e[fe]&&(ge=fe.charAt(0).toUpperCase()+fe.slice(1),this['set'+ge](_e[fe],!1,!0));}},pe.prototype.set=function(_e){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;for(var ye in fe&&this.emit('update',this,_e),_e)this.setOption(ye,_e[ye],!1);this._onOptionsChange();},pe.prototype.getOption=function(_e){return this._options[_e];},pe.prototype.getOptionDefault=function(_e){var fe=this.availableOptions[_e];if(!fe)throw new Error('Invalid option: '+_e);return fe.default;},pe.prototype.getOptions=function(){return this._options;},pe.prototype.getDefaultOptions=function(){var _e={};for(var fe in this.availableOptions){var ye=this.availableOptions[fe].default;'undefined'==typeof ye||(_e[fe]=ye);}return _e;},pe.prototype.optionsEqual=function(_e){for(var fe in _e){var ye=_e[fe];if(!this._optionEquals(fe,ye))return!1;}return!0;},pe.prototype._optionEquals=function(_e,fe){var ye=this.availableOptions[_e];if('undefined'==typeof ye)throw new Error('Invalid option: '+_e);var ge=this.availableOptions[_e].type,ce=this._options[_e];return ce===fe||(ge===ie.OptionType.STRING||ge===ie.OptionType.NUMBER||ge===ie.OptionType.BOOLEAN||ge===ie.OptionType.OBJECT||'*'===ge?ce===fe:ge===ie.OptionType.VECTOR2?ce.equals(fe):ge===ie.OptionType.COLOR||ge===ie.OptionType.COLOR_MATRIX?fe.equals(ce):ge===ie.OptionType.CONFIGURABLE?ce.optionsEqual(fe):ge===ie.OptionType.ARRAY?this._arrayOptionEquals(_e,fe):ge===ie.OptionType.IMAGE?ce.src===fe.src:void 0);},pe.prototype._arrayOptionEquals=function(_e,fe){for(var ye=this._options[_e],ge=!0,ce=0;ce<ye.length;ce++){var me=ye[ce],he=fe[ce];if(me instanceof pe){if('undefined'==typeof he||!me.optionsEqual(he)){ge=!1;break;}}else if(he!==me){ge=!1;break;}}return ge;},pe.prototype.serializeOptions=function(){var _e=this,fe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(this._options),ye=1<arguments.length&&void 0!==arguments[1]&&arguments[1],ge={};return fe.forEach(function(ce){ge[ce]=_e._serializeOption(ce,ye);}),ge;},pe.prototype._serializeOption=function(_e){var fe=1<arguments.length&&void 0!==arguments[1]&&arguments[1],ye=this.availableOptions[_e].type,ge=this._options[_e];return ge?ye===ie.OptionType.STRING||ye===ie.OptionType.NUMBER||ye===ie.OptionType.BOOLEAN||ye===ie.OptionType.OBJECT||ye===ie.OptionType.ALL?ge:ye===ie.OptionType.VECTOR2?fe?ge.toObject():ge.clone():ye===ie.OptionType.COLOR||ye===ie.OptionType.COLOR_MATRIX?fe?ge.toArray():ge.clone():ye===ie.OptionType.CONFIGURABLE?ge.serializeOptions(void 0,fe):ye===ie.OptionType.ARRAY?ge.slice(0):ye===ie.OptionType.IMAGE?ge.src:void 0:ge;},pe.prototype.setOption=function(_e,fe){var ye=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,ge=3<arguments.length&&void 0!==arguments[3]&&arguments[3];ye&&this.emit('update',this,(0,N.default)({},_e,fe));var ce=this.availableOptions[_e];if(!ce)throw new Error('Invalid option: '+_e);if('undefined'!=typeof ce.setter&&(fe=ce.setter.call(this,fe,ge)),'undefined'!=typeof ce.validation&&ce.validation(fe),null===fe){if(ce.required)throw this._buildConfigError('Option `'+_e+'` is required.');this._options[_e]=fe;}else switch(ce.type){case ie.OptionType.STRING:if(('undefined'==typeof fe?'undefined':(0,I.default)(fe))!==ie.OptionType.STRING)throw this._buildConfigError('Option `'+_e+'` has to be a string.');var me=ce.available;if('undefined'!=typeof me&&-1===me.indexOf(fe))throw this._buildConfigError('Invalid value for `'+_e+'` (valid values are: '+ce.available.join(', ')+')');this._options[_e]=fe;break;case ie.OptionType.NUMBER:if(('undefined'==typeof fe?'undefined':(0,I.default)(fe))!==ie.OptionType.NUMBER)throw this._buildConfigError('Option `'+_e+'` has to be a number.');this._options[_e]=fe;break;case ie.OptionType.BOOLEAN:if(('undefined'==typeof fe?'undefined':(0,I.default)(fe))!==ie.OptionType.BOOLEAN)throw this._buildConfigError('Option `'+_e+'` has to be a boolean.');this._options[_e]=fe;break;case ie.OptionType.VECTOR2:if(!(fe instanceof $.default)&&!('object'===('undefined'==typeof fe?'undefined':(0,I.default)(fe))&&'x'in fe&&'y'in fe))throw this._buildConfigError('Option `'+_e+'` has to be an instance of Vector2 or an Object holding x and y values.');this._options[_e]=fe instanceof $.default?fe.clone():$.default.fromObject(fe);break;case ie.OptionType.COLOR:if(!(fe instanceof te.default))throw this._buildConfigError('Option `'+_e+'` has to be an instance of Color.');this._options[_e]=fe;break;case ie.OptionType.COLOR_MATRIX:if(!(fe instanceof ne.default))throw this._buildConfigError('Option `'+_e+'` has to be an instance of ColorMatrix.');this._options[_e]=fe.clone();break;case ie.OptionType.OBJECT:case'*':this._options[_e]=fe;break;case ie.OptionType.IMAGE:if('string'==typeof fe){var he=new le();he.src=fe,this._options[_e]=he;}else if(fe instanceof le||'undefined'!=typeof HTMLImageElement&&fe instanceof HTMLImageElement)this._options[_e]=fe;else throw this._buildConfigError('Option `'+_e+'` has to be an Image or String.');break;case ie.OptionType.CONFIGURABLE:this._options[_e].set(fe);break;case ie.OptionType.ARRAY:if(!(fe instanceof Array))throw this._buildConfigError('Option `'+_e+'` has to be an Array.');this._options[_e]=fe.slice(0);break;default:throw this._buildConfigError('Unknown option type: `'+ce.type+'`');}ye&&(this._onOptionsChange(),this.emit('update',this,(0,N.default)({},_e,fe)));},pe.prototype._onConfigurableUpdate=function(){for(var _e=arguments.length,fe=Array(_e),ye=0;ye<_e;ye++)fe[ye]=arguments[ye];this.emit.apply(this,['update'].concat(fe));},pe;}(K.default);_.default=de;},function(u,_,T){u.exports=!T(38)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7;}}).a;});},function(u){var T={}.hasOwnProperty;u.exports=function(R,M){return T.call(R,M);};},function(u,_,T){var R=T(28),M=T(87),I=T(59),U=Object.defineProperty;_.f=T(15)?Object.defineProperty:function(G,V,z){if(R(G),V=I(V,!0),R(z),M)try{return U(G,V,z);}catch(W){}if('get'in z||'set'in z)throw TypeError('Accessors not supported!');return'value'in z&&(G[V]=z.value),G;};},function(u,_,T){var R=T(197),M=T(49);u.exports=function(I){return R(M(I));};},function(u,_,T){"use strict";'use strict';function R(W){return W&&W.__esModule?W:{default:W};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(21),I=R(M),U=T(0),N=R(U),G=T(25),V=R(G),z=function(){function W(){(0,N.default)(this,W);}return W.isArray=function(Y){return'[object Array]'===Object.prototype.toString.call(Y);},W.isMobile=function(){var Y=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Y)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Y.substr(0,4));},W.values=function(Y){var H=[];for(var X in Y)H.push(Y[X]);return H;},W.isDOMElement=function(Y){return'object'===('undefined'==typeof HTMLElement?'undefined':(0,I.default)(HTMLElement))?Y instanceof HTMLElement:Y&&'object'===('undefined'==typeof Y?'undefined':(0,I.default)(Y))&&null!==Y&&1===Y.nodeType&&'string'==typeof Y.nodeName;},W.isTouchEvent=function(Y){return-1!==Y.type.indexOf('touch');},W.resizeVectorToFit=function(Y,X){var Z=Math.min(X.x/Y.x,X.y/Y.y),J=Y.clone().multiply(Z);return J;},W.isExtendable=function(Y){return'undefined'!=typeof Y&&null!==Y&&('object'===('undefined'==typeof Y?'undefined':(0,I.default)(Y))||'function'==typeof Y);},W.defaults=function(Y){var X={};for(var Z in Y)X[Z]=Y[Z];for(var J=arguments.length,K=Array(1<J?J-1:0),Q=1;Q<J;Q++)K[Q-1]=arguments[Q];for(var $=0,ee;$<K.length;$++)for(var te in ee=K[$],ee)'undefined'==typeof X[te]&&(X[te]=ee[te]);return X;},W.deepDefaults=function(Y){var X={};for(var Z in Y)X[Z]=Y[Z];for(var J=arguments.length,K=Array(1<J?J-1:0),Q=1;Q<J;Q++)K[Q-1]=arguments[Q];for(var $=0,ee;$<K.length;$++)for(var te in ee=K[$],ee)W.isExtendable(X[te])&&W.isExtendable(ee[te])?X[te]=W.deepDefaults(X[te],ee[te]):'undefined'==typeof X[te]&&(X[te]=ee[te]);return X;},W.extend=function(Y){var X={};for(var Z in Y)X[Z]=Y[Z];for(var J=arguments.length,K=Array(1<J?J-1:0),Q=1;Q<J;Q++)K[Q-1]=arguments[Q];for(var $=0,ee;$<K.length;$++)for(var te in ee=K[$],ee)X[te]=ee[te];return X;},W.clone=function(Y){return this.extend({},Y);},W.createBlobURIFromDataURI=function(Y){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array)return Y;for(var X=V.default.decode(Y.split(',')[1]),Z=Y.split(',')[0].split(':')[1].split(';')[0],J=new ArrayBuffer(X.length),K=new Uint8Array(J),Q=0;Q<X.length;Q++)K[Q]=X[Q];var $=new window.Blob([J],{type:Z});return window.URL.createObjectURL($);},W.requestAnimationFrame=function(Y){var X=function(J){setTimeout(J,1e3/60);};return'undefined'==typeof window?X(Y):(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||X)(Y);},W.getUUID=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(Y){var X=0|16*Math.random(),Z='x'===Y?X:8|3&X;return Z.toString(16);});},W.flatten=function(Y){return Y.reduce(function(X,Z){return X.concat(Array.isArray(Z)?W.flatten(Z):Z);},[]);},W.createCanvas=function(){return document.createElement('canvas');},W.isPowerOfTwo=function(Y){return 0==(Y.x&Y.x-1)&&0==(Y.y&Y.y-1);},W.nextLowestPOT=function(Y){for(var X=1;32>X;X<<=1)Y|=Y>>X;return Y-(Y>>1);},W.nextHighestPOT=function(Y){Y--;for(var X=1;32>X;X<<=1)Y|=Y>>X;return Y+1;},W.moveArrayItem=function(Y,X,Z){if(Z>=Y.length)for(var J=Z-Y.length;J--+1;)Y.push(void 0);Y.splice(Z,0,Y.splice(X,1)[0]);},W.ensureCanvasDimensions=function(Y,X){(Y.width!==X.x||Y.height!==X.y)&&(Y.width=X.x,Y.height=X.y);},W.byteArrayToString=function(Y){return Y.map(function(X){return String.fromCharCode(X);}).join('');},W;}();_.default=z;},function(u,_,T){"use strict";'use strict';function R(V){return V&&V.__esModule?V:{default:V};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(37),N=R(U),G=function(){function V(z,W){(0,I.default)(this,V),this.x=z,this.y=W,'undefined'==typeof this.x&&(this.x=0),'undefined'==typeof this.y&&(this.y=0);}return V.prototype.set=function(W,H){return this.x=W,this.y=H,this;},V.prototype.clone=function(){return new V(this.x,this.y);},V.prototype.copy=function(W){return this.x=W.x,this.y=W.y,this;},V.prototype.clamp=function(W,H){var Y=null!==W&&'undefined'!=typeof W,X=null!==H&&'undefined'!=typeof H;return!(W instanceof V)&&Y&&(W=new V(W,W)),!(H instanceof V)&&X&&(H=new V(H,H)),Y&&(this.x=Math.max(W.x,this.x),this.y=Math.max(W.y,this.y)),X&&(this.x=Math.min(H.x,this.x),this.y=Math.min(H.y,this.y)),this;},V.prototype.divide=function(W,H){return W instanceof V?(this.x/=W.x,this.y/=W.y):(this.x/=W,this.y/='undefined'==typeof H?W:H),this;},V.prototype.subtract=function(W,H){return W instanceof V?(this.x-=W.x,this.y-=W.y):(this.x-=W,this.y-='undefined'==typeof H?W:H),this;},V.prototype.multiply=function(W,H){return W instanceof V?(this.x*=W.x,this.y*=W.y):(this.x*=W,this.y*='undefined'==typeof H?W:H),this;},V.prototype.add=function(W,H){return W instanceof V?(this.x+=W.x,this.y+=W.y):(this.x+=W,this.y+='undefined'==typeof H?W:H),this;},V.prototype.equals=function(W,H){return W instanceof V?W.x===this.x&&W.y===this.y:W===this.x&&H===this.y;},V.prototype.flip=function(){var W=this.x;return this.x=this.y,this.y=W,this;},V.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this;},V.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this;},V.prototype.floor=function(){return this.x|=0,this.y|=0,this;},V.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this;},V.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y);},V.prototype.min=function(){return Math.min(this.x,this.y);},V.prototype.max=function(){return Math.max(this.x,this.y);},V.prototype.toObject=function(){return{x:this.x,y:this.y};},V.prototype.toString=function(){return'Vector2({ x: '+this.x+', y: '+this.y+' })';},V.prototype.roundDecimal=function(W){return this.x=parseFloat(this.x.toFixed(W)),this.y=parseFloat(this.y.toFixed(W)),this;},V.fromObject=function(W){return new V(W.x,W.y);},(0,N.default)(V,null,[{key:'NULL',get:function(){return new V(0,0);}}]),V;}();_.default=G;},function(u,_,T){"use strict";"use strict";function R(V){return V&&V.__esModule?V:{default:V};}_.__esModule=!0;var M=T(186),I=R(M),U=T(185),N=R(U),G="function"==typeof N.default&&"symbol"==typeof I.default?function(V){return typeof V;}:function(V){return V&&"function"==typeof N.default&&V.constructor===N.default&&V!==N.default.prototype?"symbol":typeof V;};_.default="function"==typeof N.default&&"symbol"===G(I.default)?function(V){return"undefined"==typeof V?"undefined":G(V);}:function(V){return V&&"function"==typeof N.default&&V.constructor===N.default&&V!==N.default.prototype?"symbol":"undefined"==typeof V?"undefined":G(V);};},function(u){var T=u.exports={version:'2.4.0'};'number'==typeof __e&&(__e=T);},function(u,_,T){var R=T(17),M=T(40);u.exports=T(15)?function(I,U,N){return R.f(I,U,M(1,N));}:function(I,U,N){return I[U]=N,I;};},function(u,_,T){var R=T(57)('wks'),M=T(41),I=T(13).Symbol,U='function'==typeof I,N=u.exports=function(G){return R[G]||(R[G]=U&&I[G]||(U?I:M)('Symbol.'+G));};N.store=R;},function(u,_){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */var T='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_.default={encode:function(I){var U='',N,G,V,z,W,H,Y,X=0;do N=I[X++],G=I[X++],V=I[X++],z=N>>2,W=(3&N)<<4|G>>4,H=(15&G)<<2|V>>6,Y=63&V,isNaN(G)?H=Y=64:isNaN(V)&&(Y=64),U=U+T.charAt(z)+T.charAt(W)+T.charAt(H)+T.charAt(Y),N=G=V='',z=W=H=Y='';while(X<I.length);return U;},decode:function(I){var U,N,G,V,z,W,H,Y=0,X=[],Z=/[^A-Za-z0-9\+\/=]/g;if(Z.exec(I))throw new Error('There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, \\\'+\\\', \\\'/\\\',and \\\'=\\\'\\nExpect errors in decoding.');I=I.replace(/[^A-Za-z0-9\+\/=]/g,'');do V=T.indexOf(I.charAt(Y++)),z=T.indexOf(I.charAt(Y++)),W=T.indexOf(I.charAt(Y++)),H=T.indexOf(I.charAt(Y++)),U=V<<2|z>>4,N=(15&z)<<4|W>>2,G=(3&W)<<6|H,X.push(U),64!==W&&X.push(N),64!==H&&X.push(G),U=N=G='',V=z=W=H='';while(Y<I.length);return X;}};},function(u,_,T){"use strict";'use strict';function R(z){return z&&z.__esModule?z:{default:z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(27),N=R(U),V=function(){function z(){(0,I.default)(this,z),this._maxListeners=12,this._events={},this._pipeDestinations=[];}return z.prototype.pipeEvents=function(H){this._pipeDestinations.push(H);},z.prototype.unpipeEvents=function(H){var Y=this._pipeDestinations.indexOf(H);-1===Y||this._pipeDestinations.splice(Y,1);},z.prototype.on=function(H,Y){if('function'!=typeof Y)throw new TypeError();var X=this._events[H]||(this._events[H]=[]);return-1===X.indexOf(Y)?(X.push(Y),this._maxListeners&&X.length>this._maxListeners&&(N.default.warn('EventEmitter','Possible memory leak detected, added '+X.length+' `'+H+'` listeners (current limit is '+this._maxListeners+')'),console.trace()),this):this;},z.prototype.once=function(H,Y){function X(){Z.off(H,X),Y.apply(null,arguments);}var Z=this;return this.on(H,X);},z.prototype.off=function(H){if(0==(1>=arguments.length?0:arguments.length-1))return this._events[H]=null,this;var Y=1>=arguments.length?void 0:arguments[1];if('function'!=typeof Y)throw new TypeError();var X=this._events[H];if(!X||!X.length)return this;var Z=X.indexOf(Y);return-1===Z?this:(X.splice(Z,1),this);},z.prototype.emit=function(H){for(var Y=arguments.length,X=Array(1<Y?Y-1:0),Z=1;Z<Y;Z++)X[Z-1]=arguments[Z];this._pipeDestinations.forEach(function(K){K.emit.apply(K,[H].concat(X));});var J=this._events[H];return J&&J.length&&(J.forEach(function(K){return K.apply(null,X);}),!0);},z.prototype.setMaxListeners=function(H){if(parseInt(H,10)!==H)throw new TypeError();this._maxListeners=H;},z;}();_.default=V;},function(u,_,T){"use strict";(function(R){'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M='warn',I=[{type:'trace',background:'#EEEEEE',color:'#AAAAAA'},{type:'info',background:'#BDE5F8',color:'#00529B'},{type:'warn',background:'#FEEFB3',color:'#9F6000'},{type:'error',background:'#FFBABA',color:'#D8000C'},{type:'log',background:'#EEEEEE',color:'#1f4f6b'}],U=I.map(function(G){return G.type;}),N={};N.setLevel=function(G){M=G;},N.canLog=function(G){if(null===M)return!1;var V=U.indexOf(G),z=U.indexOf(M);return!(V<z);},N.hasColorfulOutput=function(){return(!R||R&&R.browser)&&'undefined'!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/);},N.printError=function(G){var V=G.stack.split('\n');V.forEach(function(z){N.error('Error',z);});},I.forEach(function(G){var V=G.type,z=G.background,W=G.color;N[V]=function(H){if(N.canLog(V)){for(var Y=arguments.length,X=Array(1<Y?Y-1:0),Z=1;Z<Y;Z++)X[Z-1]=arguments[Z];var J=X.map(function(K){return'string'==typeof K?K:K.toString();}).join(' ');return N.hasColorfulOutput()?void console.log('%c  %c PhotoEditorSDK %c  %c '+H+' %c  '+J+'  %c  ','background: #43ADEB; line-height: 20px; padding: 4px 0','background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0','background: #43ADEB; line-height: 20px; padding: 4px 0','background: '+z+'; color: '+W+'; line-height: 20px; padding: 4px 0; font-weight: bold','background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0','background: #43ADEB; line-height: 20px; padding: 4px 0'):console.log('PhotoEditorSDK | '+H+' | '+J);}};}),_.default=N;}).call(_,T(62));},function(u,_,T){var R=T(30);u.exports=function(M){if(!R(M))throw TypeError(M+' is not an object!');return M;};},function(u,_,T){var R=T(13),M=T(22),I=T(85),U=T(23),N='prototype',G=function(V,z,W){var H=V&G.F,Y=V&G.G,X=V&G.S,Z=V&G.P,J=V&G.B,K=V&G.W,Q=Y?M:M[z]||(M[z]={}),$=Q[N],ee=Y?R:X?R[z]:(R[z]||{})[N],te,re,oe;for(te in Y&&(W=z),W)re=!H&&ee&&void 0!==ee[te],re&&te in Q||(oe=re?ee[te]:W[te],Q[te]=Y&&'function'!=typeof ee[te]?W[te]:J&&re?I(oe,R):K&&ee[te]==oe?function(ae){var ne=function(ie,le,de){if(this instanceof ae){switch(arguments.length){case 0:return new ae();case 1:return new ae(ie);case 2:return new ae(ie,le);}return new ae(ie,le,de);}return ae.apply(this,arguments);};return ne[N]=ae[N],ne;}(oe):Z&&'function'==typeof oe?I(Function.call,oe):oe,Z&&((Q.virtual||(Q.virtual={}))[te]=oe,V&G.R&&$&&!$[te]&&U($,te,oe)));};G.F=1,G.G=2,G.S=4,G.P=8,G.B=16,G.W=32,G.U=64,G.R=128,u.exports=G;},function(u){u.exports=function(T){return'object'==typeof T?null!==T:'function'==typeof T;};},function(u,_,T){"use strict";'use strict';function R(H){return H&&H.__esModule?H:{default:H};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=function(H){function Y(X){(0,I.default)(this,Y);var Z=(0,N.default)(this,H.call(this));return Z.id=Y.id++,Z._onSourceLoaded=Z._onSourceLoaded.bind(Z),Z._renderers=[],Z._glTextures={},Z._source=X,Z._dirty=!0,Z._glUnit=0,Z._mipMapping=!1,Z._magFilter=Y.DefaultMagFilter,Z._minFilter=Y.DefaultMinFilter,Z._repeatX=Y.ClampToEdge,Z._repeatY=Y.ClampToEdge,Z._pixelRatio=1,Z._loaded=!1,Z._frame=new z.Rectangle(0,0,100,100),X&&Z._loadSource(),Z;}return(0,V.default)(Y,H),Y.prototype.resizeTo=function(Z){this._frame.width=Z.x,this._frame.height=Z.y;},Y.prototype._loadSource=function(){var Z=this._source,J=Z.complete,K='Canvas'===Z.constructor.name||Z.tagName&&'CANVAS'===Z.tagName.toUpperCase();return J||K?this._onSourceLoaded():void Z.addEventListener('load',this._onSourceLoaded);},Y.prototype._onSourceLoaded=function(){this._loaded=!0,this._updateGLFilters(),this.emit('loaded'),this.update();},Y.prototype._updateGLFilters=function(){var Z=new z.Vector2(this._source.width,this._source.height);z.Utils.isPowerOfTwo(Z)&&(z.Log.info(this.constructor.name,'Mip-mapping enabled'),this._minFilter=Y.TrilinearFilter,this._mipMapping=!0);},Y.prototype.update=function(){this._frame=new z.Rectangle(0,0,this._source.width,this._source.height),this.emit('update');},Y.prototype.getGLFilter=function(Z,J){return'min'===J?this.constructor.getGLFilter(Z,this._minFilter):'mag'===J?this.constructor.getGLFilter(Z,this._magFilter):void 0;},Y.getGLFilter=function(Z,J){return J===Y.LinearFilter?Z.LINEAR:J===Y.NearestFilter?Z.NEAREST:J===Y.BilinearFilter?Z.LINEAR_MIPMAP_NEAREST:J===Y.TrilinearFilter?Z.LINEAR_MIPMAP_LINEAR:void 0;},Y.prototype.isLoaded=function(){return this._loaded;},Y.prototype.setLoaded=function(Z){this._loaded=Z;},Y.prototype.getSource=function(){return this._source;},Y.prototype.setSource=function(Z){this._source=Z;},Y.prototype.getGLTextureForRenderer=function(Z){return this._glTextures[Z.id];},Y.prototype.setGLTextureForRenderer=function(Z,J){this._renderers[J.id]=J,this._glTextures[J.id]=Z;},Y.prototype.getFrame=function(){return this._frame;},Y.prototype.setFrame=function(Z){this._frame=Z;},Y.prototype.getDimensions=function(){return new z.Vector2(this._frame.width,this._frame.height);},Y.prototype.getPixelRatio=function(){return this._pixelRatio;},Y.prototype.setPixelRatio=function(Z){this._pixelRatio=Z;},Y.prototype.getGLUnit=function(){return this._glUnit;},Y.prototype.setGLUnit=function(Z){this._glUnit=Z;},Y.prototype.setMinFilter=function(Z){this._minFilter=Z;},Y.prototype.getMinFilter=function(){return this._minFilter;},Y.prototype.setMagFilter=function(Z){this._magFilter=Z;},Y.prototype.getMagFilter=function(){return this._magFilter;},Y.prototype.setRepeatX=function(Z){this._repeatX=Z;},Y.prototype.getRepeatX=function(){return this._repeatX;},Y.prototype.setRepeatY=function(Z){this._repeatY=Z;},Y.prototype.getRepeatY=function(){return this._repeatY;},Y.prototype.getGLRepeat=function(Z,J){var K='x'===J?this.getRepeatX():this.getRepeatY();return K===Y.ClampToEdge?Z.CLAMP_TO_EDGE:K===Y.Repeat?Z.REPEAT:K===Y.MirroredRepeat?Z.MIRRORED_REPEAT:void 0;},Y.prototype.isDirty=function(){return this._dirty;},Y.prototype.setDirty=function(Z){this._dirty=Z;},Y.prototype.disposeGLTextures=function(){for(var Z in this._renderers)this.disposeGLTexturesForRenderer(this._renderers[Z]);},Y.prototype.disposeGLTexturesForRenderer=function(Z){if(this._glTextures[Z.id]){var J=Z.getContext();J.deleteTexture(this._glTextures[Z.id]),delete this._glTextures[Z.id],this._renderers[Z.id]||delete this._renderers[Z.id];}},Y.prototype.isMipMappingEnabled=function(){return this._mipMapping;},Y.prototype.dispose=function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.disposeGLTextures();},Y;}(z.EventEmitter);W.NearestFilter=0,W.LinearFilter=1,W.BilinearFilter=2,W.TrilinearFilter=3,W.DefaultMagFilter=W.NearestFilter,W.DefaultMinFilter=W.LinearFilter,W.ClampToEdge=0,W.Repeat=1,W.MirroredRepeat=2,W.id=0,_.default=W;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(G){return G&&G.__esModule?G:{default:G};}(M),U=T(6),N=function(){function G(V,z,W,H,Y){(0,I.default)(this,G),this._width=V,this._height=z,this._pixelRatio=W,this._canvas=H||this._createCanvas(),this._context=Y||this._canvas.getContext('2d'),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}];}return G.prototype._createCanvas=function(){return U.Utils.createCanvas();},G.prototype.clear=function(){var z=this._context;z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio);},G.prototype.resizeTo=function(z){this._width!==z.x&&(this._width=z.x,this._canvas.width=this._width*this._pixelRatio),this._height!==z.y&&(this._height=z.y,this._canvas.height=this._height*this._pixelRatio);},G.prototype.getCanvas=function(){return this._canvas;},G.prototype.getContext=function(){return this._context;},G.prototype.getFilterStack=function(){return this._filterStack;},G.prototype.getWidth=function(){return this._width;},G.prototype.getHeight=function(){return this._height;},G.prototype.getPixelRatio=function(){return this._pixelRatio;},G.prototype.setPixelRatio=function(z){this._pixelRatio=z;},G.prototype.getDimensions=function(){return new U.Vector2(this._width,this._height);},G.prototype.dispose=function(){this._canvas=null,this._context=null;},G;}();_.default=N;},function(u,_,T){"use strict";'use strict';function R(z){return z&&z.__esModule?z:{default:z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(6),N=T(31),G=R(N),V=function(){function z(W,H,Y,X){var Z=4<arguments.length&&void 0!==arguments[4]&&arguments[4];(0,I.default)(this,z),this._renderer=W,this._gl=W.getContext(),this._width=H,this._height=Y,this._frame=null,this._pixelRatio=X,this._projectionMatrix=new U.Matrix(),this._mipMapping=!1,this._framebuffer=null,this._isRoot=Z,this._filterStack=[{renderTarget:this,filter:[]}],Z||this._initFrameBuffer();}return z.prototype.resizeTo=function(H){this._width=0|H.x,this._height=0|H.y,this._isRoot||this._resizeTexture(),this._calculateProjectionMatrix();},z.prototype._setTexParameters=function(){var H=this._gl;H.bindTexture(H.TEXTURE_2D,this._texture),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE);var Y=G.default.DefaultMinFilter,X=G.default.DefaultMagFilter,Z=new U.Vector2(this._width,this._height);U.Utils.isPowerOfTwo(Z)&&(U.Log.info('WebGLRenderTarget','Mip-mapping enabled'),this._mipMapping=!0,this.updateMipMap(),Y=G.default.BilinearFilter),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,G.default.getGLFilter(H,Y)),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,G.default.getGLFilter(H,X));},z.prototype.updateMipMap=function(){if(!this._mipMapping)return!1;var H=this._gl;H.bindTexture(H.TEXTURE_2D,this._texture),H.generateMipmap(H.TEXTURE_2D);},z.prototype._resizeTexture=function(){var H=this._gl;H.bindTexture(H.TEXTURE_2D,this._texture);var Y=this._width*this._pixelRatio,X=this._height*this._pixelRatio;H.texImage2D(H.TEXTURE_2D,0,H.RGBA,Y,X,0,H.RGBA,H.UNSIGNED_BYTE,null),this._setTexParameters();},z.prototype.activate=function(){var H=this._gl;H.bindFramebuffer(H.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),H.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),H.disable(H.STENCIL_TEST);},z.prototype.clear=function(){var H=0<arguments.length&&void 0!==arguments[0]?arguments[0]:U.Color.TRANSPARENT,Y=this._gl;Y.bindFramebuffer(Y.FRAMEBUFFER,this._framebuffer),U.GLUtils.checkFramebufferStatus('WebGLRenderTarget#clear',Y),Y.clearColor.apply(Y,H.toGLColor()),Y.clear(Y.COLOR_BUFFER_BIT);},z.prototype._calculateProjectionMatrix=function(){var H=this._projectionMatrix;H.reset();var Y=this._frame||new U.Rectangle(0,0,this._width,this._height),X=Y.x,Z=Y.y;this._isRoot?(H.a=2*(1/this._width),H.d=2*(-1/this._height),H.tx=-1-X*H.a,H.ty=1-Z*H.d):(H.a=2*(1/this._width),H.d=2*(1/this._height),H.tx=-1-X*H.a,H.ty=-1-Z*H.d);},z.prototype._initFrameBuffer=function(){var H=this._gl;this._framebuffer=H.createFramebuffer(),this._texture=H.createTexture(),H.bindTexture(H.TEXTURE_2D,this._texture),this._setTexParameters(),H.bindFramebuffer(H.FRAMEBUFFER,this._framebuffer),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,this._texture,0),this.resizeTo(new U.Vector2(this._width,this._height)),U.GLUtils.checkFramebufferStatus('WebGLRenderTarget#_initFramebuffer',H);},z.prototype.getProjectionMatrix=function(){return this._projectionMatrix;},z.prototype.getTexture=function(){return this._texture;},z.prototype.getFrame=function(){return this._frame;},z.prototype.setFrame=function(H){this._frame=H;},z.prototype.getFilterStack=function(){return this._filterStack;},z.prototype.getPixelRatio=function(){return this._pixelRatio;},z.prototype.setPixelRatio=function(H){this._pixelRatio=H,this._isRoot||this._resizeTexture();},z.prototype.dispose=function(){var H=this._gl;H.deleteTexture(this._texture),H.deleteFramebuffer(this._framebuffer);},z;}();_.default=V;},function(u,_,T){"use strict";'use strict';function R(W){return W&&W.__esModule?W:{default:W};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(37),N=R(U),G=T(11),V=R(G),z=function(){function W(){var H=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,X=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Z=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,J=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,K=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,Q=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1,$=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,ee=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,te=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,re=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,oe=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,ae=12<arguments.length&&void 0!==arguments[12]?arguments[12]:1,ne=13<arguments.length&&void 0!==arguments[13]?arguments[13]:0,ie=14<arguments.length&&void 0!==arguments[14]?arguments[14]:0,le=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,de=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0,se=17<arguments.length&&void 0!==arguments[17]?arguments[17]:0,pe=18<arguments.length&&void 0!==arguments[18]?arguments[18]:1,ue=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0;(0,I.default)(this,W),this.set(H,Y,X,Z,J,K,Q,$,ee,te,re,oe,ae,ne,ie,le,de,se,pe,ue);}return W.prototype.set=function(Y,X,Z,J,K,Q,$,ee,te,re,oe,ae,ne,ie,le,de,se,pe,ue,_e){this.a=Y,this.b=X,this.c=Z,this.d=J,this.e=K,this.f=Q,this.g=$,this.h=ee,this.i=te,this.j=re,this.k=oe,this.l=ae,this.m=ne,this.n=ie,this.o=le,this.p=de,this.q=se,this.r=pe,this.s=ue,this.t=_e;},W.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0;},W.prototype.apply=function(Y){var X=this.a*Y.r+this.b*Y.g+this.c*Y.b+this.d*Y.a+255.0*this.e,Z=this.f*Y.r+this.g*Y.g+this.h*Y.b+this.i*Y.a+255.0*this.j,J=this.k*Y.r+this.l*Y.g+this.m*Y.b+this.n*Y.a+255.0*this.o,K=this.p*Y.r+this.q*Y.g+this.r*Y.b+this.s*Y.a+255.0*this.t;return new V.default(X,Z,J,K);},W.prototype.multiply=function(Y){var ye=Y,ge=this,X,Z,J,K,Q,$,ee,te,re,oe,ae,ne,ie,le,de,se,pe,ue,_e,fe;return X=ye.a*ge.a+ye.b*ge.f+ye.c*ge.k+ye.d*ge.p,Z=ye.a*ge.b+ye.b*ge.g+ye.c*ge.l+ye.d*ge.q,J=ye.a*ge.c+ye.b*ge.h+ye.c*ge.m+ye.d*ge.r,K=ye.a*ge.d+ye.b*ge.i+ye.c*ge.n+ye.d*ge.s,$=ye.f*ge.a+ye.g*ge.f+ye.h*ge.k+ye.i*ge.p,ee=ye.f*ge.b+ye.g*ge.g+ye.h*ge.l+ye.i*ge.q,te=ye.f*ge.c+ye.g*ge.h+ye.h*ge.m+ye.i*ge.r,re=ye.f*ge.d+ye.g*ge.i+ye.h*ge.n+ye.i*ge.s,ae=ye.k*ge.a+ye.l*ge.f+ye.m*ge.k+ye.n*ge.p,ne=ye.k*ge.b+ye.l*ge.g+ye.m*ge.l+ye.n*ge.q,ie=ye.k*ge.c+ye.l*ge.h+ye.m*ge.m+ye.n*ge.r,le=ye.k*ge.d+ye.l*ge.i+ye.m*ge.n+ye.n*ge.s,se=ye.p*ge.a+ye.q*ge.f+ye.r*ge.k+ye.s*ge.p,pe=ye.p*ge.b+ye.q*ge.g+ye.r*ge.l+ye.s*ge.q,ue=ye.p*ge.c+ye.q*ge.h+ye.r*ge.m+ye.s*ge.r,_e=ye.p*ge.d+ye.q*ge.i+ye.r*ge.n+ye.s*ge.s,Q=ye.a*ge.e+ye.b*ge.j+ye.c*ge.o+ye.d*ge.t+ye.e,oe=ye.f*ge.e+ye.g*ge.j+ye.h*ge.o+ye.i*ge.t+ye.j,de=ye.k*ge.e+ye.l*ge.j+ye.m*ge.o+ye.n*ge.t+ye.o,fe=ye.p*ge.e+ye.q*ge.j+ye.r*ge.o+ye.s*ge.t+ye.t,this.a=X,this.b=Z,this.c=J,this.d=K,this.e=Q,this.f=$,this.g=ee,this.h=te,this.i=re,this.j=oe,this.k=ae,this.l=ne,this.m=ie,this.n=le,this.o=de,this.p=se,this.q=pe,this.r=ue,this.s=_e,this.t=fe,this;},W.prototype.clone=function(){var Y=new W();return Y.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),Y;},W.prototype.equals=function(Y){return this.a===Y.a&&this.b===Y.b&&this.c===Y.c&&this.d===Y.d&&this.e===Y.e&&this.f===Y.f&&this.g===Y.g&&this.h===Y.h&&this.i===Y.i&&this.j===Y.j&&this.k===Y.k&&this.l===Y.l&&this.m===Y.m&&this.n===Y.n&&this.o===Y.o&&this.p===Y.p&&this.q===Y.q&&this.r===Y.r&&this.s===Y.s&&this.t===Y.t;},W.prototype.toString=function(){return'ColorMatrix( '+this.a+', '+this.b+', '+this.c+', '+this.d+', '+this.e+',\n      '+this.f+', '+this.g+', '+this.h+', '+this.i+', '+this.j+',\n      '+this.k+', '+this.l+', '+this.m+', '+this.n+', '+this.o+',\n      '+this.p+', '+this.q+', '+this.r+', '+this.s+', '+this.t+' )';},W.prototype.toArray=function(){var Y=this;return'abcdefghijklmnopqrst'.split('').map(function(X){return Y[X];});},W.createBrightnessMatrix=function(Y){var X=new W();return X.e=Y,X.j=Y,X.o=Y,X;},W.createContrastMatrix=function(Y){var X=new W();return X.a=X.g=X.m=Y,X.e=X.j=X.o=(1-Y)/2,X;},W.createSaturationMatrix=function(){var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,X=new W(),Z=1-Y,J=0.213*Z,K=0.715*Z,Q=0.072*Z;return X.a=J+Y,X.b=K,X.c=Q,X.f=J,X.g=K+Y,X.h=Q,X.k=J,X.l=K,X.m=Q+Y,X;},W.createLinearMatrix=function(){var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,X=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Z=new W();return Z.a=Z.g=Z.m=Y,Z.e=Z.j=Z.o=X,Z;},(0,N.default)(W,null,[{key:'IDENTITY',get:function(){return new W();}}]),W;}();_.default=z;},function(u,_,T){"use strict";'use strict';function R(Y){return Y&&Y.__esModule?Y:{default:Y};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=z.Constants.RendererType,H=function(Y){function X(Z,J){(0,I.default)(this,X);var K=(0,N.default)(this,Y.call(this,J));return K._operation=Z,K._dirtiness={},K.id=z.Utils.getUUID(),K._renderTextures={},K._identitySprite=new z.Engine.Sprite(),K._sprite=new z.Engine.Sprite(),K._renderers=[],K;}return(0,V.default)(X,Y),X.prototype.applyRotation=function(J){var K=this._operation.getInputDimensions(),Q=180*this.getRotation()/Math.PI;Q+=J,this.setRotation(Q*Math.PI/180);var ee=(J+360)%360*Math.PI/180,te=Math.cos(ee),re=Math.sin(ee),oe=this._options.position.clone().subtract(0.5).multiply(K),ae=new z.Vector2(oe.x*te-oe.y*re,oe.x*re+oe.y*te).divide(K.clone().flip());this.setPosition(new z.Vector2(0.5,0.5).add(ae));},X.prototype.applyFlip=function(J){var K=this.getPosition().clone();'horizontal'===J?K.x=1-this._options.position.x:'vertical'===J?K.y=1-this._options.position.y:void 0,this.setPosition(K);},X.prototype.applyCrop=function(J,K){var Q=J.getInputDimensions(),$=K.rotation-J.getRotation(),ee=J.getEnd().clone().subtract(J.getStart()).multiply(Q),te=K.end.clone().subtract(K.start).multiply(Q),re=J.getStart().clone().subtract(K.start).multiply(Q),oe=K.scale/J.getScale(),ae=J.getStart().clone().multiply(Q),ne=this.getPosition().clone().multiply(ee).add(ae),ie=ne.clone().subtract(Q.clone().multiply(0.5)),le=Math.cos($),de=Math.sin($),se=new z.Vector2(ie.x*le-ie.y*de,ie.x*de+ie.y*le);se.multiply(oe);var pe=Q.clone().multiply(0.5).add(se).subtract(ae).add(re).divide(te);if(this._options.dimensions){var ue=this.getDimensions().clone().multiply(oe);K.textureScale&&ue.multiply(K.textureScale/J.getTextureScale()),this.set({dimensions:ue},!1);}var _e=180*$/Math.PI,fe=180*this.getRotation()/Math.PI+_e;this.set({rotation:fe*Math.PI/180,position:pe},!1);},X.prototype.getDisplayObject=function(){return this._sprite;},X.prototype._getTexture=function(){throw new Error('Sprite#_getTexture is abstract and not implemented in child class.');},X.prototype._prepareRenderTexture=function(J){if(!this._renderTexture){var K=this._getTexture();this._renderTextureContainer=new z.Engine.Container(),this._renderTextureSprite=new z.Engine.Sprite(K),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(J.getRenderer(),K.getDimensions());}else this._renderTexture.clear();},X.prototype._rendersToRenderTexture=function(J){return J.getOptions().smoothDownscaling&&J.getRenderer().isOfType(W.WEBGL);},X.prototype.update=function(J,K){return this._rendersToRenderTexture(J)&&this._prepareRenderTexture(J),this._updateSprite(K),this._rendersToRenderTexture(J)&&this._renderToRenderTexture(J),z.Promise.resolve();},X.prototype._updateSprite=function(J){this._sprite.setAnchor(this._options.anchor),this._sprite.setPosition(this._options.position.clone().multiply(J));var K=this._options.dimensions;K&&(K=K.clone().multiply(this._operation.getSDK().getTextureScale()),this._sprite.setWidth(K.x),this._sprite.setHeight(K.y)),this._sprite.updateTransform();var Q=this._sprite.getTexture().getFrame(),$=new z.Vector2(Q.width,Q.height);this._sprite.setPivot(this._options.pivot.clone().multiply($)),this._sprite.setRotation(this._options.rotation),this._sprite.updateTransform();},X.prototype._renderToRenderTexture=function(J){var K=this._getTexture().getDimensions(),Q=this._getRenderTexture(J.getRenderer(),K),$=K.clone();if(this._options.smoothDownscaling&&($.x=z.Utils.nextHighestPOT($.x),$.y=z.Utils.nextHighestPOT($.y)),this._renderTexture.resizeTo($),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var ee=$.clone().subtract(K.x,K.y).divide($),te=Q.getUVs().getUVs();te[0].x=te[3].x=0,te[1].x=te[2].x=1-ee.x,te[0].y=te[1].y=0,te[2].y=te[3].y=1-ee.y;}this._sprite.setTexture(Q);},X.prototype.isDirtyForRenderer=function(J){return J.id in this._dirtiness||(this._dirtiness[J.id]=!0),this._dirtiness[J.id];},X.prototype.setDirtyForRenderer=function(J,K){this._renderers[K.id]=K,this._dirtiness[K.id]=J;},X.prototype.setDirty=function(J){for(var K in this._dirtiness)this.setDirtyForRenderer(J,this._renderers[K]);},X.prototype._getRenderTexture=function(J){var K=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new z.Vector2(100,100);return this._renderTextures[J.id]||(this._renderTextures[J.id]=new z.Engine.RenderTexture(J,K.x,K.y,1)),this._renderTextures[J.id];},X.prototype.dispose=function(){for(var J in this._renderTextures)this._renderTextures[J].dispose();},X;}(z.Configurable);_.default=H;},function(u){"use strict";"use strict";/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/function R(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null;}var M=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],I=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];u.exports={stackBlurCanvasRGBA:function(U,N,G,V,z,W){if(!(isNaN(W)||1>W)){W|=0;var H=U.data,me=W+W+1,he=V-1,xe=z-1,Te=W+1,ve=Te*(Te+1)/2,be=new R(),Re=be,Y,X,Z,J,K,Q,$,ee,te,re,oe,ae,ne,ie,le,de,se,pe,ue,_e,fe,ye,ge,ce,Ce;for(Z=1;Z<me;Z++)Re=Re.next=new R(),Z==Te&&(Ce=Re);Re.next=be;var Ee=null,Oe=null;$=Q=0;var Fe=M[W],ke=I[W];for(X=0;X<z;X++){for(de=se=pe=ue=ee=te=re=oe=0,ae=Te*(_e=H[Q]),ne=Te*(fe=H[Q+1]),ie=Te*(ye=H[Q+2]),le=Te*(ge=H[Q+3]),ee+=ve*_e,te+=ve*fe,re+=ve*ye,oe+=ve*ge,Re=be,Z=0;Z<Te;Z++)Re.r=_e,Re.g=fe,Re.b=ye,Re.a=ge,Re=Re.next;for(Z=1;Z<Te;Z++)J=Q+((he<Z?he:Z)<<2),ee+=(Re.r=_e=H[J])*(ce=Te-Z),te+=(Re.g=fe=H[J+1])*ce,re+=(Re.b=ye=H[J+2])*ce,oe+=(Re.a=ge=H[J+3])*ce,de+=_e,se+=fe,pe+=ye,ue+=ge,Re=Re.next;for(Ee=be,Oe=Ce,Y=0;Y<V;Y++)H[Q+3]=ge=oe*Fe>>ke,0===ge?H[Q]=H[Q+1]=H[Q+2]=0:(ge=255/ge,H[Q]=(ee*Fe>>ke)*ge,H[Q+1]=(te*Fe>>ke)*ge,H[Q+2]=(re*Fe>>ke)*ge),ee-=ae,te-=ne,re-=ie,oe-=le,ae-=Ee.r,ne-=Ee.g,ie-=Ee.b,le-=Ee.a,J=$+((J=Y+W+1)<he?J:he)<<2,de+=Ee.r=H[J],se+=Ee.g=H[J+1],pe+=Ee.b=H[J+2],ue+=Ee.a=H[J+3],ee+=de,te+=se,re+=pe,oe+=ue,Ee=Ee.next,ae+=_e=Oe.r,ne+=fe=Oe.g,ie+=ye=Oe.b,le+=ge=Oe.a,de-=_e,se-=fe,pe-=ye,ue-=ge,Oe=Oe.next,Q+=4;$+=V;}for(Y=0;Y<V;Y++){for(se=pe=ue=de=te=re=oe=ee=0,Q=Y<<2,ae=Te*(_e=H[Q]),ne=Te*(fe=H[Q+1]),ie=Te*(ye=H[Q+2]),le=Te*(ge=H[Q+3]),ee+=ve*_e,te+=ve*fe,re+=ve*ye,oe+=ve*ge,Re=be,Z=0;Z<Te;Z++)Re.r=_e,Re.g=fe,Re.b=ye,Re.a=ge,Re=Re.next;for(K=V,Z=1;Z<=W;Z++)Q=K+Y<<2,ee+=(Re.r=_e=H[Q])*(ce=Te-Z),te+=(Re.g=fe=H[Q+1])*ce,re+=(Re.b=ye=H[Q+2])*ce,oe+=(Re.a=ge=H[Q+3])*ce,de+=_e,se+=fe,pe+=ye,ue+=ge,Re=Re.next,Z<xe&&(K+=V);for(Q=Y,Ee=be,Oe=Ce,X=0;X<z;X++)J=Q<<2,H[J+3]=ge=oe*Fe>>ke,0<ge?(ge=255/ge,H[J]=(ee*Fe>>ke)*ge,H[J+1]=(te*Fe>>ke)*ge,H[J+2]=(re*Fe>>ke)*ge):H[J]=H[J+1]=H[J+2]=0,ee-=ae,te-=ne,re-=ie,oe-=le,ae-=Ee.r,ne-=Ee.g,ie-=Ee.b,le-=Ee.a,J=Y+((J=X+Te)<xe?J:xe)*V<<2,ee+=de+=Ee.r=H[J],te+=se+=Ee.g=H[J+1],re+=pe+=Ee.b=H[J+2],oe+=ue+=Ee.a=H[J+3],Ee=Ee.next,ae+=_e=Oe.r,ne+=fe=Oe.g,ie+=ye=Oe.b,le+=ge=Oe.a,de-=_e,se-=fe,pe-=ye,ue-=ge,Oe=Oe.next,Q+=V;}}}};},function(u,_,T){"use strict";"use strict";_.__esModule=!0;var M=T(82),I=function(U){return U&&U.__esModule?U:{default:U};}(M);_.default=function(){function U(N,G){for(var V=0,z;V<G.length;V++)z=G[V],z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),(0,I.default)(N,z.key,z);}return function(N,G,V){return G&&U(N.prototype,G),V&&U(N,V),N;};}();},function(u){u.exports=function(T){try{return!!T();}catch(R){return!0;}};},function(u,_,T){var R=T(92),M=T(50);u.exports=Object.keys||function(U){return R(U,M);};},function(u){u.exports=function(T,R){return{enumerable:!(1&T),configurable:!(2&T),writable:!(4&T),value:R};};},function(u){var T=0,R=Math.random();u.exports=function(M){return'Symbol('.concat(M===void 0?'':M,')_',(++T+R).toString(36));};},function(u,_,T){"use strict";'use strict';function R(X){return X&&X.__esModule?X:{default:X};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(25),N=R(U),G=T(110),V=R(G),z={256:'ImageWidth',257:'ImageHeight',258:'BitsPerSample',259:'Compression',262:'PhotometricInterpretation',270:'ImageDescription',271:'Make',272:'Model',273:'StripOffsets',274:'Orientation',277:'SamplesPerPixel',278:'RowsPerStrip',279:'StripByteCounts',282:'XResolution',283:'YResolution',284:'PlanarConfiguration',296:'ResolutionUnit',301:'TransferFunction',305:'Software',306:'DateTime',315:'Artist',318:'WhitePoint',319:'PrimaryChromaticities',513:'JPEGInterchangeFormat',514:'JPEGInterchangeFormatLength',529:'YCbCrCoefficients',530:'YCbCrSubSampling',531:'YCbCrPositioning',532:'ReferenceBlackWhite',33432:'Copyright',34665:'ExifIFDPointer',34853:'GPSInfoIFDPointer',40965:'InteroperabilityIFDPointer'},W='data:image/jpeg;base64,',H=/^data:image\/jpeg;base64,/i,Y=function(){function X(Z){(0,I.default)(this,X),this._buf=Z,this._stream=new V.default(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifBuffer=this._getExifBuffer(),this._exifStream=new V.default(this._exifBuffer),this._parseExif();}return X.prototype.restoreExifTags=function(J){var K=J.replace(W,''),Q=N.default.decode(K),$=this._sliceIntoSegments(Q),ee=$[1][0],te=Q.slice(0,ee),re=Q.slice(ee),oe=te.concat(this._exifBuffer);return oe=oe.concat(re),W+N.default.encode(oe);},X.prototype.setOrientation=function(J){if(this._tagData.Orientation){var K=this._tagData.Orientation.entryOffset;this._exifStream.setHead(K+8),this._exifStream.writeInt16(J);}},X.isJPEG=function(J){return H.test(J);},X.fromBase64String=function(J){var K=J.replace(W,''),Q=N.default.decode(K);return new X(Q);},X.prototype._parseExif=function(){this._exifStream.setHead(0),this._exifStream.readInt16(),this._exifStream.readInt16();var J=this._exifStream.readString(4);if('Exif'===J){this._exifStream.readInt16();var K=this._exifStream.getHead(),Q=!1,$=this._exifStream.readInt16();if(0x4949===$)Q=!1;else if(0x4d4d===$)Q=!0;else throw new Error('Invalid TIFF data: No endian type found');if(4.2e1!==this._exifStream.readInt16(!Q))throw new Error('Invalid TIFF data: No 0x002A');var ee=this._exifStream.readInt32(!Q);if(8>ee)throw new Error('Invalid TIFF data: First IFD offset < 8');var re=this._readTags(this._exifStream,K,K+ee,Q);this._tags=re.tags,this._tagData=re.tagData;}},X.prototype._readTags=function(J,K,Q,$){J.setHead(Q);for(var ee=J.readInt16(!$),te={},re=[],oe=0,ae;oe<ee;oe++){ae=Q+12*oe+2,J.setHead(ae);var ne=J.readInt16(!$),ie=void 0,le=void 0,de=void 0;if(z[ne]){ne=z[ne],ie=J.readInt16(!$),le=J.readInt32(!$),de=J.readInt32(!$)+K;var se=null;switch(ie){case 1:case 7:if(1===le)se=J.readInt8(!$);else{se=[];for(var pe=0;pe<le;pe++)se.push(J.readInt8(!$));}break;case 2:J.setHead(4<le?de:ae+8),se=J.readString(le);break;case 3:if(J.setHead(2<le?de:ae+8),1===le)se=J.readInt16(!$);else{se=[];for(var ue=0;ue<le;ue++)se.push(J.readInt16(!$));}break;case 4:case 9:if(J.setHead(1<le?de:ae+8),1===le)se=J.readInt32(!$);else{se=[];for(var _e=0;_e<le;_e++)se.push(J.readInt32(!$));}break;case 5:case 10:if(J.setHead(de),1===le){var fe=J.readInt32(!$),ye=J.readInt32(!$);se=fe/ye;}else{se=[];for(var ge=0;ge<le;ge++){var ce=J.readInt32(!$),me=J.readInt32(!$);se.push(ce/me);}}}te[ne]=se,re[ne]={value:se,numValues:le,entryOffset:ae,valueOffset:de,type:ie};}}return{tags:te,tagData:re};},X.prototype._getExifBuffer=function(){for(var J=this._segments,K=0;K<J.length;K++){var Q=J[K][0],$=J[K][1];this._stream.setHead(Q);var ee=this._stream.peekInt16();if(0xffe1===ee)return this._buf.slice(Q,$);}return!1;},X.prototype._sliceIntoSegments=function(J){for(var K=new V.default(J),Q=[],$;K.getHead()<J.length;)if($=K.readInt16(),0xffd8!==$){if(0xffda===$)break;if(0xff00<=$&&0xffff>=$){var ee=K.readInt16(),te=K.getHead()+ee-2;Q.push([K.getHead()-4,te]),K.setHead(te);}else throw new Error('Invalid marker: 0x'+$.toString(16));}return this._stream.setHead(0),Q;},X.prototype.getTags=function(){return this._tags;},X.prototype.getTagData=function(){return this._tagData;},X.prototype.dispose=function(){this._buf=[],this._exifBuffer=[],this._segments=[];},X;}();/*
    * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
    * Licensed under MIT
    * @license
    */_.default=Y;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(G){return G&&G.__esModule?G:{default:G};}(M),U=T(6),N=function(){function G(){(0,I.default)(this,G),this._position=new U.Vector2(0,0),this._scale=new U.Vector2(1,1),this._pivot=new U.Vector2(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new U.Matrix(),this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new U.Rectangle(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new U.Rectangle(0,0,1,1),this._tint=0xffffff,this._filterRectangle=new U.Rectangle(0,0,0,0);}return G.prototype.renderWebGL=function(){U.Log.warn(this.constructor.name,'`renderWebGL` is abstract and not implemented in inherited class');},G.prototype.renderCanvas=function(){U.Log.warn(this.constructor.name,'`renderCanvas` is abstract and not implemented in inherited class');},G.prototype.updateTransform=function(){var z=this._parent?this._parent.getWorldTransform():U.Matrix.IDENTITY,W=this._worldTransform,H=this._rotation!==this._lastRotation;H&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),W.a=this._cosRotation*this._scale.x,W.b=this._sinRotation*this._scale.x,W.c=-this._sinRotation*this._scale.y,W.d=this._cosRotation*this._scale.y,W.tx=this._position.x,W.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(W.tx-=this._pivot.x*W.a+this._pivot.y*W.c,W.ty-=this._pivot.x*W.b+this._pivot.y*W.d),W.tx|=0,W.ty|=0,W.multiply(z),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},G.prototype.addShader=function(z){this._shaders.push(z);},G.prototype.removeShader=function(z){var W=this._shaders.indexOf(z);return-1!==W&&(this._shaders.splice(W,1),!0);},G.prototype.removeShaderAt=function(z){return!!this._shaders[z]&&(this._shaders.splice(z,1),!0);},G.prototype.getBounds=function(){return this._bounds.clone();},G.prototype.getPosition=function(){return this._position;},G.prototype.setPosition=function(z,W){z instanceof U.Vector2?this._position.copy(z):this._position.set(z,W),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},G.prototype.getScale=function(){return this._scale;},G.prototype.setScale=function(z,W){z instanceof U.Vector2?this._scale.copy(z):this._scale.set(z,W),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},G.prototype.getPivot=function(){return this._pivot;},G.prototype.setPivot=function(z,W){z instanceof U.Vector2?this._pivot.copy(z):this._pivot.set(z,W),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},G.prototype.getRotation=function(){return this._rotation;},G.prototype.setRotation=function(z){this._rotation=z,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},G.prototype.getAlpha=function(){return this._alpha;},G.prototype.setAlpha=function(z){this._alpha=z;},G.prototype.getWorldAlpha=function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha;},G.prototype.getWorldTransform=function(){return this._worldTransform;},G.prototype.getParent=function(){return this._parent;},G.prototype.setParent=function(z){this._parent=z;},G.prototype.getFilterRectangle=function(){return this._filterRectangle;},G.prototype.setFilterRectangle=function(z){this._filterRectangle.copy(z);},G.prototype.getTint=function(){return this._tint;},G.prototype.setTint=function(z){this._tint=z;},G.prototype.isVisible=function(){return this._visible;},G.prototype.setVisible=function(z){this._visible=z;},G;}();_.default=N;},function(u,_,T){"use strict";'use strict';function R(te){return te&&te.__esModule?te:{default:te};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(14),H=R(W),Y=T(47),X=R(Y),Z=T(48),J=R(Z),K=z.Constants.OptionType,Q=z.Constants.UniformType,$=z.Constants.RendererType,ee=function(te){function re(){return(0,I.default)(this,re),(0,N.default)(this,te.apply(this,arguments));}return(0,V.default)(re,te),re.prototype._initOptions=function(){var ae=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=J.default.defaultUniforms,this._attributes=J.default.defaultAttributes,this._vertexSource=J.default.defaultVertexSource,this._fragmentSource=J.default.defaultFragmentSource,this._initUniforms(),te.prototype._initOptions.call(this,ae);},re.prototype._initUniforms=function(){for(var ae in this._uniforms={},this._availableUniforms){var ne=this._availableUniforms[ae];this._uniforms[ae]={type:ne.type,value:ne.default||null};}for(var ie in this.availableOptions){var le=this.availableOptions[ie];le.uniformType?this._uniforms['u_'+ie]={type:le.uniformType,value:le.default||null}:z.Log.trace(this.constructor.name,'Option `'+ie+'` is missing a `uniformType`!');}},re.prototype.setOption=function(ae,ne){var ie=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;te.prototype.setOption.call(this,ae,ne,ie);var le=ne,de=this.availableOptions[ae];if(de.uniformType){var se='u_'+ae;switch(de.type){case K.COLOR:de.uniformType===Q.FLOAT4?le=ne.toGLColor():de.uniformType===Q.FLOAT3&&(le=ne.toRGBGLColor());break;case K.VECTOR2:le=[ne.x,ne.y];break;case K.COLOR_MATRIX:le=[ne.a,ne.b,ne.c,ne.d,ne.f,ne.g,ne.h,ne.i,ne.k,ne.l,ne.m,ne.n,ne.p,ne.q,ne.r,ne.s];var pe=[ne.e,ne.j,ne.o,ne.t];this._uniforms[se+'_vec']={value:pe,type:Q.FLOAT4};}this.setUniform(se,le);}},re.prototype.setUniform=function(ae,ne){2<arguments.length&&void 0!==arguments[2]&&arguments[2];this._uniforms[ae].value=ne;},re.prototype.setUniforms=function(ae){var ne=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var ie in ae)this._uniforms[ie].value=ae[ie],ne&&this.syncUniform(ie);},re.prototype.syncUniform=function(ae){this._shaders.forEach(function(ne){ne.syncUniform(ae);});},re.prototype.syncUniforms=function(){this._shaders.forEach(function(ae){ae.syncUniforms();});},re.prototype.getShaderForRenderer=function(ae){var ne=ae.getContext(),ie=this._shaders[ne.id];return ie||(ie=new X.default(ae,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[ne.id]=ie),ie;},re.prototype.apply=function(ae,ne,ie){var le=3<arguments.length&&void 0!==arguments[3]&&arguments[3];ae.isOfType($.WEBGL)?this._applyWebGL(ae,ne,ie,le):ae.isOfType($.CANVAS)&&this._applyCanvas(ae,ne,ie,le);},re.prototype._applyWebGL=function(ae,ne,ie){var le=3<arguments.length&&void 0!==arguments[3]&&arguments[3],de=ae.getContext(),se=this.getShaderForRenderer(ae);ae.setRenderTarget(ie),le&&ie.clear(),ae.setShader(se);var pe=ae.getCurrentRenderTarget().getProjectionMatrix().toArray();se.setUniform('u_projMatrix',pe),se.syncUniforms(),de.activeTexture(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,ne.getTexture()),de.drawElements(de.TRIANGLES,6,de.UNSIGNED_SHORT,0);},re.prototype._applyCanvas=function(ae,ne,ie){var le=3<arguments.length&&void 0!==arguments[3]&&arguments[3],de=ne.getCanvas(),se=ie.getContext();z.Log.warn(this.constructor.name,'`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`.'),se.clearRect(0,0,de.width,de.height),se.drawImage(de,0,0);},re.prototype.dispose=function(){this._shaders.forEach(function(ae){return ae.dispose();}),this._shaders=[];},re;}(H.default);_.default=ee;},function(u,_,T){"use strict";'use strict';function R(z){return z&&z.__esModule?z:{default:z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(6),N=T(32),G=R(N),V=function(){function z(W){(0,I.default)(this,z),this._renderer=W,this._filterStack=[{renderTarget:W.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new U.Rectangle(0,0,W.getWidth(),W.getHeight());}return z.prototype.resizeTo=function(H){this._textureFrame.width=H.x,this._textureFrame.height=H.y,this._textures.forEach(function(Y){return Y.resizeTo(H);});},z.prototype.pushFilters=function(H,Y){var X=H.getBounds();this._currentFrame=X;var Z=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(Z),this._filterStack.push({renderTarget:Z,filters:Y});},z.prototype.popFilters=function(){var H=this._filterStack.pop(),Y=H.filters,X=H.renderTarget,Z=this._filterStack[this._filterStack.length-1],J=X,K=Z.renderTarget;return 1===Y.length?(Y[0].apply(this._renderer,J,K),this._textures.push(J)):this._applyFilters(Y,J,K),Y;},z.prototype._applyFilters=function(H,Y,X){var Z=this,J=Y,K=this._getOrCreateRenderTarget(!0),Q=H[H.length-1];H.forEach(function($){if(!($===Q)){$.apply(Z._renderer,J,K);var re=J;J=K,K=re;}else $.apply(Z._renderer,J,X);}),this._textures.push(J),this._textures.push(K);},z.prototype._getOrCreateRenderTarget=function(H){var Y=this._textures.pop();return Y||(Y=new G.default(this._textureFrame.width,this._textureFrame.height,1)),H&&Y.clear(),Y;},z.prototype.setFilterStack=function(H){this._filterStack=H;},z.prototype.dispose=function(){},z;}();_.default=V;},function(u,_,T){"use strict";'use strict';function R(Y){return Y&&Y.__esModule?Y:{default:Y};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(6),N=T(33),G=R(N),V=T(107),z=R(V),W=U.Constants.RendererType,H=function(){function Y(X){(0,I.default)(this,Y),this._renderer=X,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new U.Rectangle(0,0,X.getWidth(),X.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on('context',this._onContextChange),this._onContextChange();}return Y.prototype.resizeTo=function(Z){this._textureFrame.width=Z.x,this._textureFrame.height=Z.y,this._renderTargets.forEach(function(J){return J.resizeTo(Z);});},Y.prototype.getFilterStack=function(){return this._filterStack;},Y.prototype.setFilterStack=function(Z){this._filterStack=Z;},Y.prototype._getOrCreateRenderTarget=function(Z){var J=this._renderTargets.pop();return J||(J=new G.default(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),J.setFrame(this._currentFrame),Z&&J.clear(),J;},Y.prototype.pushFilters=function(Z,J){var K=Z.getBounds();this._currentFrame=K;var Q=Z.getFilterRectangle();0<Q.width&&0<Q.height&&(this._currentFrame=Q);var $=this._getOrCreateRenderTarget();this._renderer.setRenderTarget($),$.clear(),this._filterStack.push({renderTarget:$,filters:J});},Y.prototype.popFilters=function(){var Z=this._filterStack.pop(),J=Z.filters,K=Z.renderTarget,Q=this._filterStack[this._filterStack.length-1],$=K,ee=Q.renderTarget;this._quad.map(this._textureFrame,$.getFrame());var te=J[0].getShaderForRenderer(this._renderer),re=this._quad.getVertexBuffer(),oe=this._quad.getIndexBuffer(),ae=this._renderer.getContext();ae.bindBuffer(ae.ARRAY_BUFFER,re),ae.bindBuffer(ae.ELEMENT_ARRAY_BUFFER,oe);var ne=te.getAttributeLocations();return ae.vertexAttribPointer(ne.a_position,2,ae.FLOAT,!1,0,0),ae.vertexAttribPointer(ne.a_texCoord,2,ae.FLOAT,!1,0,32),ae.vertexAttribPointer(ne.a_color,4,ae.FLOAT,!1,0,64),1===J.length?(J[0].apply(this._renderer,$,ee),this._renderTargets.push($)):this._applyFilters(J,$,ee),J;},Y.prototype._applyFilters=function(Z,J,K){var Q=this,$=J,ee=this._getOrCreateRenderTarget(!0),te=Z[Z.length-1];Z.forEach(function(re){if(!(re===te)){re.apply(Q._renderer,$,ee);var ne=$;$=ee,ee=ne;}else re.apply(Q._renderer,$,K);}),this._renderTargets.push($),this._renderTargets.push(ee);},Y.prototype._onContextChange=function(){this._renderTargets.length=0,this._renderer.isOfType(W.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new z.default(this._renderer));},Y.prototype.dispose=function(){this._renderer.off('context',this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(Z){Z.dispose();});},Y;}();_.default=H;},function(u,_,T){"use strict";'use strict';function R(H){return H&&H.__esModule?H:{default:H};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(6),N=R(U),G=T(9),V=N.default.Log,z=N.default.Utils,W=function(){function H(Y,X,Z,J,K){(0,I.default)(this,H),this._renderer=Y,this._vertexSource=X,this._fragmentSource=Z,this._uniforms=J||{},this._uniformLocations={},this._attributes=K||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on('context',this._onContextChange),this._init();}return H.prototype._init=function(){this._compile();var X=this._renderer.getContext();X.useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations();},H.prototype._onContextChange=function(){this._init();},H.prototype.setupBuffers=function(X,Z){var J=this._renderer.getContext();J.bindBuffer(J.ARRAY_BUFFER,X),J.bindBuffer(J.ELEMENT_ARRAY_BUFFER,Z),J.vertexAttribPointer(this._attributeLocations.a_position,2,J.FLOAT,!1,N.default.VERTEX_BYTE_SIZE,0),J.vertexAttribPointer(this._attributeLocations.a_texCoord,2,J.FLOAT,!1,N.default.VERTEX_BYTE_SIZE,8),J.vertexAttribPointer(this._attributeLocations.a_color,4,J.UNSIGNED_BYTE,!0,N.default.VERTEX_BYTE_SIZE,16);},H.prototype.syncUniforms=function(){var X=this;Object.keys(this._uniforms).forEach(function(Z){X.syncUniform(Z);});},H.prototype.syncUniform=function(X){var Z=this._renderer.getContext(),J=this._uniforms[X],K=this._uniformLocations[X];switch(J.type){case G.UniformType.SAMPLER2D:case G.UniformType.INT:case G.UniformType.INT1:Z.uniform1i(K,J.value);break;case G.UniformType.FLOAT:case G.UniformType.FLOAT1:Z.uniform1f(K,J.value);break;case G.UniformType.FLOAT2:Z.uniform2f(K,J.value[0],J.value[1]);break;case G.UniformType.FLOAT3:Z.uniform3f(K,J.value[0],J.value[1],J.value[2]);break;case G.UniformType.FLOAT4:Z.uniform4f(K,J.value[0],J.value[1],J.value[2],J.value[3]);break;case G.UniformType.FLOAT_VECTOR2:Z.uniform2fv(K,J.value);break;case G.UniformType.MAT3:case G.UniformType.MAT3FV:Z.uniformMatrix3fv(K,!1,J.value);break;case G.UniformType.MAT4:Z.uniformMatrix4fv(K,!1,J.value);break;default:V.warn(this.constructor.name,'Unknown uniform type: '+J.type);}},H.prototype._cacheAttributeLocations=function(){var X=this,Z=this._renderer.getContext();this._attributes.forEach(function(J){X._attributeLocations[J]=Z.getAttribLocation(X._program,J);});},H.prototype._cacheUniformLocations=function(){var X=this,Z=this._renderer.getContext(),J=Object.keys(this._uniforms);J.forEach(function(K){X._uniformLocations[K]=Z.getUniformLocation(X._program,K);});},H.prototype._addPrecisionToSource=function(X){var Z=this._renderer.getMaxFloatPrecision(),J='mediump';return z.isMobile()&&'highp'===Z&&(J='highp'),'precision '+J+' float;\n'+X;},H.prototype._compile=function(){var X=this._renderer.getContext(),Z=this._compileShader(X.VERTEX_SHADER,this._vertexSource);this._vertexShader=Z;var J=this._addPrecisionToSource(this._fragmentSource),K=this._compileShader(X.FRAGMENT_SHADER,J);this._fragmentShader=K;var Q=X.createProgram();X.attachShader(Q,Z),X.attachShader(Q,K),X.linkProgram(Q);var $=X.getProgramParameter(Q,X.LINK_STATUS);if(!$){var ee=X.getProgramInfoLog(Q);X.isContextLost()&&(ee='WebGL context lost'),X.deleteProgram(Q),V.error(this.constructor.name,'WebGL program linking error: '+ee);}this._program=Q;},H.prototype._compileShader=function(X,Z){var J=this._renderer.getContext(),K=J.createShader(X);J.shaderSource(K,Z),J.compileShader(K);var Q=J.getShaderParameter(K,J.COMPILE_STATUS);if(!Q){var $=J.getShaderInfoLog(K);J.isContextLost()&&($='WebGL context lost'),J.deleteShader(K),V.error(this.constructor.name,'WebGL shader compilation error: '+$);}return K;},H.prototype.setUniform=function(X,Z){var J=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this._uniforms[X].value=Z,J&&this.syncUniform(X);},H.prototype.setUniforms=function(X){var Z=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var J in X)this._uniforms[J].value=X[J],Z&&this.syncUniform(J);},H.prototype.getUniforms=function(){return this._uniforms;},H.prototype.getAttributes=function(){return this._attributes;},H.prototype.getAttributeLocations=function(){return this._attributeLocations;},H.prototype.getProgram=function(){return this._program;},H.prototype.dispose=function(){var X=this._renderer.getContext();X.deleteProgram(this._program),X.deleteShader(this._vertexShader),X.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off('context',this._onContextChange);},H;}();_.default=W;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(47),H=R(W),Y=z.Constants.UniformType,X=function(J){function K(Q,$,ee){return(0,I.default)(this,K),$=$||K.defaultVertexSource,ee=ee||K.defaultFragmentSource,(0,N.default)(this,J.call(this,Q,$,ee,K.defaultUniforms,K.defaultAttributes));}return(0,V.default)(K,J),K;}(H.default);X.defaultVertexSource=T(224),X.defaultFragmentSource=T(223);var Z=new z.Matrix();X.defaultUniforms={u_image:{type:Y.SAMPLER2D,value:0},u_projMatrix:{type:Y.MAT3,value:Z.toArray()}},X.defaultAttributes=['a_position','a_texCoord','a_color'],_.default=X;},function(u){u.exports=function(T){if(T==void 0)throw TypeError("Can't call method on  "+T);return T;};},function(u){u.exports='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',');},function(u){u.exports={};},function(u){u.exports=!0;},function(u,_,T){var R=T(28),M=T(203),I=T(50),U=T(56)('IE_PROTO'),N=function(){},G='prototype',V=function(){var z=T(86)('iframe'),W=I.length,H='<',Y='>',X;for(z.style.display='none',T(196).appendChild(z),z.src='javascript:',X=z.contentWindow.document,X.open(),X.write(H+'script'+Y+'document.F=Object'+H+'/script'+Y),X.close(),V=X.F;W--;)delete V[G][I[W]];return V();};u.exports=Object.create||function(W,H){var Y;return null===W?Y=V():(N[G]=R(W),Y=new N(),N[G]=null,Y[U]=W),void 0===H?Y:M(Y,H);};},function(u,_){_.f={}.propertyIsEnumerable;},function(u,_,T){var R=T(17).f,M=T(16),I=T(24)('toStringTag');u.exports=function(U,N,G){U&&!M(U=G?U:U.prototype,I)&&R(U,I,{configurable:!0,value:N});};},function(u,_,T){var R=T(57)('keys'),M=T(41);u.exports=function(I){return R[I]||(R[I]=M(I));};},function(u,_,T){var R=T(13),M='__core-js_shared__',I=R[M]||(R[M]={});u.exports=function(U){return I[U]||(I[U]={});};},function(u){var T=Math.ceil,R=Math.floor;u.exports=function(M){return isNaN(M=+M)?0:(0<M?R:T)(M);};},function(u,_,T){var R=T(30);u.exports=function(M,I){if(!R(M))return M;var U,N;if(I&&'function'==typeof(U=M.toString)&&!R(N=U.call(M)))return N;if('function'==typeof(U=M.valueOf)&&!R(N=U.call(M)))return N;if(!I&&'function'==typeof(U=M.toString)&&!R(N=U.call(M)))return N;throw TypeError("Can't convert object to primitive value");};},function(u,_,T){var R=T(13),M=T(22),I=T(52),U=T(61),N=T(17).f;u.exports=function(G){var V=M.Symbol||(M.Symbol=I?{}:R.Symbol||{});'_'==G.charAt(0)||G in V||N(V,G,{value:U.f(G)});};},function(u,_,T){_.f=T(24);},function(u){function T(){throw new Error('setTimeout has not been defined');}function R(){throw new Error('clearTimeout has not been defined');}function M(K){if(W===setTimeout)return setTimeout(K,0);if((W===T||!W)&&setTimeout)return W=setTimeout,setTimeout(K,0);try{return W(K,0);}catch(Q){try{return W.call(null,K,0);}catch($){return W.call(this,K,0);}}}function I(K){if(H===clearTimeout)return clearTimeout(K);if((H===R||!H)&&clearTimeout)return H=clearTimeout,clearTimeout(K);try{return H(K);}catch(Q){try{return H.call(null,K);}catch($){return H.call(this,K);}}}function U(){X&&Z&&(X=!1,Z.length?Y=Z.concat(Y):J=-1,Y.length&&N());}function N(){if(!X){var K=M(U);X=!0;for(var Q=Y.length;Q;){for(Z=Y,Y=[];++J<Q;)Z&&Z[J].run();J=-1,Q=Y.length;}Z=null,X=!1,I(K);}}function G(K,Q){this.fun=K,this.array=Q;}function V(){}var z=u.exports={},W,H;(function(){try{W='function'==typeof setTimeout?setTimeout:T;}catch(K){W=T;}try{H='function'==typeof clearTimeout?clearTimeout:R;}catch(K){H=R;}})();var Y=[],X=!1,Z,J=-1;z.nextTick=function(K){var Q=Array(arguments.length-1);if(1<arguments.length)for(var $=1;$<arguments.length;$++)Q[$-1]=arguments[$];Y.push(new G(K,Q)),1!==Y.length||X||M(N);},G.prototype.run=function(){this.fun.apply(null,this.array);},z.title='browser',z.browser=!0,z.env={},z.argv=[],z.version='',z.versions={},z.on=V,z.addListener=V,z.once=V,z.off=V,z.removeListener=V,z.removeAllListeners=V,z.emit=V,z.binding=function(){throw new Error('process.binding is not supported');},z.cwd=function(){return'/';},z.chdir=function(){throw new Error('process.chdir is not supported');},z.umask=function(){return 0;};},function(u,_,T){(function(R,M){function I(W,H){this._id=W,this._clearFn=H;}var U=T(62).nextTick,N=Function.prototype.apply,G=Array.prototype.slice,V={},z=0;_.setTimeout=function(){return new I(N.call(setTimeout,window,arguments),clearTimeout);},_.setInterval=function(){return new I(N.call(setInterval,window,arguments),clearInterval);},_.clearTimeout=_.clearInterval=function(W){W.close();},I.prototype.unref=I.prototype.ref=function(){},I.prototype.close=function(){this._clearFn.call(window,this._id);},_.enroll=function(W,H){clearTimeout(W._idleTimeoutId),W._idleTimeout=H;},_.unenroll=function(W){clearTimeout(W._idleTimeoutId),W._idleTimeout=-1;},_._unrefActive=_.active=function(W){clearTimeout(W._idleTimeoutId);var H=W._idleTimeout;0<=H&&(W._idleTimeoutId=setTimeout(function(){W._onTimeout&&W._onTimeout();},H));},_.setImmediate="function"==typeof R?R:function(W){var H=z++,Y=!(2>arguments.length)&&G.call(arguments,1);return V[H]=!0,U(function(){V[H]&&(Y?W.apply(null,Y):W.call(null),_.clearImmediate(H));}),H;},_.clearImmediate="function"==typeof M?M:function(W){delete V[W];};}).call(_,T(63).setImmediate,T(63).clearImmediate);},function(u,_,T){"use strict";'use strict';function R(H){return H&&H.__esModule?H:{default:H};}Object.defineProperty(_,"__esModule",{value:!0}),_.ColorMatrix=_.Matrix=_.Rectangle=_.Vector2=void 0;var M=T(20),I=R(M),U=T(76),N=R(U),G=T(75),V=R(G),z=T(34),W=R(z);_.Vector2=I.default,_.Rectangle=N.default,_.Matrix=V.default,_.ColorMatrix=W.default;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(7),H=R(W),Y=T(26),X=R(Y),Z=function(J){function K(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];(0,I.default)(this,K);var $=(0,N.default)(this,J.call(this));return $._onOperationUpdate=$._onOperationUpdate.bind($),$._cacheEnabled=!0,$._stack=Q,$._stack.forEach(function(ee){ee.on('update',$._onOperationUpdate);}),$;}return(0,V.default)(K,J),K.prototype.clear=function(){var $=this;this.forEach(function(ee){return $.remove(ee);}),this._stack=[];},K.prototype._onOperationUpdate=function($,ee){this.emit(z.Constants.Events.OPERATION_UPDATED,$,ee);},K.prototype.enableCache=function(){this._cacheEnabled=!0;},K.prototype.disableCache=function(){this._cacheEnabled=!1;},K.prototype.forEach=function($){return this._stack.filter(function(ee){return!!ee;}).forEach($);},K.prototype.render=function($,ee){var te=this,oe=this._stack.filter(function(ue){return!!ue;}).filter(function(ue){return ue.getEnabled();});oe.reverse();var ae=oe.filter(function(ue){return!ue.isDirtyForRenderer($.getRenderer());})[0],ne=oe.indexOf(ae);oe.reverse();var ie=0;-1!==ne&&(ie=oe.length-ne-1);for(var le=0;le<ie;le++)z.Log.info(this.constructor.name,'Skipping '+oe[le].constructor.name);for(var de=H.default.resolve(ee),se=function(_e){var fe=oe[_e];de=de.then(function(ye){return fe.render(ye).then(function(ge){return 0<_e&&!te._cacheEnabled&&oe[_e-1].disposeRenderTextures(),ge;});});},pe=ie;pe<oe.length;pe++)se(pe);return de;},K.prototype.validateSettings=function(){return H.default.all(this._stack.filter(function($){return!!$;}).map(function($){return $.validateSettings();}));},K.prototype.setAllToDirty=function(){var $=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.forEach(function(ee){return ee.setDirty(!0,$);});},K.prototype.updateDirtinessForRenderer=function($){for(var ee=!1,te=0,re;te<this._stack.length;te++)re=this._stack[te],re&&(re.isDirtyForRenderer($)&&(ee=!0),ee&&re.setDirtyForRenderer(!0,$));},K.prototype.push=function($){this._stack.push($),$.on('update',this._onOperationUpdate);},K.prototype.unshift=function($){this._stack.unshift($),$.on('update',this._onOperationUpdate);},K.prototype.clone=function(){return new K(this._stack.slice(0));},K.prototype.get=function($){return this._stack[$];},K.prototype.set=function($,ee){this._stack[$]&&(this._stack[$].off('update',this._onOperationUpdate),this._stack[$].dispose()),this._stack[$]=ee,ee.on('update',this._onOperationUpdate);},K.prototype.remove=function($){var ee=this._stack.indexOf($);-1===ee||(this._stack[ee]&&(this._stack[ee].off('update',this._onOperationUpdate),this._stack[ee].dispose()),this._stack.splice(ee,1));},K.prototype.removeAt=function($){this._stack[$]&&(this._stack[$].off('update',this._onOperationUpdate),this._stack[$].dispose()),delete this._stack[$];},K.prototype.getStack=function(){return this._stack;},K.prototype.dispose=function(){this.forEach(function($){$.dispose();});},K;}(X.default);_.default=Z;},function(u,_,T){"use strict";'use strict';function R(Z){return Z&&Z.__esModule?Z:{default:Z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(120);Object.defineProperty(_,'FilterOperation',{enumerable:!0,get:function(){return R(M).default;}});var I=T(118);Object.defineProperty(_,'CropOperation',{enumerable:!0,get:function(){return R(I).default;}});var U=T(169);Object.defineProperty(_,'OrientationOperation',{enumerable:!0,get:function(){return R(U).default;}});var N=T(116);Object.defineProperty(_,'AdjustmentsOperation',{enumerable:!0,get:function(){return R(N).default;}});var G=T(168);Object.defineProperty(_,'LinearFocusOperation',{enumerable:!0,get:function(){return R(G).default;}});var V=T(170);Object.defineProperty(_,'RadialFocusOperation',{enumerable:!0,get:function(){return R(V).default;}});var z=T(167);Object.defineProperty(_,'FrameOperation',{enumerable:!0,get:function(){return R(z).default;}});var W=T(174);Object.defineProperty(_,'SpriteOperation',{enumerable:!0,get:function(){return R(W).default;}});var H=T(181);Object.defineProperty(_,'WatermarkOperation',{enumerable:!0,get:function(){return R(H).default;}});var Y=T(119);Object.defineProperty(_,'ExifOrientationOperation',{enumerable:!0,get:function(){return R(Y).default;}});var X=T(171);Object.defineProperty(_,'SelectiveBlurOperation',{enumerable:!0,get:function(){return R(X).default;}});},function(u){u.exports={name:'photoeditorsdk',version:'3.6.5',description:'The most comprehensive photo editor SDK for HTML5',repository:'http://github.com/imgly/pesdk-html5',author:'Photo Editor SDK <contact@photoeditorsdk.com>',license:'SEE LICENSE IN LICENSE.md',scripts:{'render-filter-previews':'babel-node scripts/render-filter-previews',release:'ENV=production node_modules/.bin/gulp release','release:test':'ENV=test node_modules/.bin/gulp release','release:dev':'ENV=development node_modules/.bin/gulp release',test:'ENV=test node_modules/.bin/mocha --require test/support/node test/sdk test/ui','test:client':'ENV=test REMOTE=true gulp test:client','test:client:local':'ENV=test node --stack-size=65500 node_modules/.bin/gulp test:client','test:webgl':'node_modules/.bin/mocha test-webgl',coveralls:'npm run coverage && cat ./coverage/lcov.info | node_modules/.bin/coveralls && rm -rf ./coverage',coverage:'NODE_ENV=test node_modules/.bin/istanbul cover node_modules/.bin/_mocha --require test/support/node test/sdk test/ui'},devDependencies:{ajv:'^4.4.0','babel-core':'^6.23.1','babel-loader':'^6.3.2','babel-plugin-external-helpers-2':'^6.3.13','babel-plugin-transform-es2015-classes':'^6.6.4','babel-plugin-transform-runtime':'^6.6.0','babel-preset-es2015':'^6.6.0','babel-preset-react':'^6.5.0','babel-register':'^6.6.0','babel-runtime':'^6.6.1',babili:'^0.0.11',chai:'^3.4.0','chai-as-promised':'^5.1.0',chromedriver:'^2.23.1',classnames:'^2.1.3','compass-mixins':'^0.12.8',coveralls:'^2.11.2',del:'^2.0.0',gulp:'^3.8.10','gulp-9e-sass-lint':'0.0.8','gulp-babel':'^6.1.2','gulp-changed':'^1.3.0','gulp-jsdoc3':'^0.2.0','gulp-mocha':'^2.2.0','gulp-notify':'^1.3.1','gulp-rename':'~1.2.0','gulp-sass':'^2.0.4','gulp-sequence':'^0.4.1','gulp-sourcemaps':'^1.5.2','gulp-standard':'^8.0.2','gulp-util':'~2.2.16','gulp-watch':'^4.3.5','gulp-webserver':'^0.9.1','gulp-yuicompressor':'0.0.3',inquirer:'^0.11.4','inquirer-path':'^1.0.0-alpha5',istanbul:'^1.1.0-alpha.1','jaguarjs-jsdoc':'git://github.com/imgly/jaguarjs-jsdoc.git#master',jsdoc:'git://github.com/jsdoc3/jsdoc.git#master','json-loader':'^0.5.2',mocha:'^2.3.3','mocha-lcov-reporter':'0.0.1',nightwatch:'git://github.com/saschagehlich/nightwatch.git#feature/upload-file','performance-now':'^0.2.0','preprocess-loader':'^0.2.0','pretty-error':'^2.0.0',prompt:'^1.0.0','raw-loader':'^0.5.1',react:'^15.1.0','react-dom':'^15.1.0',rembrandt:'^0.0.8','require-dir':'^0.3.0','run-sequence':'~0.3.6','selenium-server-standalone-jar':'^2.53.1',should:'^4.3.0',sinon:'^1.17.3','sinon-chai':'^2.8.0','stats.js':'^0.16.0','term-img2':'^2.0.1','transform-loader':'^0.2.2','vinyl-source-stream':'0.1.1',webpack:'2.1.0-beta.25','webpack-notifier':'^1.2.1'},standard:{globals:['describe','context','before','beforeEach','after','afterEach','it','expect']},dependencies:{canvas:'^1.3.12',gl:'^4.0.3',request:'^2.79.0'}};},function(u,_,T){"use strict";'use strict';function R(X){return X&&X.__esModule?X:{default:X};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(43),H=R(W),Y=function(X){function Z(){(0,I.default)(this,Z);for(var J=arguments.length,K=Array(J),Q=0;Q<J;Q++)K[Q]=arguments[Q];var $=(0,N.default)(this,X.call.apply(X,[this].concat(K)));return $._children=[],$._filters=[],$;}return(0,V.default)(Z,X),Z.prototype.addFilter=function(K){this._filters.push(K);},Z.prototype.removeFilter=function(K){var Q=this._filters.indexOf(K);return-1!==Q&&(this._filters.splice(Q,1),!0);},Z.prototype.setFilters=function(K){this._filters=K;},Z.prototype.addChild=function(K){var Q=K.getParent();null!==Q&&Q.removeChild(K),K.setParent(this),this._children.push(K);},Z.prototype.prependChild=function(K){var Q=K.getParent();null!==Q&&Q.removeChild(K),K.setParent(this),this._children.unshift(K);},Z.prototype.hasChild=function(K){var Q=this._children.indexOf(K);return-1!==Q;},Z.prototype.removeChild=function(K){var Q=this._children.indexOf(K);-1===Q?z.Log.info(this.constructor.name,'Tried to remove a child that does not exist'):(this._children.splice(Q,1),K.setParent(null));},Z.prototype.clearChildren=function(){this._children=[];},Z.prototype.renderWebGL=function(K){if(this._visible){var Q=K.getFilterManager();this._filters&&this._filters.length&&Q.pushFilters(this,this._filters),K.getCurrentObjectRenderer().start(),this._renderWebGL(K),this._children.forEach(function($){$.renderWebGL(K);}),K.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&Q.popFilters(),K.getCurrentObjectRenderer().start();}},Z.prototype._renderWebGL=function(){},Z.prototype.renderCanvas=function(K){if(this._visible){var Q=K.getFilterManager();this._filters&&this._filters.length&&Q.pushFilters(this,this._filters),this._renderCanvas(K),this._children.forEach(function($){$.renderCanvas(K);}),this._filters&&this._filters.length&&Q.popFilters();}},Z.prototype._renderCanvas=function(){},Z.prototype.updateTransform=function(){X.prototype.updateTransform.call(this),this._children.forEach(function(K){K.updateTransform();});},Z.prototype.getLocalBounds=function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone();},Z.prototype.getBounds=function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone();},Z.prototype.getChildren=function(){return this._children;},Z.prototype.getFilters=function(){return this._filters;},Z.prototype.dispose=function(){},Z;}(H.default);_.default=Y;},function(u,_,T){"use strict";'use strict';function R(X){return X&&X.__esModule?X:{default:X};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(109),H=R(W),Y=function(X){function Z(J,K){var Q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};(0,I.default)(this,Z);var $=(0,N.default)(this,X.call(this));return $._options=H.default.defaults(Q,{pixelRatio:1,transparent:!1,clearColor:z.Color.BLACK,debug:!1}),$.setMaxListeners(0),$._width=J||800,$._height=K||600,$._dimensions=new z.Vector2($._width,$._height),$._maxTextureSize=null,$._pixelRatio=$._options.pixelRatio,$._clearColor=$._options.transparent?z.Color.TRANSPARENT:$._options.clearColor||z.Color.BLACK,$;}return(0,V.default)(Z,X),Z.prototype.setCanvas=function(K){var Q=this._canvas;this._canvas=K,Q!==K&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new z.Vector2(this._width,this._height));},Z.prototype.getCanvas=function(){return this._canvas;},Z.prototype._onBeforeContext=function(){},Z.prototype.resizeTo=function(K){var Q=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this._width=K.x*this._pixelRatio,this._height=K.y*this._pixelRatio,Q&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+'px',this._canvas.style.height=this._height/this._pixelRatio+'px')),this._dimensions=K.clone();},Z.prototype._createContext=function(){z.Log.warn(this.constructor.name,'`_createContext` is abstract and not implemented in inherited class');},Z.prototype._setupContext=function(){z.Log.warn(this.constructor.name,'`_setupContext` is abstract and not implemented in inherited class');},Z.prototype.render=function(){z.Log.warn(this.constructor.name,'`render` is abstract and not implemented in inherited class');},Z.prototype.getMaxDimensions=function(){return null;},Z.prototype.getContext=function(){return this._context;},Z.prototype.getWidth=function(){return this._dimensions.x;},Z.prototype.getHeight=function(){return this._dimensions.y;},Z.prototype.getDimensions=function(){return this._dimensions;},Z.prototype.getPixelRatio=function(){return this._pixelRatio;},Z.prototype.setPixelRatio=function(K){this._pixelRatio=K,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(K);},Z.prototype.getMaxTextureSize=function(){return this._maxTextureSize;},Z.prototype.getFilterManager=function(){return this._filterManager;},Z.prototype.setFilterManager=function(K){this._filterManager=K;},Z.isSupported=function(){return!0;},Z.prototype.isOfType=function(K){return this._type===K;},Z.prototype.dispose=function(){z.Log.warn(this.constructor.name,'`dispose` is abstract and not implemented in inherited class');},Z;}(z.EventEmitter);_.default=Y;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(N){return N&&N.__esModule?N:{default:N};}(M),U=function(){function N(G){(0,I.default)(this,N),this._renderer=G,this._onContextChange=this._onContextChange.bind(this),this._renderer.on('context',this._onContextChange);}return N.prototype._onContextChange=function(){},N.prototype.start=function(){},N.prototype.stop=function(){this.flush();},N.prototype.flush=function(){},N.prototype.dispose=function(){this._renderer.off('context',this._onContextChange),this._renderer=null;},N;}();_.default=U;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(31),H=R(W),Y=T(108),X=R(Y),Z=function(J){function K(Q,$){(0,I.default)(this,K);var ee=(0,N.default)(this,J.call(this));if(!(Q instanceof H.default))throw new Error('`baseTexture` should be an instance of BaseTexture');if(ee._baseTexture=Q,ee._uvs=new X.default(),ee._frame=$?$.clone():null,ee._frameLocked=!!$,ee._onBaseTextureLoaded=ee._onBaseTextureLoaded.bind(ee),ee._onBaseTextureUpdated=ee._onBaseTextureUpdated.bind(ee),ee._frame||(ee._frame=new z.Rectangle(0,0,1,1)),!ee._baseTexture.isLoaded())ee._baseTexture.once('loaded',ee._onBaseTextureLoaded);else{var te=Q.getFrame(),re=te.width,oe=te.height;ee._frameLocked||(ee._frame=new z.Rectangle(0,0,re,oe)),ee._onBaseTextureLoaded();}return ee;}return(0,V.default)(K,J),K.fromImage=function($){var ee=new H.default($);return new K(ee);},K.fromCanvas=function($){var ee=new H.default($);return new K(ee);},K.prototype._onBaseTextureLoaded=function(){if(!this._frameLocked){var $=this._baseTexture.getFrame().clone();this.setFrame($);}this._baseTexture.on('update',this._onBaseTextureUpdated);},K.prototype._onBaseTextureUpdated=function(){var $=this._baseTexture.getFrame(),ee=$.width,te=$.height;this._frame.width=ee,this._frame.height=te,this.emit('update');},K.prototype._updateUVs=function(){this._uvs.update(this._frame,this._baseTexture.getFrame());},K.prototype.getBaseTexture=function(){return this._baseTexture;},K.prototype.setBaseTexture=function($){this._baseTexture=$;},K.prototype.getFrame=function(){return this._frame;},K.prototype.setFrame=function($){this._frame=$,this._updateUVs();},K.prototype.getWidth=function(){return this._frame.width;},K.prototype.getHeight=function(){return this._frame.height;},K.prototype.getUVs=function(){return this._uvs;},K.prototype.getDimensions=function(){return new z.Vector2(this._frame.width,this._frame.height);},K;}(z.EventEmitter);_.default=Z;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(V){return V&&V.__esModule?V:{default:V};}(M),U=T(6),N='undefined'!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):T(94),G=function(){function V(z){var W=this;(0,I.default)(this,V),this._context=z,this._tracking=!1;var H=this,Y=function(J){var K=z[J];'function'==typeof K?W[J]=function(){for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=z[J];if(!H._tracking)return te.apply(z,$);var re=N(),oe=te.apply(z,$),ae=N()-re;return H._trackedCalls.push({functionName:J,arguments:$,duration:ae}),oe;}:W._makePropertyWrapper(J);};for(var X in z)Y(X);}return V.prototype._makePropertyWrapper=function(W){if(-1===['_context','_trackedCalls','_tracking'].indexOf(W)){var Y=this._context;this.__defineGetter__(W,function(){return Y[W];}),this.__defineSetter__(W,function(X){Y[W]=X;});}},V.prototype.startFrame=function(){this._tracking=!0,this._trackedCalls=[];},V.prototype.endFrame=function(){var W='Rendering';U.Log.log(W,'Frame rendering results:'),U.Log.log(W,'Context calls: '+this._trackedCalls.length);var H={};this._trackedCalls.forEach(function(J){var K=J.functionName,Q=J.duration;H[K]=H[K]||{totalDuration:0,calls:0},H[K].totalDuration+=Q,H[K].calls++;});var Y=[];for(var X in H){var Z=H[X];Z.averageDuration=Z.totalDuration/Z.calls,Y.push({functionName:X,data:Z});}Y.sort(function(J,K){return K.data.totalDuration-J.data.totalDuration;}),Y=Y.slice(0,3),Y.forEach(function(J){U.Log.log(W,J.functionName+': '+J.data.calls+' calls, '+J.data.totalDuration.toFixed(2)+'ms');});},V;}();_.default=G;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(N){return N&&N.__esModule?N:{default:N};}(M),U=function(){function N(G,V,z){(0,I.default)(this,N),this.width=G,this.height=V,this.data=z;}return N.fromNodeCanvasImage=function(V){var z=new Canvas(V.width,V.height),W=z.getContext('2d');W.drawImage(V,0,0);var H=W.getImageData(0,0,V.width,V.height);return new N(V.width,V.height,H.data);},N;}();_.default=U;},function(u,_,T){"use strict";'use strict';function R(G){return G&&G.__esModule?G:{default:G};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(83),I=R(M),U=T(27),N=R(U);_.default={checkFramebufferStatus:function(V,z){var W,H=z.checkFramebufferStatus(z.FRAMEBUFFER),Y=(W={},(0,I.default)(W,z.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,'Incomplete attachment'),(0,I.default)(W,z.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,'Missing attachment'),(0,I.default)(W,z.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,'Incomplete dimensions'),(0,I.default)(W,z.FRAMEBUFFER_UNSUPPORTED,'Framebuffer unsupported'),W);H!==z.FRAMEBUFFER_COMPLETE&&N.default.warn(V,'Framebuffer incomplete: '+Y[H]);}};},function(u,_,T){"use strict";'use strict';function R(W){return W&&W.__esModule?W:{default:W};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(37),N=R(U),G=T(20),V=R(G),z=function(){function W(){(0,I.default)(this,W),this.reset();}return W.prototype.multiply=function(Y){var X,Z,J,K,Q,$;return X=this.a*Y.a+this.b*Y.c,Z=this.a*Y.b+this.b*Y.d,J=this.c*Y.a+this.d*Y.c,K=this.c*Y.b+this.d*Y.d,Q=this.tx*Y.a+this.ty*Y.c+Y.tx,$=this.tx*Y.b+this.ty*Y.d+Y.ty,this.a=X,this.b=Z,this.c=J,this.d=K,this.tx=Q,this.ty=$,this;},W.prototype.applyToVector=function(Y){var X=Y,Z=X.x,J=X.y;return Y=Y.clone(),Y.x=this.a*Z+this.c*J+this.tx,Y.y=this.b*Z+this.d*J+this.tx,Y;},W.prototype.applyInverseToVector=function(Y){var X=1/(this.a*this.d+this.c*-this.b),Z=Y,J=Z.x,K=Z.y;return Y=Y.clone(),Y.x=this.d*X*J+-this.c*X*K+(this.ty*this.c-this.tx*this.d)*X,Y.y=this.a*X*K+-this.b*X*J+(-this.ty*this.a+this.tx*this.b)*X,Y;},W.prototype.rectangleToCoordinates=function(Y){var X=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new V.default(0,0),Z=Y.width*(1-X.x),J=Y.width*-X.x,K=Y.height*(1-X.y),Q=Y.height*-X.y,$=[];return $.push(new V.default(this.a*J+this.c*Q+this.tx,this.d*Q+this.b*J+this.ty)),$.push(new V.default(this.a*Z+this.c*Q+this.tx,this.d*Q+this.b*Z+this.ty)),$.push(new V.default(this.a*Z+this.c*K+this.tx,this.d*K+this.b*Z+this.ty)),$.push(new V.default(this.a*J+this.c*K+this.tx,this.d*K+this.b*J+this.ty)),$;},W.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0;},W.prototype.toArray=function(){var Y=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return'undefined'==typeof Float32Array?Y:new Float32Array(Y);},W.prototype.toString=function(){return'Matrix({ a: '+this.a+', b: '+this.b+', c: '+this.c+', d: '+this.d+', tx: '+this.tx+', ty: '+this.ty+' })';},(0,N.default)(W,null,[{key:'IDENTITY',get:function(){return new W();}}]),W;}();_.default=z;},function(u,_,T){"use strict";"use strict";Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(N){return N&&N.__esModule?N:{default:N};}(M),U=function(){function N(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,V=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,z=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,W=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(0,I.default)(this,N),this.x=G,this.y=V,this.width=z,this.height=W;}return N.prototype.set=function(V,z,W,H){return this.x=V,this.y=z,this.width=W,this.height=H,this;},N.prototype.clone=function(){return new N(this.x,this.y,this.width,this.height);},N.prototype.copy=function(V){return this.x=V.x,this.y=V.y,this.width=V.width,this.height=V.height,this;},N.prototype.equals=function(V,z,W,H){if(V instanceof N)return V.x===this.x&&V.y===this.y&&V.width===this.width&&V.height===this.height;return V===this.x&&z===this.y&&W===this.width&&H===this.height;},N.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this;},N.prototype.toString=function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })";},N;}();_.default=U;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(V){return V&&V.__esModule?V:{default:V};}(M),U=T(3),N='undefined'!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):T(94),G=function(){function V(z,W){(0,I.default)(this,V),this._tag=z,this._name=W,this._start=N();}return V.prototype.stop=function(){var W=N(),H=W-this._start,Y=Math.round(1e3/H);U.Log.info(this._tag,this._name+' took '+H.toFixed(2)+'ms ('+Y+' FPS)');},V;}();_.default=G;},function(u,_,T){"use strict";'use strict';function R(X){return X&&X.__esModule?X:{default:X};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=z.Constants.UniformType,H=z.Constants.OptionType,Y=function(X){function Z(){(0,I.default)(this,Z);var J=(0,N.default)(this,X.call(this));return J._fragmentSource=T(227),J;}return(0,V.default)(Z,X),Z.prototype._applyCanvas=function(K,Q,$){var ee=3<arguments.length&&void 0!==arguments[3]&&arguments[3],te=Q.getCanvas(),re=Q.getContext(),oe=$.getContext(),ae=re.getImageData(0,0,te.width,te.height),ne=this._options,ie=ne.brightness,le=ne.saturation,de=ne.contrast,se=ne.gamma,pe=ne.exposure,ue=ne.shadows,_e=ne.highlights,fe=0!==ie,ce=0!==pe,he=0!==ue||1!==_e,xe=Math.pow(2,pe);ie*=255;for(var Te=0;Te<te.width*te.height;Te++){var ve=4*Te,be=ae.data[ve],Ce=ae.data[ve+1],Re=ae.data[ve+2];if(1!==se&&(be=255*Math.pow(be/255,1/se),Ce=255*Math.pow(Ce/255,1/se),Re=255*Math.pow(Re/255,1/se)),(ce||he)&&(be/=255.0,Ce/=255.0,Re/=255.0),ce&&(be*=xe,Ce*=xe,Re*=xe),he){var Ee=0.2125*be+0.7154*Ce+0.0721*Re,Oe=Math.pow(Ee,1/(ue+1))+-0.76*Math.pow(Ee,2/(ue+1))-Ee;Oe=Math.max(Oe,0),Oe=Math.min(Oe,1);var Fe=1-(Math.pow(1-Ee,1/(2-_e))+-0.8*Math.pow(1-Ee,2/(2-_e)))-Ee;Fe=Math.max(Fe,-1),Fe=Math.min(Fe,0);var ke=Ee+Oe+Fe;be=ke*be/Ee,Ce=ke*Ce/Ee,Re=ke*Re/Ee;}if((ce||he)&&(be*=255.0,Ce*=255.0,Re*=255.0),fe&&(be+=ie,Ce+=ie,Re+=ie),1!==le){var Se=0.2125*be+0.7154*Ce+0.0721*Re;be=Se*(1-le)+be*le,Ce=Se*(1-le)+Ce*le,Re=Se*(1-le)+Re*le;}1!==de&&(be=(be-127)*de+127,Ce=(Ce-127)*de+127,Re=(Re-127)*de+127),ae.data[ve]=be,ae.data[ve+1]=Ce,ae.data[ve+2]=Re;}oe.putImageData(ae,0,0);},Z;}(z.Engine.Filter);Y.prototype.availableOptions={brightness:{type:H.NUMBER,default:0,uniformType:W.FLOAT},saturation:{type:H.NUMBER,default:1,uniformType:W.FLOAT},contrast:{type:H.NUMBER,default:1,uniformType:W.FLOAT},gamma:{type:H.NUMBER,default:1,uniformType:W.FLOAT},exposure:{type:H.NUMBER,default:0,uniformType:W.FLOAT},shadows:{type:H.NUMBER,default:0,uniformType:W.FLOAT},highlights:{type:H.NUMBER,default:1,uniformType:W.FLOAT}},_.default=Y;},function(u,_,T){"use strict";'use strict';function R(X){return X&&X.__esModule?X:{default:X};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(4),H=R(W),Y=function(X){function Z(){return(0,I.default)(this,Z),(0,N.default)(this,X.apply(this,arguments));}return(0,V.default)(Z,X),Z.prototype.render=function(){return z.Promise.resolve();},Z;}(H.default);Y.isIdentity=!0,Y.displayName='Original',Y.identifier='identity',_.default=Y;},function(u,_,T){"use strict";'use strict';function R(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(12),W=R(z),H=T(8),Y=R(H),X=T(9),Z=3,J=function(Q){function $(){(0,I.default)(this,$);var ee=(0,N.default)(this,Q.call(this));return ee._fragmentSource=T(241),ee;}return(0,V.default)($,Q),$.prototype._applyCanvas=function(te,re,oe){for(var ae=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ne=re.getCanvas(),ie=re.getContext(),le=oe.getContext(),de=ie.getImageData(0,0,ne.width,ne.height),se=this._options.lookupTableData,pe=0;pe<ne.width*ne.height;pe++){var ue=4*pe,_e=de.data[ue];de.data[ue]=se[4*_e];var fe=de.data[ue+1];de.data[ue+1]=se[1+4*fe];var ye=de.data[ue+2];de.data[ue+2]=se[2+4*ye];}le.putImageData(de,0,0);},$;}(W.default.Filter);J.prototype.availableOptions={lookupTable:{type:X.OptionType.NUMBER,default:Z,uniformType:X.UniformType.INT},lookupTableData:{type:X.OptionType.ARRAY,default:[]}};var K=function(Q){function $(){(0,I.default)(this,$);for(var ee=arguments.length,te=Array(ee),re=0;re<ee;re++)te[re]=arguments[re];var oe=(0,N.default)(this,Q.call.apply(Q,[this].concat(te)));return oe._filter=new J(),oe._textures={},oe._renderers={},oe;}return(0,V.default)($,Q),$.prototype.update=function(te){var re=te.getRenderer();re.isOfType(X.RendererType.WEBGL)?this._updateWebGLTexture(te):re.isOfType(X.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data);},$.prototype._updateWebGLTexture=function(te){if('undefined'==typeof this._options.data)throw new Error('LookupTable: No data specified.');var re=new Uint8Array(this._options.data),oe=te.getRenderer(),ae=oe.id;this._renderers[ae]=oe,this._textures[ae]||(this._textures[ae]=new W.default.BaseTexture());var ne=this._textures[ae],ie=new W.default.PixelArrayImage(256,1,re);ne.setSource(ie),ne.setGLUnit(Z),oe.isOfType(X.RendererType.WEBGL)&&oe.updateTexture(ne);},$.prototype.dispose=function(){for(var te in Q.prototype.dispose.call(this),this._textures)this._textures[te].dispose(),delete this._textures[te];delete this._options.data;},$;}(Y.default);_.default=K;},function(u,_,T){"use strict";'use strict';function R(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(176),H=R(W),Y=T(35),X=R(Y),Z=z.Constants.OptionType,J=z.Constants.RendererType,K=function(Q){function $(){(0,I.default)(this,$);for(var ee=arguments.length,te=Array(ee),re=0;re<ee;re++)te[re]=arguments[re];var oe=(0,N.default)(this,Q.call.apply(Q,[this].concat(te)));return oe._persistedPaths=[],oe._outputCanvasDirty=!0,oe._outputCanvas=z.Utils.createCanvas(),oe._outputContext=oe._outputCanvas.getContext('2d'),oe._persistCanvas=z.Utils.createCanvas(),oe._persistContext=oe._persistCanvas.getContext('2d'),oe._nextCanvas=z.Utils.createCanvas(),oe._texture=z.Engine.Texture.fromCanvas(oe._outputCanvas),oe._sprite.setTexture(oe._texture),oe._onPathUpdate=oe._onPathUpdate.bind(oe),oe;}return(0,V.default)($,Q),$.prototype.applyFlip=function(te){this._options.paths.forEach(function(re){re.forEachControlPoint(function(oe){var ae=oe.getPosition().clone();'horizontal'===te?ae.x=1-ae.x:'vertical'===te?ae.y=1-ae.y:void 0,oe.setPosition(ae);}),re.setDirty(!0);}),this._reset();},$.prototype.applyRotation=function(te){this._options.paths.forEach(function(re){re.forEachControlPoint(function(oe){var ae=oe.getPosition().clone();90===te?(ae.flip(),ae.x=1-ae.x):-90===te&&(ae.flip(),ae.y=1-ae.y),oe.setPosition(ae);}),re.setDirty(!0);}),this._reset();},$.prototype.applyCrop=function(te,re){this._reset();var oe=te.getInputDimensions(),ae=re.rotation-te.getRotation(),ne=te.getEnd().clone().subtract(te.getStart()).multiply(oe),ie=re.end.clone().subtract(re.start).multiply(oe),le=te.getStart().clone().subtract(re.start).multiply(oe),de=re.scale/te.getScale(),se=te.getStart().clone().multiply(oe);this._options.paths.forEach(function(pe){pe.forEachControlPoint(function(_e){var fe=_e.getPosition().clone().multiply(ne).add(se),ye=fe.clone().subtract(oe.clone().multiply(0.5)),ge=Math.cos(ae),ce=Math.sin(ae),me=new z.Vector2(ye.x*ge-ye.y*ce,ye.x*ce+ye.y*ge);me.multiply(de);var he=oe.clone().multiply(0.5).add(me).subtract(se).add(le).divide(ie);_e.setPosition(he);});var ue=pe.getThickness()*ne.min()/ie.min();pe.setThickness(ue*de),pe.setDirty(!0);}),this._reset();},$.prototype.clearCanvas=function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var te=this._outputCanvas,re=te.width,oe=te.height;this._outputContext.clearRect(0,0,re,oe);}},$.prototype.clearPersistCanvas=function(){if(this._persistCanvas){var te=this._persistCanvas,re=te.width,oe=te.height;this._persistContext.clearRect(0,0,re,oe);}},$.prototype.serializeOptions=function(te){var re=1<arguments.length&&void 0!==arguments[1]&&arguments[1],oe=Q.prototype.serializeOptions.call(this,te,re);return te||(oe.type='brush'),oe;},$.prototype.createPath=function(te,re,oe){var ae=new H.default(this._operation,{thickness:te,hardness:re,color:oe},this._nextCanvas);return ae.on('update',this._onPathUpdate),this._options.paths.push(ae),this.setDirty(!0),ae;},$.prototype._onPathUpdate=function(){this._operation.setDirty(!0),this.setDirty(!0);},$.prototype._onPathPersist=function(te){te.renderToCanvas(this._persistCanvas),this._nextCanvas=te.getCanvas();var re=this._nextCanvas.getContext('2d');re.clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(te);},$.prototype._getTexture=function(){return this._texture;},$.prototype.setDirtyForRenderer=function(te,re){var oe=2<arguments.length&&void 0!==arguments[2]&&arguments[2];Q.prototype.setDirtyForRenderer.call(this,te,re,oe),te&&oe&&(this._persistedPaths=[],this._options.paths.forEach(function(ae){ae.setDirty(!0);}));},$.prototype.setDirty=function(te){var re=1<arguments.length&&void 0!==arguments[1]&&arguments[1];for(var oe in this._dirtiness)this.setDirtyForRenderer(te,this._renderers[oe],re);},$.prototype.render=function(te){var re=this,oe=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(oe)&&(z.Utils.ensureCanvasDimensions(this._outputCanvas,te),z.Utils.ensureCanvasDimensions(this._persistCanvas,te),this._options.paths.forEach(function(ae){ae.render(te),ae.getClosed()&&-1===re._persistedPaths.indexOf(ae)&&re._onPathPersist(ae);}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(ae){ae.getClosed()||ae.renderToCanvas(re._outputCanvas);}),this.setDirtyForRenderer(!1,oe));},$.prototype.update=function(te,re){re&&(z.Utils.ensureCanvasDimensions(this._outputCanvas,re),z.Utils.ensureCanvasDimensions(this._persistCanvas,re),this._texture.getBaseTexture().update()),this.render(re);var oe=te.getRenderer();return oe.isOfType(J.WEBGL)&&oe.updateTexture(this._texture.getBaseTexture()),Q.prototype.update.call(this,te,re);},$.prototype._reset=function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas();},$.prototype.getCanvas=function(){return this._outputCanvas;},$.prototype.dispose=function(){Q.prototype.dispose.call(this),this._texture.getBaseTexture().dispose();},$;}(X.default);K.prototype.availableOptions={id:{type:Z.STRING,default:function(){return z.Utils.getUUID();}},position:{type:Z.VECTOR2,default:new z.Vector2(0,0)},scale:{type:Z.VECTOR2,default:new z.Vector2(1,1)},anchor:{type:Z.VECTOR2,default:new z.Vector2(0,0)},pivot:{type:Z.VECTOR2,default:new z.Vector2(0,0)},rotation:{type:Z.NUMBER,default:0},paths:{type:Z.ARRAY,default:[],setter:function($){return $.forEach(function(ee){ee.setDirty(!0);}),this._reset(),$;}}},_.default=K;},function(u,_,T){u.exports={"default":T(188),__esModule:!0};},function(u,_,T){"use strict";"use strict";_.__esModule=!0;var M=T(82),I=function(U){return U&&U.__esModule?U:{default:U};}(M);_.default=function(U,N,G){return N in U?(0,I.default)(U,N,{value:G,enumerable:!0,configurable:!0,writable:!0}):U[N]=G,U;};},function(u){var T={}.toString;u.exports=function(R){return T.call(R).slice(8,-1);};},function(u,_,T){var R=T(192);u.exports=function(M,I,U){return(R(M),void 0===I)?M:1===U?function(N){return M.call(I,N);}:2===U?function(N,G){return M.call(I,N,G);}:3===U?function(N,G,V){return M.call(I,N,G,V);}:function(){return M.apply(I,arguments);};};},function(u,_,T){var R=T(30),M=T(13).document,I=R(M)&&R(M.createElement);u.exports=function(U){return I?M.createElement(U):{};};},function(u,_,T){u.exports=!T(15)&&!T(38)(function(){return 7!=Object.defineProperty(T(86)('div'),'a',{get:function(){return 7;}}).a;});},function(u,_,T){"use strict";'use strict';var R=T(52),M=T(29),I=T(93),U=T(23),N=T(16),G=T(51),V=T(199),z=T(55),W=T(205),H=T(24)('iterator'),Y=!([].keys&&'next'in[].keys()),Z='keys',J='values',K=function(){return this;};u.exports=function(Q,$,ee,te,re,oe,ae){V(ee,$,te);var ne=function(me){return!Y&&me in se?se[me]:me===Z?function(){return new ee(this,me);}:me===J?function(){return new ee(this,me);}:function(){return new ee(this,me);};},ie=$+' Iterator',le=re==J,de=!1,se=Q.prototype,pe=se[H]||se['@@iterator']||re&&se[re],ue=pe||ne(re),_e=re?le?ne('entries'):ue:void 0,fe='Array'==$?se.entries||pe:pe,ye,ge,ce;if(fe&&(ce=W(fe.call(new Q())),ce!==Object.prototype&&(z(ce,ie,!0),!R&&!N(ce,H)&&U(ce,H,K))),le&&pe&&pe.name!==J&&(de=!0,ue=function(){return pe.call(this);}),(!R||ae)&&(Y||de||!se[H])&&U(se,H,ue),G[$]=ue,G[ie]=K,re)if(ye={values:le?ue:ne(J),keys:oe?ue:ne(Z),entries:_e},ae)for(ge in ye)ge in se||I(se,ge,ye[ge]);else M(M.P+M.F*(Y||de),$,ye);return ye;};},function(u,_,T){var R=T(54),M=T(40),I=T(18),U=T(59),N=T(16),G=T(87),V=Object.getOwnPropertyDescriptor;_.f=T(15)?V:function(W,H){if(W=I(W),H=U(H,!0),G)try{return V(W,H);}catch(Y){}return N(W,H)?M(!R.f.call(W,H),W[H]):void 0;};},function(u,_,T){var R=T(92),M=T(50).concat('length','prototype');_.f=Object.getOwnPropertyNames||function(U){return R(U,M);};},function(u,_){_.f=Object.getOwnPropertySymbols;},function(u,_,T){var R=T(16),M=T(18),I=T(194)(!1),U=T(56)('IE_PROTO');u.exports=function(N,G){var V=M(N),z=0,W=[],H;for(H in V)H!=U&&R(V,H)&&W.push(H);for(;G.length>z;)R(V,H=G[z++])&&(~I(W,H)||W.push(H));return W;};},function(u,_,T){u.exports=T(23);},function(u,_,T){(function(R){(function(){var M,I,U;"undefined"!=typeof performance&&null!==performance&&performance.now?u.exports=function(){return performance.now();}:"undefined"!=typeof R&&null!==R&&R.hrtime?(u.exports=function(){return(M()-U)/1e6;},I=R.hrtime,M=function(){var N;return N=I(),1e9*N[0]+N[1];},U=M()):Date.now?(u.exports=function(){return Date.now()-U;},U=Date.now()):(u.exports=function(){return new Date().getTime()-U;},U=new Date().getTime());}).call(this);}).call(_,T(62));},function(u){var T=function(){return this;}();try{T=T||Function("return this")()||(1,eval)("this");}catch(R){"object"==typeof window&&(T=window);}u.exports=T;},function(u,_,T){"use strict";'use strict';function R(ge){return ge&&ge.__esModule?ge:{default:ge};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(79);Object.defineProperty(_,'IdentityFilter',{enumerable:!0,get:function(){return R(M).default;}});var I=T(121);Object.defineProperty(_,'A15Filter',{enumerable:!0,get:function(){return R(I).default;}});var U=T(122);Object.defineProperty(_,'BreezeFilter',{enumerable:!0,get:function(){return R(U).default;}});var N=T(123);Object.defineProperty(_,'BWFilter',{enumerable:!0,get:function(){return R(N).default;}});var G=T(124);Object.defineProperty(_,'BWHardFilter',{enumerable:!0,get:function(){return R(G).default;}});var V=T(125);Object.defineProperty(_,'CelsiusFilter',{enumerable:!0,get:function(){return R(V).default;}});var z=T(126);Object.defineProperty(_,'ChestFilter',{enumerable:!0,get:function(){return R(z).default;}});var W=T(127);Object.defineProperty(_,'FixieFilter',{enumerable:!0,get:function(){return R(W).default;}});var H=T(128);Object.defineProperty(_,'FoodFilter',{enumerable:!0,get:function(){return R(H).default;}});var Y=T(129);Object.defineProperty(_,'FridgeFilter',{enumerable:!0,get:function(){return R(Y).default;}});var X=T(130);Object.defineProperty(_,'FrontFilter',{enumerable:!0,get:function(){return R(X).default;}});var Z=T(131);Object.defineProperty(_,'GlamFilter',{enumerable:!0,get:function(){return R(Z).default;}});var J=T(132);Object.defineProperty(_,'GobblinFilter',{enumerable:!0,get:function(){return R(J).default;}});var K=T(133);Object.defineProperty(_,'K1Filter',{enumerable:!0,get:function(){return R(K).default;}});var Q=T(134);Object.defineProperty(_,'K2Filter',{enumerable:!0,get:function(){return R(Q).default;}});var $=T(135);Object.defineProperty(_,'K6Filter',{enumerable:!0,get:function(){return R($).default;}});var ee=T(136);Object.defineProperty(_,'KDynamicFilter',{enumerable:!0,get:function(){return R(ee).default;}});var te=T(137);Object.defineProperty(_,'LeninFilter',{enumerable:!0,get:function(){return R(te).default;}});var re=T(138);Object.defineProperty(_,'LomoFilter',{enumerable:!0,get:function(){return R(re).default;}});var oe=T(140);Object.defineProperty(_,'MellowFilter',{enumerable:!0,get:function(){return R(oe).default;}});var ae=T(141);Object.defineProperty(_,'MetalFilter',{enumerable:!0,get:function(){return R(ae).default;}});var ne=T(142);Object.defineProperty(_,'MorningFilter',{enumerable:!0,get:function(){return R(ne).default;}});var ie=T(143);Object.defineProperty(_,'OrchidFilter',{enumerable:!0,get:function(){return R(ie).default;}});var le=T(144);Object.defineProperty(_,'PolaFilter',{enumerable:!0,get:function(){return R(le).default;}});var de=T(145);Object.defineProperty(_,'Pola669Filter',{enumerable:!0,get:function(){return R(de).default;}});var se=T(160);Object.defineProperty(_,'QuoziFilter',{enumerable:!0,get:function(){return R(se).default;}});var pe=T(161);Object.defineProperty(_,'SemiredFilter',{enumerable:!0,get:function(){return R(pe).default;}});var ue=T(162);Object.defineProperty(_,'SunnyFilter',{enumerable:!0,get:function(){return R(ue).default;}});var _e=T(163);Object.defineProperty(_,'TexasFilter',{enumerable:!0,get:function(){return R(_e).default;}});var fe=T(164);Object.defineProperty(_,'X400Filter',{enumerable:!0,get:function(){return R(fe).default;}});var ye=T(139);Object.defineProperty(_,'LUTFilter',{enumerable:!0,get:function(){return R(ye).default;}});},function(u,_,T){"use strict";'use strict';function R(xe){if(xe&&xe.__esModule)return xe;var Te={};if(null!=xe)for(var ve in xe)Object.prototype.hasOwnProperty.call(xe,ve)&&(Te[ve]=xe[ve]);return Te.default=xe,Te;}function M(xe){return xe&&xe.__esModule?xe:{default:xe};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(3),H=R(W),Y=T(66),X=R(Y),Z=T(65),J=M(Z),K=T(115),Q=M(K),$=T(42),ee=M($),te=T(111),re=M(te),oe=T(77),ae=M(oe),ne=H.Rectangle,ie=H.Constants,le=H.Engine,de=H.Utils,se=H.EventEmitter,pe=H.Vector2,ue=H.Log,_e=H.Base64,fe=function(Te){return de.byteArrayToString(_e.decode(Te));},ye=ie.RenderType,ge=ie.ImageFormat,ce=ie.Events,me=ie.RendererType,he=function(xe){function Te(ve){var be=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,U.default)(this,Te);var Ce=(0,G.default)(this,xe.call(this));Ce._onOperationUpdate=Ce._onOperationUpdate.bind(Ce),Ce._onContextRestored=Ce._onContextRestored.bind(Ce);var Re=T(67),Ee=Re.version;if(Ce.version=Ee,Ce[fe('VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=')]=!0,Ce._preferredRenderer=ve,Ce._options=de.defaults(be,{extensions:{},renderMode:'dynamic',versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,logLevel:'warn',pixelRatio:'undefined'!=typeof window&&window.devicePixelRatio||1}),Ce._options.smoothUpscaling&&(le.BaseTexture.DefaultMagFilter=le.BaseTexture.LinearFilter),Ce._options.extensions=de.defaults(Ce._options.extensions,{operations:[],controls:[],languages:[]}),ue.setLevel(Ce._options.logLevel),!Ce._v())return(0,G.default)(Ce);Ce._defaultRenderMode=Ce._options.renderMode,Ce._renderMode=Ce._options.renderMode,Ce._textureQuality=Ce._options.textureQuality,Ce._offset=new pe(),Ce._zoom=Ce._options.zoom,Ce._spriteScale=Ce._options.spriteScale,Ce._rotation=Ce._options.rotation,Ce._operations={},Ce._operationsStack=null,Ce.setOperationsStack(new J.default()),Ce._container=new le.Container(),Ce._sprite=new le.Sprite(),Ce._container.addChild(Ce._sprite),Ce.setSmoothDownscaling(Ce._options.smoothDownscaling),Ce._inputBaseTexture=null,Ce._inputTexture=null,Ce._currentInputTexture=null,Ce._currentTexture=null,Ce._resizedTexture=null,Ce._resizedContainer=new le.Container(),Ce._resizedSprite=new le.Sprite(),Ce._resizedContainer.addChild(Ce._resizedSprite),Ce._checkForUpdates(),Ce._registerOperations(),Ce._initRenderer();var Oe=Ce._renderer.constructor.type;return Ce._options.displayWelcomeMessage&&ue.log('Yo!','Version: '+Ce.version+' ('+Oe+') - https://www.photoeditorsdk.com'),Ce._options.image&&Ce.setImage(Ce._options.image),Ce;}return(0,z.default)(Te,xe),Te.prototype._v=function(){var be=this;if(!this[fe('X29wdGlvbnM=')][fe('YXBpS2V5')])return ue.error(fe('YXBpS2V5'),fe('Tm8gYGFwaUtleWAgb3B0aW9uIGdpdmVuLg==')),ue.error(fe('YXBpS2V5'),fe('SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhbiBBUEkga2V5IHlldCwgcGxlYXNlIGNvbnRhY3Qgb3VyIHNhbGVzIHN0YWZmIGF0IHNhbGVzQHBob3RvZWRpdG9yc2RrLmNvbSB0byBvYnRhaW4gYSBsaWNlbnNlIG9yIGxvZyBpbiB0byB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZC4=')),!1;var Ce=H[fe('TGljZW5zaW5n')];return this._lic=new Ce(this[fe('X29wdGlvbnM=')][fe('YXBpS2V5')]),this._lic.c().catch(function(){be[fe('VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=')]=!1,ue.error(fe('TGljZW5zaW5n'),fe('SW52YWxpZCBsaWNlbnNlIGtleQ==')),ue.error(fe('TGljZW5zaW5n'),fe('SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhbiBBUEkga2V5IHlldCwgcGxlYXNlIGNvbnRhY3Qgb3VyIHNhbGVzIHN0YWZmIGF0IHNhbGVzQHBob3RvZWRpdG9yc2RrLmNvbSB0byBvYnRhaW4gYSBsaWNlbnNlIG9yIGxvZyBpbiB0byB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZC4='));}),!0;},Te.prototype._cv=function(){var be=this;return new Promise(function(Ce,Re){return be[fe('VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=')]?void Ce():Re(new Error(fe('SW52YWxpZCBsaWNlbnNlIGtleQ==')));});},Te.prototype._t=function(){this._lic.t();},Te.prototype._onOperationUpdate=function(){for(var be=arguments.length,Ce=Array(be),Re=0;Re<be;Re++)Ce[Re]=arguments[Re];this.emit.apply(this,[ce.OPERATION_UPDATED].concat(Ce));},Te.prototype._onContextRestored=function(){ue.warn(this.constructor.name,'Trying to re-render after WebGL context has been restored.'),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(be){be.disposeRenderTextures();}),this.render();},Te.prototype.export=function(){var be=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ye.DATAURL,Ce=this,Re=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ge.PNG,Ee=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0.8;return this._cv().then(function(){Ce._t();var Oe=new re.default(Ce,{renderType:be,imageFormat:Re,quality:Ee});return Oe.export();});},Te.prototype.render=function(){var be=this;if(!this._image)throw new Error('You need to set an image before calling PhotoEditorSDK#render.');var Ce=this._renderer.getContext();Ce.startFrame&&Ce.startFrame();var Re;ue.canLog('info')&&(Re=new ae.default('⚡⚡⚡','Frame rendering')),ue.info('⚡⚡⚡','Rendering starts');var Ee=this._operationsStack;return Ee.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(Oe){'export'===be._renderMode&&(Oe=be._inputTexture),be._currentTexture=Oe,be._sprite.setTexture(Oe),be._container.updateTransform();}).then(function(){return Ee.validateSettings();}).then(function(){return Ee.render(be,be._currentTexture);}).then(function(Oe){switch(be._currentTexture=Oe,be._sprite.setTexture(be._currentTexture),be._renderMode){case'dynamic':var Fe=be._renderer.getDimensions().clone().divide(2).add(be._offset);be._container.setScale(be._zoom/be.getTextureScale(),be._zoom/be.getTextureScale()),be._container.setPosition(Fe),be._sprite.setAnchor(0.5,0.5),be._sprite.setScale(be._spriteScale,be._spriteScale),be._sprite.setRotation(be._rotation);break;case'export':be._container.setScale(1,1),be._container.setPosition(0,0),be._sprite.setAnchor(0,0),be._sprite.setPosition(0,0),be._sprite.setScale(be._spriteScale,be._spriteScale),be._sprite.setRotation(0);}return be._renderer.render(be._container),Oe;}).then(function(Oe){return Re&&Re.stop(),Ce.endFrame&&Ce.endFrame(),Oe;});},Te.prototype.getTextureScale=function(){return Math.min(1,this._textureQuality*this._options.pixelRatio);},Te.prototype._prepareTexture=function(){var be=this;return new Promise(function(Ce){var Ee=be.getTextureScale();if(1===be._textureQuality)return Ce(be._inputTexture);var Oe=be.getInputDimensions().multiply(Ee).floor(),Fe;be._resizedTexture?!be._resizedTexture.getDimensions().equals(Oe)&&(be._resizedTexture.resizeTo(Oe),Fe=!0):(be._resizedTexture=new le.RenderTexture(be._renderer,Oe.x,Oe.y),Fe=!0),Fe&&(be._resizedSprite.setScale(Ee,Ee),be._resizedSprite.setTexture(be._inputTexture),be._resizedTexture.render(be._resizedContainer)),Ce(be._resizedTexture);});},Te.prototype._registerOperations=function(){for(var be in this._operations={},X){var Ce=X[be];this._operations[Ce.identifier]=Ce;}this._operations=de.extend(this._operations,this._options.extensions.operations);},Te.prototype.setAllOperationsToDirty=function(){var be=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(be);},Te.prototype.createOperation=function(be){var Ce=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Re=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,Ee=this._operations[be];if(!Ee)throw new Error('No operation with identifier `'+be+'` found.');var Oe=new Ee(this,Ce);return Re&&this.addOperation(Oe),Oe;},Te.prototype.addOperation=function(be){this._operationsStack.push(be);},Te.prototype.removeOperation=function(be){this._operationsStack.remove(be);},Te.prototype.getInputDimensions=function(){var be=this._inputTexture.getFrame();return new pe(be.width,be.height);},Te.prototype.getFinalDimensions=function(){var be=0<arguments.length&&void 0!==arguments[0]&&arguments[0],Ce=this.getInputDimensions(),Re=this._operationsStack;return Re.forEach(function(Ee){Ee.getEnabled()&&(Ce=Ee.getNewDimensions(Ce));}),be&&Ce.multiply(this._spriteScale),Ce.floor();},Te.prototype.getOutputDimensions=function(){var be=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(be).clone().multiply(this._zoom).floor();},Te.prototype.getOutputTextureDimensions=function(){var be=0<arguments.length&&void 0!==arguments[0]&&arguments[0],Ce=this.getTextureScale(),Re=this.getInputDimensions().multiply(Ce).floor();return this._operationsStack.forEach(function(Ee){Re=Ee.getNewDimensions(Re);}),Re;},Te.prototype._checkForUpdates=function(){this._options.versionCheck&&(this._versionChecker=new Q.default(this.version));},Te.prototype._initRenderer=function(){var be={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},Ce,Re;if('dynamic'===this._renderMode&&this._options.canvas){var Ee=this._options.canvas;Ce=Ee.width,Re=Ee.height;}else if(this._image){var Oe=this.getFinalDimensions();Ce=Oe.x,Re=Oe.y;}switch(this._preferredRenderer){case me.WEBGL:this._renderer=le.autoDetectRenderer(Ce,Re,be),this._renderer.on('context-restored',this._onContextRestored);break;case me.CANVAS:this._renderer=new le.CanvasRenderer(Ce,Re,be),this._renderer.on('context-restored',this._onContextRestored);break;default:ue.warn('PhotoEditorSDK','PhotoEditorSDK Error: Renderer `'+this._preferredRenderer+'` not supported. Falling back to automatically detected renderer.'),this._renderer=le.autoDetectRenderer(Ce,Re,be);}},Te.prototype.resizeTo=function(be){this._renderer.resizeTo(be,!0);},Te.prototype.reset=function(){this._operationsStack.clear();},Te.prototype.parseExif=function(be){if(be){var Ce=be.src;if(ee.default.isJPEG(Ce)){var Re=null;try{Re=ee.default.fromBase64String(Ce);}catch(Ee){}return Re?Re:void 0;}}},Te.prototype._handleExifOrientation=function(){var be=this._exif.getTags();if(be&&be.Orientation){var Ce=1!==be.Orientation&&2!==be.Orientation,Re=-1!==[2,4,5,7].indexOf(be.Orientation);(Ce||Re)&&(!this._exifOperation&&(this._exifOperation=this.createOperation('exif-orientation')),this._exifOperation.setTags(be),this._exif.setOrientation(1));}},Te.prototype.hasImage=function(){return null!==this._image&&'undefined'!=typeof this._image;},Te.prototype.getImage=function(){return this._image;},Te.prototype.setImage=function(be){var Ce=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,Re=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=be,this._image=be,this._exif=Ce||this.parseExif(be),this._exif&&this._handleExifOrientation();var Ee=new le.BaseTexture(this._image),Oe=new ne(0,0,this._image.width,this._image.height);Re&&(Oe.width=Re.x,Oe.height=Re.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=new le.Texture(Ee,Oe),this._currentTexture=this._inputTexture,this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0);},Te.prototype.getCanvas=function(){return this._renderer.getCanvas();},Te.prototype.setCanvas=function(be){this._renderer.setCanvas(be);},Te.prototype.getSprite=function(){return this._sprite;},Te.prototype.getContainer=function(){return this._container;},Te.prototype.getOperationsStack=function(){return this._operationsStack;},Te.prototype.setOperationsStack=function(be){this._operationsStack&&this._operationsStack.off(ce.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=be,this._operationsStack.on(ce.OPERATION_UPDATED,this._onOperationUpdate);},Te.prototype.getOperations=function(){return this._operations;},Te.prototype.getRenderer=function(){return this._renderer;},Te.prototype.getOffset=function(){return this._offset;},Te.prototype.setOffset=function(be,Ce){be instanceof pe?this._offset.copy(be):this._offset.set(be,Ce);},Te.prototype.getRenderMode=function(){return this._renderMode;},Te.prototype.setRenderMode=function(be){this._renderMode=be;},Te.prototype.getZoom=function(){return this._zoom;},Te.prototype.setZoom=function(be){this._zoom=be,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform();},Te.prototype.getTextureQuality=function(){return'export'===this._renderMode?1:this._textureQuality;},Te.prototype.setTextureQuality=function(be){be!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,be),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null);},Te.prototype.getSpriteScale=function(){return this._spriteScale;},Te.prototype.setSpriteScale=function(be){this._spriteScale=be,this._sprite.setScale(be,be),this._sprite.updateTransform();},Te.prototype.getPixelRatio=function(){return this._options.pixelRatio;},Te.prototype.getExif=function(){return this._exif;},Te.prototype.getOptions=function(){return this._options;},Te.prototype.getInputTexture=function(){return this._inputTexture;},Te.prototype.setSmoothDownscaling=function(be){this._options.smoothDownscaling=be,this._sprite.setSmoothDownscaling(be);},Te.prototype.setRotation=function(be){this._rotation=be;},Te.prototype.getRotation=function(){return this._rotation;},Te.prototype.dispose=function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose();},Te;}(se);/*
                              * This file is part of PhotoEditorSDK.
                              *
                              * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
                              * All rights reserved.
                              *
                              * Redistribution and use in source and binary forms, without
                              * modification, are permitted provided that the following license agreement
                              * is approved and a legal/financial contract was signed by the user.
                              * The license agreement can be found under following link:
                              *
                              * https://www.photoeditorsdk.com/LICENSE.txt
                              * @license
                              */_.default=he;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(44),H=R(W),Y=z.Constants.OptionType,X=z.Constants.UniformType,Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._fragmentSource=T(221),te;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getCanvas(),ae=te.getContext();ae.drawImage(oe,0,0);},K;}(H.default);Z.prototype.availableOptions={color:{type:Y.COLOR,default:z.Color.WHITE,uniformType:X.FLOAT4}},_.default=Z;},function(u,_,T){"use strict";'use strict';function R(U){return U&&U.__esModule?U:{default:U};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(100);Object.defineProperty(_,'UnpremultiplyFilter',{enumerable:!0,get:function(){return R(M).default;}});var I=T(98);Object.defineProperty(_,'ColorOverlayFilter',{enumerable:!0,get:function(){return R(I).default;}});},function(u,_,T){"use strict";'use strict';function R(Y){return Y&&Y.__esModule?Y:{default:Y};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(44),W=R(z),H=function(Y){function X(){(0,I.default)(this,X);var Z=(0,N.default)(this,Y.call(this));return Z._fragmentSource=T(222),Z;}return(0,V.default)(X,Y),X;}(W.default);_.default=H;},function(u,_,T){"use strict";'use strict';function R(te){return te&&te.__esModule?te:{default:te};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(72),H=R(W),Y=T(69),X=R(Y),Z=T(32),J=R(Z),K=T(45),Q=R(K),$=z.Constants.RendererType,ee=function(te){function re(){(0,I.default)(this,re);for(var oe=arguments.length,ae=Array(oe),ne=0;ne<oe;ne++)ae[ne]=arguments[ne];var ie=(0,N.default)(this,te.call.apply(te,[this].concat(ae)));return ie._type=$.CANVAS,ie.setCanvas(ie._options.canvas||ie._createCanvas()),ie;}return(0,V.default)(re,te),re.prototype._createCanvas=function(){return z.Utils.createCanvas();},re.prototype._createContext=function(){var ae=this._canvas,ne=ae.getContext('2d');return this._options.debug&&(ne=new H.default(ne)),this.id=ne.id=re.contextId++,this._context=ne,ne.renderer=this,this.emit('context',ne),ne;},re.prototype._setupContext=function(){var ae=this._context;'imageSmoothingEnabled'in ae?ae.imageSmoothingEnabled=!0:['moz','webkit','ms'].forEach(function(ne){ae[ne]&&(ae[ne]=!0);}),this._defaultRenderTarget=new J.default(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new Q.default(this);},re.prototype.render=function(ae){var ne=this._renderTarget.getContext(),ie=ae.getParent();ae.setParent(this._fakeObject),ae.updateTransform(),ae.setParent(ie),ne.setTransform(1,0,0,1,0,0),ne.globalAlpha=1;var le=this._canvas,de=le.width,se=le.height;ne.clearRect(0,0,de,se),0!==this._clearColor.a&&(ne.save(),ne.fillStyle=this._clearColor.toRGBA(),ne.fillRect(0,0,de,se),ne.restore()),this.renderDisplayObject(ae,this._renderTarget);},re.prototype.renderDisplayObject=function(ae,ne){var ie=this._renderTarget;this._filterManager.setFilterStack(ne.getFilterStack()),this.setRenderTarget(ne),ae.renderCanvas(this),this.setRenderTarget(ie);},re.prototype.getCurrentRenderTarget=function(){return this._renderTarget;},re.prototype.setRenderTarget=function(ae){this._renderTarget=ae;},re.prototype.getContext=function(){return this._renderTarget.getContext();},re.prototype.dispose=function(){this._filterManager.dispose();},re;}(X.default);ee.contextId=0,ee.type='Canvas2D',_.default=ee;},function(u,_,T){"use strict";'use strict';function R(Z){return Z&&Z.__esModule?Z:{default:Z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=R(z),H=T(70),Y=R(H),X=function(Z){function J(){(0,I.default)(this,J);for(var K=arguments.length,Q=Array(K),$=0;$<K;$++)Q[$]=arguments[$];var ee=(0,N.default)(this,Z.call.apply(Z,[this].concat(Q)));ee._maxBatchSize=W.default.BATCH_SIZE,ee._vertices=new ArrayBuffer(4*W.default.BATCH_SIZE*W.default.VERTEX_BYTE_SIZE),ee._positions=new Float32Array(ee._vertices),ee._colors=new Uint32Array(ee._vertices),ee._indices=new Uint16Array(6*W.default.BATCH_SIZE);for(var te=0,re=0;te<6*W.default.BATCH_SIZE;te+=6,re+=4)ee._indices[te+0]=re+0,ee._indices[te+1]=re+1,ee._indices[te+2]=re+2,ee._indices[te+3]=re+0,ee._indices[te+4]=re+2,ee._indices[te+5]=re+3;return ee._shaders=[],ee._sprites=[],ee._currentBatchSize=0,ee._currentBaseTexture=null,ee._onContextChange(),ee;}return(0,V.default)(J,Z),J.prototype.render=function(Q){var $=Q.getTexture(),ee=$.getFrame(),te=$.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=te);var re=$.getUVs();if(re){var oe=this._currentBatchSize*W.default.VERTEX_BYTE_SIZE;this._addVertexCoordinates(Q,oe,ee),this._addTextureUVs(Q,oe,re),this._addColors(Q,oe),this._sprites[this._currentBatchSize]=Q,this._currentBatchSize++;}},J.prototype._addColors=function(Q,$){var ee=this._colors,te=Q.getTint(),re=(te>>16)+(0xff00&te)+((0xff&te)<<16)+(255*Q.getWorldAlpha()<<24);ee[$+4]=ee[$+9]=ee[$+14]=ee[$+19]=re;},J.prototype._addTextureUVs=function(Q,$,ee){var te=this._positions,re=ee.getUVsAt(0);te[$+2]=re.x,te[$+3]=re.y,re=ee.getUVsAt(1),te[$+7]=re.x,te[$+8]=re.y,re=ee.getUVsAt(2),te[$+12]=re.x,te[$+13]=re.y,re=ee.getUVsAt(3),te[$+17]=re.x,te[$+18]=re.y;},J.prototype._addVertexCoordinates=function(Q,$,ee){for(var te=this._positions,re=Q.getWorldTransform(),oe=Q.getAnchor(),ae=re.rectangleToCoordinates(ee,oe),ne=5,ie=0;4>ie;ie++)te[$+ie*ne]=ae[ie].x,te[$+ie*ne+1]=ae[ie].y;},J.prototype._onContextChange=function(){var Q=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=Q.createBuffer(),this._indexBuffer=Q.createBuffer(),Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,this._indexBuffer),Q.bufferData(Q.ELEMENT_ARRAY_BUFFER,this._indices,Q.STATIC_DRAW),Q.bindBuffer(Q.ARRAY_BUFFER,this._vertexBuffer),Q.bufferData(Q.ARRAY_BUFFER,this._vertices,Q.DYNAMIC_DRAW);},J.prototype.start=function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer);},J.prototype.flush=function(){var Q=this._renderer,$=Q.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>0.5*W.default.BATCH_SIZE)$.bufferSubData($.ARRAY_BUFFER,0,this._vertices);else{var ee=this._positions.subarray(0,this._currentBatchSize*W.default.VERTEX_BYTE_SIZE);$.bufferSubData($.ARRAY_BUFFER,0,ee);}for(var te=0,re=null,oe=null,ae=null,ne=null,ie=!1,le=!1,de=null,se=0,pe=0,ue=this._currentBatchSize;pe<ue;pe++){if(de=this._sprites[pe],oe=de.getTexture().getBaseTexture(),ne=de.getShader()||this._shader,ie=ae!==ne,le=re!==oe,(le||ie)&&(this._renderBatch(re,te,se),se=pe,te=0,re=oe,ie)){ae=ne,Q.setShader(ae);var _e=Q.getCurrentRenderTarget(),fe=_e.getProjectionMatrix().toArray();ae.setUniform('u_projMatrix',fe),ae.syncUniforms(),$.activeTexture($.TEXTURE0);}te++;}this._renderBatch(re,te,se),this._currentBatchSize=0,this._sprites=[];}},J.prototype._renderBatch=function(Q,$,ee){if(0!==$){var te=this._renderer,re=te.getContext(),oe=Q.getGLTextureForRenderer(te);oe||(oe=te.getOrCreateGLTexture(Q)),Q.isDirty()&&(te.updateTexture(Q),Q.setDirty(!1)),re.activeTexture(re.TEXTURE0+Q.getGLUnit()),re.bindTexture(re.TEXTURE_2D,oe);re.drawElements(re.TRIANGLES,6*$,re.UNSIGNED_SHORT,2*(6*ee));}},J.prototype.dispose=function(){var Q=this._renderer,$=Q.getContext();$.deleteBuffer(this._vertexBuffer),$.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,Z.prototype.dispose.call(this);},J;}(Y.default);_.default=X;},function(u,_,T){"use strict";'use strict';function R(ue){return ue&&ue.__esModule?ue:{default:ue};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(69),H=R(W),Y=T(33),X=R(Y),Z=T(70),J=R(Z),K=T(102),Q=R(K),$=T(48),ee=R($),te=T(43),re=R(te),oe=T(46),ae=R(oe),ne=T(72),ie=R(ne),le=T(73),de=R(le),se=z.Constants.RendererType,pe=function(ue){function _e(){(0,I.default)(this,_e);for(var fe=arguments.length,ye=Array(fe),ge=0;ge<fe;ge++)ye[ge]=arguments[ge];var ce=(0,N.default)(this,ue.call.apply(ue,[this].concat(ye)));return ce._type=se.WEBGL,ce._textures=[],ce._fakeObject=new re.default(),ce._onContextLost=ce._onContextLost.bind(ce),ce._onContextRestored=ce._onContextRestored.bind(ce),ce.setCanvas(ce._options.canvas||z.Utils.createCanvas()),ce.shaders=ce._initShaders(),ce.renderers=ce._initRenderers(),ce;}return(0,V.default)(_e,ue),_e.prototype._onContextLost=function(ye){ye.preventDefault(),z.Log.warn(this.constructor.name,'WebGL context has been lost - trying to restore.');},_e.prototype._onContextCreationError=function(ye){ye.preventDefault(),z.Log.warn(this.constructor.name,'Failed to create WebGL context: '+(ye.statusMessage||'Unknown error'));},_e.prototype._onContextRestored=function(){var ye=this;z.Log.warn(this.constructor.name,'WebGL context has been restored. Clearing all textures.'),this._textures.forEach(function(ge){ge.disposeGLTexturesForRenderer(ye);}),this._createContext(),this._setupContext(),this.emit('context-restored');},_e.prototype._onBeforeContext=function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new ae.default(this),this._currentObjectRenderer=new J.default(this);},_e.prototype.setShader=function(ye){this._currentShader=ye,this._context.useProgram(ye.getProgram()),this._setAttributesForShader(ye);},_e.prototype.setCanvas=function(ye){this._canvas&&(this._canvas.removeEventListener('webglcontextlost',this._onContextLost),this._canvas.removeEventListener('webglcontextrestored',this._onContextRestored),this._canvas.removeEventListener('webglcontextcreationerror',this._onContextCreationError)),ye.addEventListener&&(ye.addEventListener('webglcontextlost',this._onContextLost),ye.addEventListener('webglcontextrestored',this._onContextRestored),ye.addEventListener('webglcontextcreationerror',this._onContextCreationError)),ue.prototype.setCanvas.call(this,ye);},_e.prototype._setAttributesForShader=function(ye){var ge=this._context,ce=ye.getAttributes(),me=ye.getAttributeLocations();ce.forEach(function(he){var xe=me[he];ge.enableVertexAttribArray(xe);});},_e.prototype._initShaders=function(){return{default:new ee.default(this)};},_e.prototype._initRenderers=function(){return{sprite:new Q.default(this)};},_e.prototype._createContext=function(){var ye=this._canvas,ge=null,ce={preserveDrawingBuffer:!0};if(ge=ye.getContext('webgl',ce)||ye.getContext('experimental-webgl',ce),'undefined'!=typeof window&&window.WebGLDebugUtils&&this._options.debug){var me=function(xe,Te){console.error('gl.'+xe+'('+window.WebGLDebugUtils.glFunctionArgsToString(xe,Te)+')');};ge=window.WebGLDebugUtils.makeDebugContext(ge,null,me);}return this._options.debug&&(ge=new ie.default(ge)),this.id=ge.id=_e.contextId++,this._context=ge,ge.renderer=this,this._maxTextureSize=ge.getParameter(ge.MAX_TEXTURE_SIZE),this.emit('context',ge),ge;},_e.prototype._setupContext=function(){var ye=this._context;ye.disable(ye.DEPTH_TEST),ye.disable(ye.CULL_FACE),ye.enable(ye.BLEND),ye.blendFunc(ye.ONE,ye.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new X.default(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision();},_e.prototype._getMaxPrecision=function(){var ye=this._context,ge=ye.getShaderPrecisionFormat(ye.FRAGMENT_SHADER,ye.HIGH_FLOAT);this._maxFloatPrecision=0===ge.precision?'mediump':'highp';var ce=ye.getShaderPrecisionFormat(ye.FRAGMENT_SHADER,ye.HIGH_INT);this._maxIntPrecision=0===ce.rangeMax?'lowp':'highp';},_e.prototype.resizeTo=function(ye){var ge=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;ue.prototype.resizeTo.call(this,ye,ge),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(ye);},_e.prototype.setRenderTarget=function(){var ye=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=ye,this._currentRenderTarget.activate();},_e.prototype.setObjectRenderer=function(ye){this._currentObjectRenderer.stop(),this._currentObjectRenderer=ye,this._currentObjectRenderer.start();},_e.prototype.render=function(ye){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var ge=ye.getParent();ye.setParent(this._fakeObject),ye.updateTransform(),ye.setParent(ge),this.renderDisplayObject(ye,this._defaultRenderTarget);},_e.prototype.renderDisplayObject=function(ye,ge){this.setRenderTarget(ge),this._filterManager.setFilterStack(ge.getFilterStack()),ye.renderWebGL(this),this._currentObjectRenderer.flush();},_e.prototype.clear=function(){var ye=this._context;ye.clearColor.apply(ye,this._clearColor.toGLColor()),ye.clear(ye.COLOR_BUFFER_BIT);},_e.prototype.save=function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()};},_e.prototype.restore=function(ye){this.setRenderTarget(ye.renderTarget),this._filterManager.setFilterStack(ye.filterStack),this._currentObjectRenderer=ye.objectRenderer;},_e.prototype.getOrCreateGLTexture=function(ye){var ge=this._context,ce=ye.getGLTextureForRenderer(this);return ce||(ce=ge.createTexture(),ye.setGLTextureForRenderer(ce,this),this._textures.push(ye)),ce;},_e.prototype.updateTexture=function(ye){var ge=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,ce=ye.getSource(),me=!!ce,he=this._context,xe=ye.getGLUnit(),Te=this.getOrCreateGLTexture(ye);he.activeTexture(he.TEXTURE0+xe),he.bindTexture(he.TEXTURE_2D,Te),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),ge&&me&&('undefined'!=typeof Image&&ce instanceof Image||'undefined'!=typeof HTMLImageElement&&ce instanceof HTMLImageElement||'Canvas'===ce.constructor.name||ce.tagName&&'CANVAS'===ce.tagName.toUpperCase()||ce.tagName&&'IMG'===ce.tagName.toUpperCase()?he.texImage2D(he.TEXTURE_2D,0,he.RGBA,he.RGBA,he.UNSIGNED_BYTE,ce):('undefined'!=typeof NodeCanvasImage&&ce instanceof NodeCanvasImage&&(ce=de.default.fromNodeCanvasImage(ce)),he.texImage2D(he.TEXTURE_2D,0,he.RGBA,ce.width,ce.height,0,he.RGBA,he.UNSIGNED_BYTE,ce.data))),ye.isMipMappingEnabled()?he.generateMipmap(he.TEXTURE_2D):(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,ye.getGLRepeat(he,'x')),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,ye.getGLRepeat(he,'y'))),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,ye.getGLFilter(he,'min')),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,ye.getGLFilter(he,'mag')),he.activeTexture(he.TEXTURE0);},_e.prototype.getMaxDimensions=function(){var ye=z.Utils.createCanvas(),ge=ye.getContext('webgl')||ye.getContext('experimental-webgl');if(!ge)return null;var ce=ge.getParameter(ge.MAX_TEXTURE_SIZE),me=ge.getExtension('WEBGL_lose_context');return me&&me.loseContext(),ce;},_e.prototype.getCurrentRenderTarget=function(){return this._currentRenderTarget;},_e.prototype.getCurrentObjectRenderer=function(){return this._currentObjectRenderer;},_e.isSupported=function(){var ye=z.Utils.createCanvas();ye.addEventListener('webglcontextcreationerror',this._onContextCreationError);var ge=ye.getContext('webgl')||ye.getContext('experimental-webgl');return ye.removeEventListener('webglcontextcreationerror',this._onContextCreationError),!!ge;},_e.prototype.getMaxFloatPrecision=function(){return this._maxFloatPrecision;},_e.prototype.getMaxIntPrecision=function(){return this._maxIntPrecision;},_e.prototype.dispose=function(){var ye=this;for(var ge in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(ce){ce.disposeGLTexturesForRenderer(ye);}),this.shaders)this.shaders[ge].dispose(),delete this.shaders[ge];},_e;}(H.default);pe.contextId=0,pe.type='WebGL',_.default=pe;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(48),I=function(U){return U&&U.__esModule?U:{default:U};}(M);_.default={TextureShader:I.default};},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(68),H=R(W),Y=T(114),X=R(Y),Z=function(J){function K(Q){(0,I.default)(this,K);var $=(0,N.default)(this,J.call(this));return $._onTextureUpdate=$._onTextureUpdate.bind($),$._texture=Q,$._shader=null,$._width=0,$._height=0,$._anchor=new z.Vector2(0,0),$.setTexture(Q),$;}return(0,V.default)(K,J),K.prototype._onTextureUpdate=function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},K.prototype._renderWebGL=function($){var ee=$.save();this._smoothDownscaling&&(!this._potRenderer&&(this._potRenderer=new X.default()),this._potRenderer.render($,this,this._texture)),$.restore(ee),$.setObjectRenderer($.renderers.sprite),$.renderers.sprite.render(this);},K.prototype._renderCanvas=function($){var ee=this._worldTransform,te=this._texture.getFrame(),re=te.width,oe=te.height,ae=$.getCurrentRenderTarget().getPixelRatio(),ne=0|this._anchor.x*-re,ie=0|this._anchor.y*-oe,le=$.getContext();le.setTransform(ee.a,ee.b,ee.c,ee.d,ee.tx*ae,ee.ty*ae),le.globalAlpha=this.getWorldAlpha();var de=this._texture.getBaseTexture(),se=de.getPixelRatio(),pe=de.getSource();le.drawImage(this._texture.getBaseTexture().getSource(),0,0,(pe.naturalWidth||re)*se,(pe.naturalHeight||oe)*se,ne*ae,ie*ae,re*ae,oe*ae);},K.prototype.isAtPosition=function($){var ee=this._worldTransform.applyInverseToVector($),te=this._texture.getFrame(),re=te.width,oe=te.height,ae=new z.Vector2(-re,-oe);ae.multiply(this._anchor);var ne=ae.clone().add(re,oe);return ee.x<ae.x||ee.x>ne.x||ee.y<ae.y||ee.y>ne.y?!1:!0;},K.prototype.getLocalBounds=function(){if(this._localBoundsNeedUpdate){var $=this._localBounds,ee=this._texture.getFrame();$.x=-ee.width*this._anchor.x,$.y=-ee.height*this._anchor.y,$.width=ee.width,$.height=ee.height,this._localBoundsNeedUpdate=!1;}return this._localBounds.clone();},K.prototype.getBounds=function(){var $=this;return this._boundsNeedUpdate&&function(){var ee=$._bounds,te=$._texture.getFrame(),re=$._worldTransform,oe=$._anchor,ae=re.rectangleToCoordinates(te,oe),ne=ae[0].x,ie=ae[0].y,le=ne,de=ie;ae.forEach(function(se){var pe=se.x,ue=se.y;ne=Math.min(ne,pe),ie=Math.min(ie,ue),le=Math.max(le,pe),de=Math.max(de,ue);}),ee.x=ne,ee.width=Math.abs(le-ne),ee.y=ie,ee.height=Math.abs(de-ie),$._boundsNeedUpdate=!1;}(),this._bounds.clone();},K.prototype.getTexture=function(){return this._texture;},K.prototype.setTexture=function($){$&&(this._texture&&this._texture.off('update',this._onTextureUpdate),this._texture=$,$.getBaseTexture().isLoaded()&&this._onTextureUpdate(),$.on('update',this._onTextureUpdate));},K.prototype.getShader=function(){return this._shader;},K.prototype.setShader=function($){this._shader=$;},K.prototype.getWidth=function(){return this._width;},K.prototype.setWidth=function($){this._scale.x=$/this._texture.getFrame().width,this._width=$,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},K.prototype.getHeight=function(){return this._height;},K.prototype.setHeight=function($){this._scale.y=$/this._texture.getFrame().height,this._height=$,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},K.prototype.getDimensions=function(){return new z.Vector2(this._width,this._height);},K.prototype.getAnchor=function(){return this._anchor;},K.prototype.setAnchor=function($,ee){$ instanceof z.Vector2?this._anchor.copy($):this._anchor.set($,ee),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0;},K.prototype.isSmoothDownscaling=function(){return this._smoothDownscaling;},K.prototype.setSmoothDownscaling=function($){this._smoothDownscaling=$;},K.prototype.dispose=function(){this._texture&&this._texture.off('update',this._onTextureUpdate);},K;}(H.default);_.default=Z;},function(u,_,T){"use strict";'use strict';function R(ne){return ne&&ne.__esModule?ne:{default:ne};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(6),W=T(71),H=R(W),Y=T(31),X=R(Y),Z=T(33),J=R(Z),K=T(32),Q=R(K),$=T(46),ee=R($),te=T(45),re=R(te),oe=z.Constants.RendererType,ae=function(ne){function ie(le){var de=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,se=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,pe=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,I.default)(this,ie);var ue=new X.default(),_e=ue.getFrame();_e.width=de,_e.height=se,ue.setPixelRatio(pe),ue.setLoaded(!0);var fe=(0,N.default)(this,ne.call(this,ue,new z.Rectangle(0,0,de,se)));return fe._loaded=!0,fe._width=de,fe._height=se,fe._pixelRatio=pe,fe._renderer=le,fe._setupFilterManager(),fe._setupBuffer(),fe._updateUVs(),fe;}return(0,V.default)(ie,ne),ie.prototype._setupFilterManager=function(){this._renderer.isOfType(oe.WEBGL)?this._filterManager=new ee.default(this._renderer):this._renderer.isOfType(oe.CANVAS)&&(this._filterManager=new re.default(this._renderer)),this._filterManager.resizeTo(new z.Vector2(this._width,this._height));},ie.prototype._setupBuffer=function(){this._renderer.isOfType(oe.WEBGL)?this._setupWebGLBuffer():this._renderer.isOfType(oe.CANVAS)&&this._setupCanvasRenderTarget();},ie.prototype._setupWebGLBuffer=function(){this._renderTarget=new J.default(this._renderer,this._width,this._height,this._pixelRatio),this._baseTexture.setGLTextureForRenderer(this._renderTarget.getTexture(),this._renderer);},ie.prototype._setupCanvasRenderTarget=function(){this._renderTarget=new Q.default(this._width,this._height,this._pixelRatio),this._baseTexture.setSource(this._renderTarget.getCanvas());},ie.prototype.clear=function(de){this._renderTarget.clear(de);},ie.prototype.resizeTo=function(de){this._width===de.x&&this._height===de.y||(this._width=de.x,this._height=de.y,this._frame.width=de.x,this._frame.height=de.y,this._baseTexture.resizeTo(de),this._renderTarget.resizeTo(de),this._filterManager.resizeTo(de));},ie.prototype.render=function(de){if(this._renderer.isOfType(oe.WEBGL))this._renderWebGL(de);else if(this._renderer.isOfType(oe.CANVAS))this._renderCanvas(de);else throw new Error('RenderTexture does not support rendering via '+this._renderer.constructor.name);},ie.prototype._renderWebGL=function(de){this._renderTarget.activate(),de.getWorldTransform().reset(),de.getChildren().forEach(function(pe){pe.updateTransform();});var se=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(de,this._renderTarget),this._renderTarget.updateMipMap(),this._renderer.setFilterManager(se);},ie.prototype._renderCanvas=function(de){de.getWorldTransform().reset(),de.getChildren().forEach(function(pe){pe.updateTransform();});var se=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(de,this._renderTarget),this._renderer.setFilterManager(se);},ie.prototype.getRenderTarget=function(){return this._renderTarget;},ie.prototype.dispose=function(){this._baseTexture.disposeGLTexturesForRenderer(this._renderer),this._renderTarget.dispose(),this._filterManager.dispose();},ie;}(H.default);_.default=ae;},function(u,_,T){"use strict";"use strict";Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(N){return N&&N.__esModule?N:{default:N};}(M),U=function(){function N(G){(0,I.default)(this,N),this._renderer=G,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers();}return N.prototype.map=function(V,z){var W=z.x,H=z.y;this._uvs[2]=z.width/V.width,this._uvs[4]=this._uvs[2],this._uvs[5]=z.height/V.height,this._uvs[7]=this._uvs[5],this._vertices[0]=W,this._vertices[1]=H,this._vertices[2]=W+z.width,this._vertices[3]=H,this._vertices[4]=this._vertices[2],this._vertices[5]=H+z.height,this._vertices[6]=W,this._vertices[7]=this._vertices[5],this._uploadBuffers();},N.prototype._initBuffers=function(){var V=this._context;this._vertexBuffer=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,this._vertexBuffer),V.bufferData(V.ARRAY_BUFFER,128,V.DYNAMIC_DRAW),this._indexBuffer=V.createBuffer(),V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,this._indexBuffer),V.bufferData(V.ELEMENT_ARRAY_BUFFER,this._indices,V.STATIC_DRAW);},N.prototype._uploadBuffers=function(){var V=this._context;V.bindBuffer(V.ARRAY_BUFFER,this._vertexBuffer),V.bufferSubData(V.ARRAY_BUFFER,0,this._vertices),V.bufferSubData(V.ARRAY_BUFFER,32,this._uvs),V.bufferSubData(V.ARRAY_BUFFER,64,this._colors);},N.prototype.getVertexBuffer=function(){return this._vertexBuffer;},N.prototype.getIndexBuffer=function(){return this._indexBuffer;},N.prototype.dispose=function(){var V=this._context;V.deleteBuffer(this._vertexBuffer),V.deleteBuffer(this._indexBuffer);},N;}();_.default=U;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(G){return G&&G.__esModule?G:{default:G};}(M),U=T(6),N=function(){function G(){(0,I.default)(this,G),this._uvs=[new U.Vector2(0,0),new U.Vector2(1,0),new U.Vector2(1,1),new U.Vector2(0,1)];}return G.prototype.update=function(z,W){var H=this._uvs[0];H.x=z.x/W.width,H.y=z.y/W.height,H=this._uvs[1],H.x=(z.x+z.width)/W.width,H.y=z.y/W.height,H=this._uvs[2],H.x=(z.x+z.width)/W.width,H.y=(z.y+z.height)/W.height,H=this._uvs[3],H.x=z.x/W.width,H.y=(z.y+z.height)/W.height;},G.prototype.getUVsAt=function(z){return this._uvs[z];},G.prototype.getUVs=function(){return this._uvs;},G;}();_.default=N;},function(u,_){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});_.default={defaults:function(M){for(var I=arguments.length,U=Array(1<I?I-1:0),N=1;N<I;N++)U[N-1]=arguments[N];var G={};for(var V in M)G[V]=M[V];for(var z=0,W;z<U.length;z++)for(var H in W=U[z],W)'undefined'==typeof G[H]&&(G[H]=W[H]);return G;},extend:function(M){for(var I=arguments.length,U=Array(1<I?I-1:0),N=1;N<I;N++)U[N-1]=arguments[N];var G={};for(var V in M)G[V]=M[V];for(var z=0,W;z<U.length;z++)for(var H in W=U[z],W)G[H]=W[H];return G;}};},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(N){return N&&N.__esModule?N:{default:N};}(M),U=function(){function N(G){(0,I.default)(this,N),this._head=0,this._buf=G;}return N.prototype.peekInt8=function(){return this._buf[this._head];},N.prototype.peekInt16=function(){var V=0<arguments.length&&void 0!==arguments[0]&&arguments[0],z=this._buf[this._head],W=this._buf[this._head+1];return V?(W<<8)+z:(z<<8)+W;},N.prototype.peekInt24=function(){var V=0<arguments.length&&void 0!==arguments[0]&&arguments[0],z=this._buf[this._head],W=this._buf[this._head+1],H=this._buf[this._head+2];return V?(H<<16)+(W<<8)+z:(z<<16)+(W<<8)+H;},N.prototype.peekInt32=function(){var V=0<arguments.length&&void 0!==arguments[0]&&arguments[0],z=this._buf[this._head],W=this._buf[this._head+1],H=this._buf[this._head+2],Y=this._buf[this._head+3];return V?(Y<<32)+(H<<16)+(W<<8)+z:(z<<32)+(W<<16)+(H<<8)+Y;},N.prototype.writeInt16=function(V){this._buf[this._head]=V>>8,this._buf[this._head+1]=0xff&V;},N.prototype.readInt8=function(){var V=this.peekInt8();return this._head+=1,V;},N.prototype.readInt16=function(){var V=0<arguments.length&&void 0!==arguments[0]&&arguments[0],z=this.peekInt16(V);return this._head+=2,z;},N.prototype.readInt24=function(){var V=0<arguments.length&&void 0!==arguments[0]&&arguments[0],z=this.peekInt24(V);return this._head+=3,z;},N.prototype.readInt32=function(){var V=0<arguments.length&&void 0!==arguments[0]&&arguments[0],z=this.peekInt32(V);return this._head+=4,z;},N.prototype.readString=function(V){for(var z='',W=0,H;W<V;W++)H=this.readInt8(),z+=String.fromCharCode(H);return z;},N.prototype.getHead=function(){return this._head;},N.prototype.setHead=function(V){this._head=V;},N;}();_.default=U;},function(u,_,T){"use strict";'use strict';function R(re){return re&&re.__esModule?re:{default:re};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(9),W=T(12),H=R(W),Y=T(19),X=R(Y),Z=T(42),J=R(Z),K=T(113),Q=R(K),$=T(14),ee=R($),te=function(re){function oe(ae){var ne=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,I.default)(this,oe);var ie=(0,N.default)(this,re.call(this,ne));return ie._sdk=ae,ie;}return(0,V.default)(oe,re),oe.prototype.export=function(){var ne=this,ie=this._sdk.getRenderer(),le=this._options,de=le.renderType,se=le.imageFormat,pe=le.quality;return this.validateSettings().then(function(){return ne._prepareSDK();}).then(function(ue){var _e=ie.getCanvas();ie.isOfType(z.RendererType.WEBGL)&&(_e=ne._createCanvasFromTexture(ue));var fe;if(de===z.RenderType.IMAGE||de===z.RenderType.DATAURL){fe='undefined'==typeof window?_e.toDataURL(se):_e.toDataURL(se,pe);var ye=ne._sdk.getImage();if(J.default.isJPEG(ye.src)&&J.default.isJPEG(fe)){var ge=ne._sdk.getExif();ge&&(fe=ge.restoreExifTags(fe));}}if(ie.isOfType(z.RendererType.WEBGL)&&'undefined'!=typeof Canvas&&_e instanceof Canvas&&Q.default.renderContextToCanvas(ie.getContext(),_e),de===z.RenderType.IMAGE){var ce;return ce=new Image(),ce.src=fe,ce;}return de===z.RenderType.DATAURL?fe:de===z.RenderType.BUFFER?_e.toBuffer():de===z.RenderType.MSBLOB?_e.msToBlob():de===z.RenderType.BLOB?new Promise(function(me){_e.toBlob(function(xe){me(xe);},se,pe);}):void 0;}).then(function(ue){return ne._restoreSDK().then(function(){return ue;});});},oe.prototype._prepareSDK=function(){var ne=this._sdk.getRenderer();this._sdkSettings={dimensions:ne.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode('export'),this._sdk.setTextureQuality(1);var ie=ne.isOfType(z.RendererType.CANVAS);ne.setPixelRatio(1),ne.resizeTo(this._sdk.getFinalDimensions(),ie),this._sdk.setAllOperationsToDirty(!0);var le=this._sdk.getOperationsStack();return le.forEach(function(de){de.disposeRenderTextures();}),le.disableCache(),this._sdk.render();},oe.prototype._restoreSDK=function(){var ne=this._sdk.getOperationsStack();ne.enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var ie=this._sdk.getRenderer(),le=ie.isOfType(z.RendererType.CANVAS);return ie.setPixelRatio(this._sdkSettings.pixelRatio),ie.resizeTo(this._sdkSettings.dimensions,le),this._sdk.setTextureQuality(this._sdkSettings.pixelRatio),this._sdk.setAllOperationsToDirty(!0),this._sdk.render();},oe.prototype._createCanvasFromTexture=function(ne){var ie=this._sdk.getRenderer(),le=this._sdk.getFinalDimensions(),de=this._sdk.getRenderer().getContext(),se=de.createFramebuffer();de.bindFramebuffer(de.FRAMEBUFFER,se);var pe=ne.getBaseTexture().getGLTextureForRenderer(ie);de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,pe,0);var ue=new Uint8Array(4*(le.x*le.y));de.readPixels(0,0,le.x,le.y,de.RGBA,de.UNSIGNED_BYTE,ue);var _e=this._checkPixelsForTransparency(ue),fe;if(_e){var ye=new H.default.Sprite(ne);ye.setFilters([new H.default.Filters.UnpremultiplyFilter()]);var ge=new H.default.Container();ge.addChild(ye),fe=new H.default.RenderTexture(ie,le.x,le.y),fe.render(ge);var ce=fe.getBaseTexture().getGLTextureForRenderer(ie);de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,ce,0),de.readPixels(0,0,le.x,le.y,de.RGBA,de.UNSIGNED_BYTE,ue),ie.setRenderTarget(),fe.dispose();}var me=X.default.createCanvas();me.width=le.x,me.height=le.y;var he=me.getContext('2d'),xe=he.createImageData(le.x,le.y);return xe.data.set(ue),he.putImageData(xe,0,0),de.deleteFramebuffer(se),me;},oe.prototype._checkPixelsForTransparency=function(ne){for(var ie=this._sdk.getFinalDimensions(),le=4*(ie.x*ie.y),de=void 0,se=3;se<le;se+=4)if(de=ne[se],255!==de)return!0;return!1;},oe;}(ee.default);te.prototype.availableOptions={renderType:{type:z.OptionType.STRING,available:X.default.values(z.RenderType),default:z.RenderType.IMAGE},imageFormat:{type:z.OptionType.STRING,available:X.default.values(z.ImageFormat),default:z.ImageFormat.PNG},quality:{type:z.OptionType.NUMBER,default:0.8}},_.default=te;},function(u,_,T){"use strict";'use strict';function R(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(25),N=R(U),G=T(19),V=R(G),z=function($){return V.default.byteArrayToString(N.default.decode($));},W={development:'aHR0cHM6Ly9zdGFnaW5nLmFwaS5waG90b2VkaXRvcnNkay5jb20=',production:'aHR0cHM6Ly9hcGkucGhvdG9lZGl0b3JzZGsuY29t',test:'aHR0cHM6Ly9zdGFnaW5nLmFwaS5waG90b2VkaXRvcnNkay5jb20='},Z='YXV0aG9yaXplZA==',J='ZXJyb3I=',K=function(){function Q($){(0,I.default)(this,Q),this._YXBpS2V5=$;}return Q.prototype._loadJSON=function(ee){return this._loadJSONBrowser(ee);},Q.prototype._loadJSONBrowser=function(ee){return new Promise(function(te){var oe=document.createElement('script'),ae='pesdk'+Math.floor(999999*Math.random());window[ae]=function(ne){oe.parentNode.removeChild(oe),te(ne),delete window[ae];},oe.src=ee+z(z('Sm1OaGJHeGlZV05yUFE9PQ=='))+ae,oe.async=!0,document.getElementsByTagName('head')[0].appendChild(oe);});},Q.prototype._loadJSONNode=function(){return new Promise(function(){});},Q.prototype.c=function(){return this._loadJSON(z(W.production)+z(z('TDJGMWRHZy9ZWEJwUzJWNVBRPT0='))+this._YXBpS2V5).then(function(ee){if(!ee[z(Z)])throw new Error(ee[z(J)]);});},Q.prototype.t=function(){return this._loadJSON(z(W.production)+z(z('TDNSeVlXTnJQMkZ3YVV0bGVUMD0='))+this._YXBpS2V5).then(function(ee){if(!ee[z(Z)])throw new Error(ee[z(J)]);});},Q;}();_.default=K;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(N){return N&&N.__esModule?N:{default:N};}(M),U=function(){function N(){(0,I.default)(this,N);}return N.renderContextToCanvas=function(V,z){var W=z.width,H=z.height,Y=new Uint8Array(4*(W*H));V.readPixels(0,0,W,H,V.RGBA,V.UNSIGNED_BYTE,Y);var X=z.getContext('2d'),Z=new Canvas.ImageData(W,H),J=0;Y.forEach(function(){Z.data[J]=Y[J],J++;}),X.putImageData(Z,0,0);},N;}();_.default=U;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(G){return G&&G.__esModule?G:{default:G};}(M),U=T(3),N=function(){function G(){(0,I.default)(this,G),this._container=new U.Engine.Container(),this._sprite=new U.Engine.Sprite(),this._container.addChild(this._sprite);}return G.prototype.render=function(z,W,H){this._renderTexture||(this._renderTexture=new U.Engine.RenderTexture(z));var Y=H.getDimensions();this._resizeRenderTexture(Y);var X=this._renderTexture.getDimensions();this._sprite.setTexture(H),this._sprite.updateTransform(),this._renderTexture.render(this._container),this._updateSprite(z,W,Y,X);},G.prototype._updateSprite=function(z,W,H){W.setTexture(this._renderTexture),this._renderTexture.setFrame(new U.Rectangle(0,0,H.x,H.y));},G.prototype._resizeRenderTexture=function(z){this._renderTexture.resizeTo(new U.Vector2(U.Utils.nextHighestPOT(z.x),U.Utils.nextHighestPOT(z.y)));},G;}();_.default=N;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(z){return z&&z.__esModule?z:{default:z};}(M),U=T(3),N='imglySDKVersionCallback',V=function(){function z(W){(0,I.default)(this,z),this._version=W,this._check();}return z.prototype._check=function(){var H=this;if('undefined'==typeof document)return U.Log.info(this.constructor.name,'Not in browser environment. Version check skipped.');var Y=this;window[N]=function(Z){Z.outdated&&U.Log.warn(H.constructor.name,'Your Version '+Y._version+' is outdated. Current version is '+Z.version+'.');};var X=document.createElement('script');X.src='https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback='+N+'&version='+this._version,X.async=!0,document.getElementsByTagName('head')[0].appendChild(X);},z;}();_.default=V;},function(u,_,T){"use strict";'use strict';function R(ee){return ee&&ee.__esModule?ee:{default:ee};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(7),W=R(z),H=T(10),Y=R(H),X=T(78),Z=R(X),J=T(117),K=R(J),Q=T(9),$=function(ee){function te(){(0,I.default)(this,te);for(var re=arguments.length,oe=Array(re),ae=0;ae<re;ae++)oe[ae]=arguments[ae];var ne=(0,N.default)(this,ee.call.apply(ee,[this].concat(oe)));return ne._clarityFilter=new K.default(),ne._filter=new Z.default(),ne._sprite.setFilters([ne._clarityFilter,ne._filter]),ne;}return(0,V.default)(te,ee),te.prototype._render=function(oe){var ae=oe.getDimensions();return ae.x=1/ae.x,ae.y=1/ae.y,this._clarityFilter.set({clarity:this._options.clarity,texSize:ae}),this._filter.set({brightness:this._options.brightness,saturation:this._options.saturation,contrast:this._options.contrast,gamma:this._options.gamma,exposure:this._options.exposure,shadows:this._options.shadows,highlights:this._options.highlights}),0===this._options.clarity?this._sprite.setFilters([this._filter]):this._sprite.setFilters([this._clarityFilter,this._filter]),this._renderTexture.render(this._container),W.default.resolve();},te.prototype.dispose=function(){ee.prototype.dispose.call(this),this._filter.dispose(),this._clarityFilter.dispose();},te;}(Y.default);$.identifier='adjustments',$.prototype.availableOptions={brightness:{type:Q.OptionType.NUMBER,default:0},saturation:{type:Q.OptionType.NUMBER,default:1},contrast:{type:Q.OptionType.NUMBER,default:1},gamma:{type:Q.OptionType.NUMBER,default:1},exposure:{type:Q.OptionType.NUMBER,default:0},shadows:{type:Q.OptionType.NUMBER,default:0},highlights:{type:Q.OptionType.NUMBER,default:1},clarity:{type:Q.OptionType.NUMBER,default:0}},_.default=$;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(36),H=R(W),Y=z.Constants.OptionType,X=z.Constants.UniformType,Z=function(J){function K(){(0,I.default)(this,K);var Q=(0,N.default)(this,J.call(this));return Q._fragmentSource=T(230),Q._lastClarity=null,Q._blurredRenderTarget=new z.Engine.CanvasRenderTarget(100,100,1),Q;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getDimensions(),ae=!this._blurredRenderTarget.getDimensions().equals(oe);this._blurredRenderTarget.setPixelRatio(ee.getPixelRatio()),this._blurredRenderTarget.resizeTo(ee.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new z.Engine.RenderTexture($,ee.getWidth(),ee.getHeight(),ee.getPixelRatio())),ae&&this._blurImage(ee),this._applyClarity(ee,te);},K.prototype._blurImage=function($){var ee=$.getCanvas(),te=$.getContext(),re=te.getImageData(0,0,ee.width,ee.height);H.default.stackBlurCanvasRGBA(re,0,0,ee.width,ee.height,1);var oe=this._blurredRenderTarget.getContext();oe.putImageData(re,0,0);},K.prototype._applyClarity=function($,ee){for(var te=ee.getContext(),re=$.getCanvas(),oe=$.getContext(),ae=this._blurredRenderTarget.getContext(),ne=this._options.clarity,ie=oe.getImageData(0,0,re.width,re.height),le=ie.data,de=ae.getImageData(0,0,re.width,re.height).data,se=Math.max(0.2*this._options.clarity,0),pe=1-se,ue=1+ne,_e=1-(1+ne),fe=0;fe<4*(re.width*re.height);fe+=4){var ye=de[fe]*_e+le[fe]*ue,ge=de[fe+1]*_e+le[fe+1]*ue,ce=de[fe+2]*_e+le[fe+2]*ue,he=(0.2125*ye+0.7154*ge+0.0721*ce)*se;le[fe]=ye*pe+he,le[fe+1]=ge*pe+he,le[fe+2]=ce*pe+he;}te.putImageData(ie,0,0);},K;}(z.Engine.Filter);Z.prototype.availableOptions={clarity:{type:Y.NUMBER,default:0,uniformType:X.FLOAT},texSize:{type:Y.VECTOR2,default:new z.Vector2(100,100),uniformType:X.FLOAT2}},_.default=Z;},function(u,_,T){"use strict";'use strict';function R(K){return K&&K.__esModule?K:{default:K};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(10),H=R(W),Y=T(7),X=R(Y),Z=z.Constants.OptionType,J=function(K){function Q(){return(0,I.default)(this,Q),(0,N.default)(this,K.apply(this,arguments));}return(0,V.default)(Q,K),Q.prototype._render=function(ee){this._sprite.setRotation(0);var te=ee.getDimensions(),re=this._options,oe=re.start,ae=re.rotation,ne=re.scale,ie=re.textureScale,le=ne*ie,de=te.clone().multiply(ie);return this._sprite.setAnchor(0.5,0.5),this._sprite.setRotation(ae),this._sprite.setScale(le,le),this._sprite.setPosition(de.clone().divide(2).subtract(oe.clone().multiply(de))),this._renderTexture.render(this._container),X.default.resolve();},Q.prototype.getNewDimensions=function(ee){var te=this._options,re=te.start,oe=te.end,ae=te.textureScale;return ee.clone().multiply(ae).multiply(oe.clone().subtract(re)).ceil();},Q.prototype.flip=function(ee){var te=this._options,re=te.start,oe=te.end,ae=re.clone();'horizontal'===ee?(re.set(1-oe.x,re.y),oe.set(1-ae.x,oe.y)):'vertical'===ee&&(re.set(re.x,1-oe.y),oe.set(oe.x,1-ae.y));},Q.prototype.rotate=function(ee){var te=this._options,re=te.start,oe=te.end,ae=(ee+360)%360,ne=re.clone();90==ae?(re.set(1-oe.y,ne.x),oe.set(1-ne.y,oe.x)):270==ae&&(re.set(ne.y,1-oe.x),oe.set(oe.y,1-ne.x));},Q;}(H.default);J.identifier='crop',J.prototype.availableOptions={start:{type:Z.VECTOR2,default:new z.Vector2(0,0)},end:{type:Z.VECTOR2,default:new z.Vector2(1,1)},scale:{type:Z.NUMBER,default:1},textureScale:{type:Z.NUMBER,default:1},rotation:{type:Z.NUMBER,default:0}},_.default=J;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(7),H=R(W),Y=T(20),X=R(Y),Z=T(10),J=R(Z),K=z.Constants.OptionType,Q=function($){function ee(){return(0,I.default)(this,ee),(0,N.default)(this,$.apply(this,arguments));}return(0,V.default)(ee,$),ee.prototype._getRotation=function(){var re=0;switch(this.getTags().Orientation){case 7:case 8:re=-90;break;case 3:case 4:re=-180;break;case 5:case 6:re=90;}return re;},ee.prototype._getFlipVertically=function(){var re=this.getTags(),oe=re.Orientation;return-1!==[5,7].indexOf(oe);},ee.prototype._getFlipHorizontally=function(){var re=this.getTags(),oe=re.Orientation;return-1!==[2,4].indexOf(oe);},ee.prototype._getFinalOptions=function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()};},ee.prototype._render=function(){var oe=this._getFinalOptions(),ae=oe.rotation%360,ne=ae*(Math.PI/180);this._sprite.setScale(oe.flipHorizontally?-1:1,oe.flipVertically?-1:1),this._sprite.setRotation(ne),this._sprite.setAnchor(0.5,0.5),this._sprite.updateTransform();var ie=this._sprite.getBounds();return this._renderTexture.resizeTo(new X.default(ie.width,ie.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),H.default.resolve();},ee.prototype.getNewDimensions=function(re){var oe=this._getFinalOptions();return re=re.clone(),oe.rotation%180&&re.flip(),re;},ee;}(J.default);Q.identifier='exif-orientation',Q.prototype.availableOptions={tags:{type:K.OBJECT,default:{}}},_.default=Q;},function(u,_,T){"use strict";'use strict';function R(K){return K&&K.__esModule?K:{default:K};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(10),H=R(W),Y=T(79),X=R(Y),Z=z.Constants.OptionType,J=function(K){function Q(){return(0,I.default)(this,Q),(0,N.default)(this,K.apply(this,arguments));}return(0,V.default)(Q,K),Q.prototype._render=function(ee){return this._selectedFilter.render(this._sdk,ee,this._renderTexture);},Q.prototype.render=function(ee){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?z.Promise.resolve(ee):K.prototype.render.call(this,ee);},Q.prototype.setDirtyForRenderer=function(ee,te){K.prototype.setDirtyForRenderer.call(this,ee,te),this._selectedFilter.setDirtyForRenderer(ee,te);},Q.prototype.disposeRenderTextures=function(){K.prototype.disposeRenderTextures.call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures();},Q.prototype.dispose=function(){K.prototype.dispose.call(this),this._selectedFilter&&this._selectedFilter.dispose();},Q;}(H.default);J.identifier='filter',J.prototype.availableOptions={intensity:{type:Z.NUMBER,default:1,setter:function(Q){return this._selectedFilter&&this._selectedFilter.setIntensity(Q),Q;}},filter:{type:Z.OBJECT,default:new X.default(),setter:function(Q){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=Q,'undefined'!=typeof this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),Q;}}},_.default=J;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Contrast({contrast:0.63})),te._stack.push(new X.Brightness({brightness:0.12})),te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='a15',Z.displayName='15',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Desaturation({desaturation:0.5})),te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='breeze',Z.displayName='Breeze',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Grayscale()),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='bw',Z.displayName='B&W',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Grayscale()),te._stack.push(new X.Contrast({contrast:1.5})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='bwhard',Z.displayName='1920',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='celsius',Z.displayName='Celsius',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='chest',Z.displayName='Chest',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='fixie',Z.displayName='Fixie',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Saturation({saturation:1.35})),te._stack.push(new X.Contrast({contrast:1.1})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='food',Z.displayName='Food',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='fridge',Z.displayName='Fridge',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='front',Z.displayName='Front',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Contrast({contrast:1.1})),te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='glam',Z.displayName='Glam',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Gobblin()),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='gobblin',Z.displayName='Gobblin',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),te._stack.push(new X.Saturation({saturation:0.9})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='k1',Z.displayName='K1',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(Q){if(Q&&Q.__esModule)return Q;var $={};if(null!=Q)for(var ee in Q)Object.prototype.hasOwnProperty.call(Q,ee)&&($[ee]=Q[ee]);return $.default=Q,$;}(Y),Z=T(11),J=M(Z),K=function(Q){function $(){(0,U.default)(this,$);for(var ee=arguments.length,te=Array(ee),re=0;re<ee;re++)te[re]=arguments[re];var oe=(0,G.default)(this,Q.call.apply(Q,[this].concat(te)));return oe._stack.push(new X.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),oe._stack.push(new X.SoftColorOverlay({color:new J.default(40/255,40/255,40/255)})),oe;}return(0,z.default)($,Q),$;}(H.default);K.identifier='k2',K.displayName='K2',_.default=K;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Saturation({saturation:0.5})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='k6',Z.displayName='K6',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),te._stack.push(new X.Saturation({saturation:0.7})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='kdynamic',Z.displayName='KDynamic',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Desaturation({desaturation:0.4})),te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='lenin',Z.displayName='Lenin',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='lomo',Z.displayName='Lomo',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(3),H=T(4),Y=M(H),X=T(5),Z=function(Q){if(Q&&Q.__esModule)return Q;var $={};if(null!=Q)for(var ee in Q)Object.prototype.hasOwnProperty.call(Q,ee)&&($[ee]=Q[ee]);return $.default=Q,$;}(X),J=W.Constants.OptionType,K=function(Q){function $(){(0,U.default)(this,$);for(var ee=arguments.length,te=Array(ee),re=0;re<ee;re++)te[re]=arguments[re];var oe=(0,G.default)(this,Q.call.apply(Q,[this].concat(te)));return oe._lutPrimitive=new Z.LookupTableImage({image:oe._options.image}),oe._stack.push(oe._lutPrimitive),oe;}return(0,z.default)($,Q),$;}(Y.default);K.prototype.availableOptions={image:{type:J.IMAGE,required:!0,setter:function($){return this._lutPrimitive&&this._lutPrimitive.setImage($),this.setDirty(!0),$;}}},K.identifier='lut',K.displayName='Lookup Table',_.default=K;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='mellow',Z.displayName='Mellow',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(ee){return ee&&ee.__esModule?ee:{default:ee};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(ee){if(ee&&ee.__esModule)return ee;var te={};if(null!=ee)for(var re in ee)Object.prototype.hasOwnProperty.call(ee,re)&&(te[re]=ee[re]);return te.default=ee,te;}(Y),Z=T(34),J=M(Z),K=T(11),Q=M(K),$=function(ee){function te(){(0,U.default)(this,te);for(var re=arguments.length,oe=Array(re),ae=0;ae<re;ae++)oe[ae]=arguments[ae];var ne=(0,G.default)(this,ee.call.apply(ee,[this].concat(oe))),ie=new J.default(0.8158218291630716,0,0,0,-0.01779810181190647,0,0.8098360655737704,0,0,0.0916393442622953,0,0,0.4596336773932402,0,0.12760574782432707,0,0,0,1,0);ne._stack.push(new X.ColorMatrixPrimitive({colormatrix:ie}));var le=new Q.default(0.8,0.6,0.9);return ne._stack.push(new X.Gamma({gamma:le})),ne;}return(0,z.default)(te,ee),te;}(H.default);$.identifier='metal',$.displayName='Metal',_.default=$;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),te._stack.push(new X.Glow()),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='morning',Z.displayName='Morning',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]}})),te._stack.push(new X.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]]})),te._stack.push(new X.Desaturation({desaturation:0.65})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='orchid',Z.displayName='Orchid',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),te._stack.push(new X.Saturation({saturation:0.8})),te._stack.push(new X.Contrast({contrast:1.5})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='pola',Z.displayName='Pola SX',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),te._stack.push(new X.Saturation({saturation:0.8})),te._stack.push(new X.Contrast({contrast:1.5})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='pola669',Z.displayName='Pola 669',_.default=Z;},function(u,_,T){"use strict";'use strict';function R(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(7),H=R(W),Y=z.Constants.OptionType,X=z.Constants.UniformType,Z=z.Constants.RendererType,J=function(Q){function $(){(0,I.default)(this,$);var ee=(0,N.default)(this,Q.call(this));return ee._fragmentSource=T(228),ee;}return(0,V.default)($,Q),$.prototype._applyCanvas=function(te,re,oe){var ae=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ne=re.getCanvas(),ie=oe.getContext(),le=this._options.filteredCanvas;ie.save(),ie.drawImage(ne,0,0),ie.globalAlpha=this._options.intensity,ie.drawImage(le,0,0),ie.restore();},$;}(z.Engine.Filter);J.prototype.availableOptions={filteredImage:{type:Y.NUMBER,default:1,uniformType:X.INT},filteredCanvas:{type:Y.OBJECT,default:null},intensity:{type:Y.NUMBER,default:1,uniformType:X.FLOAT}};var K=function(){function Q(){var $=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;(0,I.default)(this,Q),this._intensity=$,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new z.Engine.Container(),this._sprite=new z.Engine.Sprite(),this._container.addChild(this._sprite),this._blendFilter=new J();}return Q.prototype.push=function(ee){this._stack.push(ee);},Q.prototype.clear=function(){this._stack=[];},Q.prototype.render=function(ee,te,re){if(0===this._stack.length)return H.default.resolve();var oe=ee.getRenderer();this._sprite.setTexture(te);var ae=this._renderTextures[oe.id];if(!ae){var ne=ee.getSprite().getTexture().getFrame();ae=new z.Engine.RenderTexture(ee.getRenderer(),ne.width,ne.height),this._renderTextures[oe.id]=ae;}var ie=re.getDimensions();ae.resizeTo(ie);var le=this.isDirtyForRenderer(oe);if(le){this._stack.forEach(function(pe){pe.update(ee);});var de=this._stack.map(function(pe){return pe.getFilter();});this._sprite.setFilters(de),ae.render(this._container),this.setDirtyForRenderer(!1,oe);}if(this._blendFilter.setIntensity(this._intensity),oe.isOfType(Z.CANVAS))this._blendFilter.setFilteredCanvas(ae.getRenderTarget().getCanvas());else if(oe.isOfType(Z.WEBGL)){var se=ae.getBaseTexture();se.setGLUnit(this._blendFilter.getFilteredImage()),oe.updateTexture(se,!1);}return this._sprite.setFilters([this._blendFilter]),re.clear(z.Color.TRANSPARENT),re.render(this._container),le&&this.disposeRenderTextures(),H.default.resolve(re);},Q.prototype.setIntensity=function(ee){this._intensity=ee;},Q.prototype.isDirtyForRenderer=function(ee){return ee.id in this._dirtiness||(this._dirtiness[ee.id]=!0),this._dirtiness[ee.id];},Q.prototype.setDirtyForRenderer=function(ee,te){this._dirtiness[te.id]=ee;},Q.prototype.setDirty=function(ee){for(var te in this._dirtiness)this._dirtiness[te]=ee;},Q.prototype.disposeRenderTextures=function(){for(var ee in this._renderTextures)this._renderTextures[ee].dispose(),delete this._renderTextures[ee];},Q.prototype.dispose=function(){this.disposeRenderTextures(),this._stack.forEach(function(ee){return ee.dispose();}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose();},Q;}();_.default=K;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(8),H=R(W),Y=T(9),X=function(J){function K(){(0,I.default)(this,K);var Q=(0,N.default)(this,J.call(this));return Q._fragmentSource=T(232),Q;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getCanvas(),ae=ee.getContext(),ne=te.getContext(),ie=ae.getImageData(0,0,oe.width,oe.height),le=this._options.brightness;if(0!==le){le*=255;for(var de=0,se;de<oe.width*oe.height;de++)se=4*de,ie.data[se]+=le,ie.data[se+1]+=le,ie.data[se+2]+=le;ne.putImageData(ie,0,0);}},K;}(z.Engine.Filter);X.prototype.availableOptions={brightness:{type:Y.OptionType.NUMBER,default:0,uniformType:Y.UniformType.FLOAT}};var Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._filter=new X(),te;}return(0,V.default)(K,J),K.prototype.update=function(){this._filter.setBrightness(this._options.brightness);},K;}(H.default);Z.prototype.availableOptions=X.prototype.availableOptions,_.default=Z;},function(u,_,T){"use strict";'use strict';function R(te){return te&&te.__esModule?te:{default:te};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(8),H=R(W),Y=T(11),X=R(Y),Z=T(34),J=R(Z),K=z.Constants.OptionType,Q=z.Constants.UniformType,$=function(te){function re(){(0,I.default)(this,re);var oe=(0,N.default)(this,te.call(this));return oe._fragmentSource=T(233),oe;}return(0,V.default)(re,te),re.prototype._applyCanvas=function(ae,ne,ie){for(var le=3<arguments.length&&void 0!==arguments[3]&&arguments[3],de=ne.getCanvas(),se=ne.getContext(),pe=ie.getContext(),ue=se.getImageData(0,0,de.width,de.height),_e=this._options.colormatrix,fe=new X.default(0,0,0,0),ye=0,ge;ye<de.width*de.height;ye++)ge=4*ye,fe.r=ue.data[ge],fe.g=ue.data[ge+1],fe.b=ue.data[ge+2],fe.a=ue.data[ge+3],fe=_e.apply(fe),ue.data[ge]=fe.r,ue.data[ge+1]=fe.g,ue.data[ge+2]=fe.b,ue.data[ge+3]=fe.a;pe.putImageData(ue,0,0);},re;}(z.Engine.Filter);$.prototype.availableOptions={colormatrix:{type:K.COLOR_MATRIX,default:new J.default(),uniformType:Q.MAT4}};var ee=function(te){function re(){(0,I.default)(this,re);for(var oe=arguments.length,ae=Array(oe),ne=0;ne<oe;ne++)ae[ne]=arguments[ne];var ie=(0,N.default)(this,te.call.apply(te,[this].concat(ae)));return ie._filter=new $(),ie;}return(0,V.default)(re,te),re.prototype.update=function(){this._filter.setColormatrix(this._options.colormatrix);},re;}(H.default);ee.prototype.availableOptions=$.prototype.availableOptions,_.default=ee;},function(u,_,T){"use strict";'use strict';function R(K){return K&&K.__esModule?K:{default:K};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(8),H=R(W),Y=z.Constants.OptionType,X=z.Constants.UniformType,Z=function(K){function Q(){(0,I.default)(this,Q);var $=(0,N.default)(this,K.call(this));return $._fragmentSource=T(234),$;}return(0,V.default)(Q,K),Q.prototype._applyCanvas=function(ee,te,re){var oe=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ae=te.getCanvas(),ne=te.getContext(),ie=re.getContext(),le=ne.getImageData(0,0,ae.width,ae.height),de=this._options.contrast;if(1!==de){for(var se=0,pe;se<ae.width*ae.height;se++)pe=4*se,le.data[pe]=(le.data[pe]-127)*de+127,le.data[pe+1]=(le.data[pe+1]-127)*de+127,le.data[pe+2]=(le.data[pe+2]-127)*de+127;ie.putImageData(le,0,0);}},Q;}(z.Engine.Filter);Z.prototype.availableOptions={contrast:{type:Y.NUMBER,default:1,uniformType:X.FLOAT}};var J=function(K){function Q(){(0,I.default)(this,Q);for(var $=arguments.length,ee=Array($),te=0;te<$;te++)ee[te]=arguments[te];var re=(0,N.default)(this,K.call.apply(K,[this].concat(ee)));return re._filter=new Z(),re;}return(0,V.default)(Q,K),Q.prototype.update=function(){this._filter.setContrast(this._options.contrast);},Q;}(H.default);J.prototype.availableOptions=Z.prototype.availableOptions,_.default=J;},function(u,_,T){"use strict";'use strict';function R(K){return K&&K.__esModule?K:{default:K};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(12),W=R(z),H=T(8),Y=R(H),X=T(9),Z=function(K){function Q(){(0,I.default)(this,Q);var $=(0,N.default)(this,K.call(this));return $._fragmentSource=T(235),$;}return(0,V.default)(Q,K),Q.prototype._applyCanvas=function(ee,te,re){for(var oe=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ae=te.getCanvas(),ne=te.getContext(),ie=re.getContext(),le=ne.getImageData(0,0,ae.width,ae.height),de=this._options.desaturation,se=0;se<ae.width*ae.height;se++){var pe=4*se,ue=0.3*le.data[pe]+0.59*le.data[pe+1]+0.11*le.data[pe+2];le.data[pe]=ue*(1-de)+le.data[pe]*de,le.data[pe+1]=ue*(1-de)+le.data[pe+1]*de,le.data[pe+2]=ue*(1-de)+le.data[pe+2]*de;}ie.putImageData(le,0,0);},Q;}(W.default.Filter);Z.prototype.availableOptions={desaturation:{type:X.OptionType.NUMBER,default:1,uniformType:X.UniformType.FLOAT}};var J=function(K){function Q(){(0,I.default)(this,Q);for(var $=arguments.length,ee=Array($),te=0;te<$;te++)ee[te]=arguments[te];var re=(0,N.default)(this,K.call.apply(K,[this].concat(ee)));return re._filter=new Z(),re;}return(0,V.default)(Q,K),Q.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation);},Q;}(Y.default);J.prototype.availableOptions=Z.prototype.availableOptions,_.default=J;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(8),H=R(W),Y=T(11),X=R(Y),Z=z.Constants.OptionType,J=z.Constants.UniformType,K=function($){function ee(){(0,I.default)(this,ee);var te=(0,N.default)(this,$.call(this));return te._fragmentSource=T(236),te;}return(0,V.default)(ee,$),ee.prototype._applyCanvas=function(re,oe,ae){for(var ne=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ie=oe.getCanvas(),le=oe.getContext(),de=ae.getContext(),se=le.getImageData(0,0,ie.width,ie.height),pe=this._options.gamma,ue=new Float32Array(256),_e=0;256>_e;_e++)ue[_e]=255.0*Math.pow(_e/255.0,pe.r);for(var fe=new Float32Array(256),ye=0;256>ye;ye++)fe[ye]=255.0*Math.pow(ye/255.0,pe.g);for(var ge=new Float32Array(256),ce=0;256>ce;ce++)ge[ce]=255.0*Math.pow(ce/255.0,pe.b);for(var me=0,he;me<ie.width*ie.height;me++)he=4*me,se.data[he]=ue[se.data[he]],se.data[he+1]=fe[se.data[he+1]],se.data[he+2]=ge[se.data[he+2]];de.putImageData(se,0,0);},ee;}(z.Engine.Filter);K.prototype.availableOptions={gamma:{type:Z.COLOR,default:X.default.WHITE,uniformType:J.FLOAT3}};var Q=function($){function ee(){(0,I.default)(this,ee);for(var te=arguments.length,re=Array(te),oe=0;oe<te;oe++)re[oe]=arguments[oe];var ae=(0,N.default)(this,$.call.apply($,[this].concat(re)));return ae._filter=new K(),ae;}return(0,V.default)(ee,$),ee.prototype.update=function(){this._filter.setGamma(this._options.gamma);},ee;}(H.default);Q.prototype.availableOptions=K.prototype.availableOptions,_.default=Q;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(8),W=R(z),H=T(11),Y=R(H),X=T(3),Z=X.Constants.OptionType,J=X.Constants.UniformType,K=function($){function ee(){(0,I.default)(this,ee);var te=(0,N.default)(this,$.call(this));return te._fragmentSource=T(237),te;}return(0,V.default)(ee,$),ee.prototype._applyCanvas=function(re,oe,ae){for(var ne=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ie=oe.getCanvas(),le=oe.getContext(),de=ae.getContext(),se=le.getImageData(0,0,ie.width,ie.height),pe=this._options.color,_e=0,ue;_e<ie.width;_e++)for(var fe=0;fe<ie.height;fe++){var ye=4*(ie.width*fe+_e),ge=_e/ie.width,ce=fe/ie.height,me=(ge-0.5)/0.75,he=(ce-0.5)/0.75;ue=1-(me*me+he*he),ue=Math.min(Math.max(ue,0.1),1),se.data[ye]*=ue*pe.r,se.data[ye+1]=se.data[ye+1]*(ue*pe.g),se.data[ye+2]=se.data[ye+2]*(ue*pe.b),se.data[ye+3]=255;}de.putImageData(se,0,0);},ee;}(X.Engine.Filter);K.prototype.availableOptions={color:{type:Z.COLOR,default:Y.default.WHITE,uniformType:J.FLOAT3}};var Q=function($){function ee(){(0,I.default)(this,ee);for(var te=arguments.length,re=Array(te),oe=0;oe<te;oe++)re[oe]=arguments[oe];var ae=(0,N.default)(this,$.call.apply($,[this].concat(re)));return ae._filter=new K(),ae;}return(0,V.default)(ee,$),ee.prototype.update=function(){this._filter.setColor(this._options.color);},ee;}(W.default);Q.prototype.availableOptions=K.prototype.availableOptions,_.default=Q;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(12),W=R(z),H=T(8),Y=R(H),X=function(J){function K(){(0,I.default)(this,K);var Q=(0,N.default)(this,J.call(this));return Q._fragmentSource=T(238),Q;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){for(var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getCanvas(),ae=ee.getContext(),ne=te.getContext(),ie=ae.getImageData(0,0,oe.width,oe.height),le=0;le<oe.width;le++)for(var de=0,se;de<oe.height;de++)se=4*(oe.width*de+le),ie.data[se+2]=0.33*ie.data[se+1],ie.data[se]*=0.6,ie.data[se+2]+=0.33*ie.data[se],ie.data[se+1]=0.7*ie.data[se+1],ie.data[se+3]=255;ne.putImageData(ie,0,0);},K;}(W.default.Filter),Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._filter=new X(),te;}return(0,V.default)(K,J),K;}(Y.default);_.default=Z;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(12),W=R(z),H=T(8),Y=R(H),X=function(J){function K(){(0,I.default)(this,K);var Q=(0,N.default)(this,J.call(this));return Q._fragmentSource=T(239),Q;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){for(var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getCanvas(),ae=ee.getContext(),ne=te.getContext(),ie=ae.getImageData(0,0,oe.width,oe.height),le=0;le<oe.width;le++)for(var de=0;de<oe.height;de++){var se=4*(oe.width*de+le),pe=0.2125*ie.data[se]+0.7154*ie.data[se+1]+0.0721*ie.data[se+2];ie.data[se]=pe,ie.data[se+1]=pe,ie.data[se+2]=pe;}ne.putImageData(ie,0,0);},K;}(W.default.Filter),Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._filter=new X(),te;}return(0,V.default)(K,J),K;}(Y.default);_.default=Z;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(12),H=R(W),Y=T(8),X=R(Y),Z=T(9),J=3,K=function($){function ee(){(0,I.default)(this,ee);var te=(0,N.default)(this,$.call(this));return te._precomputeQuads(),te._fragmentSource=T(240),te;}return(0,V.default)(ee,$),ee.prototype._precomputeQuads=function(){this._quads=[];for(var re=0;256>re;re++){var oe=63*(re/255),ae=new z.Vector2();ae.y=0|0.125*(0|oe),ae.x=(0|oe)-8*ae.y,this._quads.push(ae);}},ee.prototype._applyCanvas=function(re,oe,ae){for(var ne=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ie=oe.getCanvas(),le=oe.getContext(),de=ae.getContext(),se=this._options.lookupTableImage,pe=this._createImageCanvas(se),ue=pe.getContext('2d'),_e=le.getImageData(0,0,ie.width,ie.height),fe=ue.getImageData(0,0,se.width,se.height),ye=new z.Vector2(),ge=0;ge<4*(ie.width*ie.height);ge+=4){var ce=_e.data[ge],me=_e.data[ge+1],he=_e.data[ge+2],xe=_e.data[ge+3]/255,Te=this._quads[he],ve=64;ye.x=Te.x*ve,ye.y=Te.y*ve,ye.x+=Math.floor(ce/4),ye.y+=Math.floor(me/4);var be=0|4*(se.width*ye.y+ye.x),Ce=fe.data[be];Ce=ce*(1-xe)+Ce*xe;var Re=fe.data[be+1];Re=me*(1-xe)+Re*xe;var Ee=fe.data[be+2];Ee=he*(1-xe)+Ee*xe,_e.data[ge]=Ce,_e.data[ge+1]=Re,_e.data[ge+2]=Ee;}de.putImageData(_e,0,0);},ee.prototype._createImageCanvas=function(re){var oe=z.Utils.createCanvas();oe.width=re.width,oe.height=re.height;var ae=oe.getContext('2d');return ae.drawImage(re,0,0),oe;},ee;}(H.default.Filter);K.prototype.availableOptions={lookupTable:{type:Z.OptionType.NUMBER,default:J,uniformType:Z.UniformType.INT},lookupTableImage:{type:Z.OptionType.IMAGE,uniformType:null}};var Q=function($){function ee(){(0,I.default)(this,ee);for(var te=arguments.length,re=Array(te),oe=0;oe<te;oe++)re[oe]=arguments[oe];var ae=(0,N.default)(this,$.call.apply($,[this].concat(re)));return ae._filter=new K(),ae._textures={},ae;}return(0,V.default)(ee,$),ee.prototype.update=function(re){var oe=re.getRenderer();oe.isOfType(Z.RendererType.WEBGL)?this._updateWebGLTexture(re):oe.isOfType(Z.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);},ee.prototype._updateWebGLTexture=function(re){var oe=re.getRenderer(),ae=oe.id;this._textures[ae]||(this._textures[ae]=new H.default.BaseTexture());var ne=this._textures[ae];ne.setSource(this._options.image),ne.setGLUnit(J),oe.updateTexture(ne);},ee.prototype.dispose=function(){for(var re in $.prototype.dispose.call(this),this._textures)delete this._textures[re];},ee;}(X.default);Q.prototype.availableOptions={image:{type:Z.OptionType.IMAGE}},_.default=Q;},function(u,_,T){"use strict";'use strict';function R(K){return K&&K.__esModule?K:{default:K};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(8),W=R(z),H=T(3),Y=H.Constants.OptionType,X=H.Constants.UniformType,Z=function(K){function Q(){(0,I.default)(this,Q);var $=(0,N.default)(this,K.call(this));return $._fragmentSource=T(242),$;}return(0,V.default)(Q,K),Q.prototype._applyCanvas=function(ee,te,re){for(var oe=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ae=te.getCanvas(),ne=te.getContext(),ie=re.getContext(),le=ne.getImageData(0,0,ae.width,ae.height),de=this._options.saturation,se=0;se<ae.width;se++)for(var pe=0;pe<ae.height;pe++){var ue=4*(ae.width*pe+se),_e=0.2125*le.data[ue]+0.7154*le.data[ue+1]+0.0721*le.data[ue+2];le.data[ue]=_e*(1-de)+le.data[ue]*de,le.data[ue+1]=_e*(1-de)+le.data[ue+1]*de,le.data[ue+2]=_e*(1-de)+le.data[ue+2]*de;}ie.putImageData(le,0,0);},Q;}(H.Engine.Filter);Z.prototype.availableOptions={saturation:{type:Y.NUMBER,default:0,uniformType:X.FLOAT}};var J=function(K){function Q(){(0,I.default)(this,Q);for(var $=arguments.length,ee=Array($),te=0;te<$;te++)ee[te]=arguments[te];var re=(0,N.default)(this,K.call.apply(K,[this].concat(ee)));return re._filter=new Z(),re;}return(0,V.default)(Q,K),Q.prototype.update=function(){this._filter.setSaturation(this._options.saturation);},Q;}(W.default);J.prototype.availableOptions=Z.prototype.availableOptions,_.default=J;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(8),W=R(z),H=T(11),Y=R(H),X=T(3),Z=X.Constants.OptionType,J=X.Constants.UniformType,K=function($){function ee(){(0,I.default)(this,ee);var te=(0,N.default)(this,$.call(this));return te._fragmentSource=T(243),te;}return(0,V.default)(ee,$),ee.prototype._applyCanvas=function(re,oe,ae){for(var ne=3<arguments.length&&void 0!==arguments[3]&&arguments[3],ie=oe.getCanvas(),le=oe.getContext(),de=ae.getContext(),se=le.getImageData(0,0,ie.width,ie.height),pe=0;pe<ie.width;pe++)for(var ue=0,_e;ue<ie.height;ue++)_e=4*(ie.width*ue+pe),se.data[_e]=Math.max(255*this._options.color.r,se.data[_e]),se.data[_e+1]=Math.max(255*this._options.color.g,se.data[_e+1]),se.data[_e+2]=Math.max(255*this._options.color.b,se.data[_e+2]);de.putImageData(se,0,0);},ee;}(X.Engine.Filter);K.prototype.availableOptions={color:{type:Z.COLOR,default:Y.default.WHITE,uniformType:J.FLOAT3}};var Q=function($){function ee(){(0,I.default)(this,ee);for(var te=arguments.length,re=Array(te),oe=0;oe<te;oe++)re[oe]=arguments[oe];var ae=(0,N.default)(this,$.call.apply($,[this].concat(re)));return ae._filter=new K(),ae;}return(0,V.default)(ee,$),ee.prototype.update=function(){this._filter.setColor(this._options.color);},ee;}(W.default);Q.prototype.availableOptions=K.prototype.availableOptions,_.default=Q;},function(u,_,T){"use strict";'use strict';function R(Z){return Z&&Z.__esModule?Z:{default:Z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(80),W=R(z),H=T(3),Y=H.Constants.OptionType,X=function(Z){function J(){(0,I.default)(this,J);for(var K=arguments.length,Q=Array(K),$=0;$<K;$++)Q[$]=arguments[$];var ee=(0,N.default)(this,Z.call.apply(Z,[this].concat(Q)));return ee._options.rgbControlPoints||(ee._options.rgbControlPoints={red:ee._options.controlPoints,green:ee._options.controlPoints,blue:ee._options.controlPoints}),ee._updateLookupTable(),ee;}return(0,V.default)(J,Z),J.prototype._updateLookupTable=function(){var Q=this._calculateSplineCurve(this._options.rgbControlPoints.red),$=this._calculateSplineCurve(this._options.rgbControlPoints.green),ee=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(Q,$,ee);},J.prototype._buildLookupTable=function(Q,$,ee){for(var te=[],re=0;256>re;re++)te.push(Math.min(Math.max(re+Q[re],0),255)),te.push(Math.min(Math.max(re+$[re],0),255)),te.push(Math.min(Math.max(re+ee[re],0),255)),te.push(255);return te;},J.prototype._calculateSplineCurve=function(Q){Q=Q.sort(function(ie,le){return ie[0]>le[0];});var $=this._getSplineCurve(Q),ee=$[0],te;if(0<ee[0])for(te=0;te<ee[0];te++)$.unshift([0,0]);var re=[];for(te=0;te<$.length;te++){var oe=$[te],ae=[oe[0],oe[0]],ne=Math.sqrt(Math.pow(ae[0]-oe[0],2)+Math.pow(ae[1]-oe[1],2));ae[1]>oe[1]&&(ne=-ne),re.push(ne);}return re;},J.prototype._getSplineCurve=function(Q){var $=this._secondDerivative(Q),ee=$.length,te=[],re;for(re=0;re<ee;re++)te[re]=$[re];var oe=[];for(re=0;re<ee-1;re++)for(var ae=Q[re],ne=Q[re+1],ie=ae[0];ie<ne[0];ie++){var le=(ie-ae[0])/(ne[0]-ae[0]),de=1-le,se=le,pe=ne[0]-ae[0],ue=de*ae[1]+se*ne[1]+pe*pe/6*((de*de*de-de)*te[re]+(se*se*se-se)*te[re+1]);255<ue?ue=255:0>ue&&(ue=0),oe.push([ie,ue]);}return 255===oe.length&&oe.push(Q[Q.length-1]),oe;},J.prototype._secondDerivative=function(Q){var $=Q.length;if(0>=$||1===$)return null;var ee=[],te=[],re,oe;for(ee[0]=[0,1,0],re=1;re<$-1;re++){var ae=Q[re-1],ne=Q[re],ie=Q[re+1];ee[re]=ee[re]||[],ee[re][0]=(ne[0]-ae[0])/6,ee[re][1]=(ie[0]-ae[0])/3,ee[re][2]=(ie[0]-ne[0])/6,te[re]=(ie[1]-ne[1])/(ie[0]-ne[0])-(ne[1]-ae[1])/(ne[0]-ae[0]);}for(te[0]=0,te[$-1]=0,ee[$-1]=[0,1,0],re=1;re<$;re++)oe=ee[1][0]/ee[re-1][1],ee[re][1]-=oe*ee[re-1][2],ee[re][0]=0,te[re]-=oe*te[re-1];for(re=$-2;0<re;re--)oe=ee[re][2]/ee[re+1][1],ee[re][1]-=oe*ee[re+1][0],ee[re][2]=0,te[re]-=oe*te[re+1];var le=[];for(re=0;re<$;re++)le[re]=te[re]/ee[re][1];return le;},J;}(W.default);X.prototype.availableOptions={rgbControlPoints:{type:Y.OBJECT},controlPoints:{type:Y.ARRAY,default:[]}},_.default=X;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(12),W=R(z),H=T(8),Y=R(H),X=function(J){function K(){(0,I.default)(this,K);var Q=(0,N.default)(this,J.call(this));return Q._fragmentSource=T(244),Q;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){for(var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getCanvas(),ae=ee.getContext(),ne=te.getContext(),ie=ae.getImageData(0,0,oe.width,oe.height),le=0;le<oe.width;le++)for(var de=0;de<oe.height;de++){var se=4*(oe.width*de+le),pe=0.3*(ie.data[se]/255)+0.3*(ie.data[se+1]/255)+0.3*(ie.data[se+2]/255);pe-=0.2,pe=Math.max(0,Math.min(1,pe)),pe+=0.15,pe*=1.4,pe*=255,ie.data[se]=pe,ie.data[se+1]=pe,ie.data[se+2]=pe;}ne.putImageData(ie,0,0);},K;}(W.default.Filter),Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._filter=new X(),te;}return(0,V.default)(K,J),K;}(Y.default);_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.Desaturation({desaturation:0.65})),te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='quozi',Z.displayName='Quozi',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),te._stack.push(new X.Glow()),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='semired',Z.displayName='Semired',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]}})),te._stack.push(new X.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]]})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='sunny',Z.displayName='Sunny',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='texas',Z.displayName='Texas',_.default=Z;},function(u,_,T){"use strict";'use strict';function M(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var I=T(0),U=M(I),N=T(2),G=M(N),V=T(1),z=M(V),W=T(4),H=M(W),Y=T(5),X=function(J){if(J&&J.__esModule)return J;var K={};if(null!=J)for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&(K[Q]=J[Q]);return K.default=J,K;}(Y),Z=function(J){function K(){(0,U.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,G.default)(this,J.call.apply(J,[this].concat($)));return te._stack.push(new X.X400()),te;}return(0,z.default)(K,J),K;}(H.default);Z.identifier='x400',Z.displayName='X400',_.default=Z;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(36),H=R(W),Y=z.Constants.OptionType,X=z.Constants.UniformType,Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._fragmentSource=T(225),te._lastBlurRadius=null,te._lastGradientRadius=null,te._lastStart=new z.Vector2(),te._lastEnd=new z.Vector2(),te._blurredRenderTarget=new z.Engine.CanvasRenderTarget(100,100,1),te._maskRenderTarget=new z.Engine.CanvasRenderTarget(100,100,1),te;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getDimensions(),ae=!this._blurredRenderTarget.getDimensions().equals(oe);this._blurredRenderTarget.setPixelRatio(ee.getPixelRatio()),this._blurredRenderTarget.resizeTo(ee.getDimensions()),this._maskRenderTarget.setPixelRatio(ee.getPixelRatio()),this._maskRenderTarget.resizeTo(ee.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new z.Engine.RenderTexture($,ee.getWidth(),ee.getHeight(),ee.getPixelRatio())),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!ae||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||ae)&&(this._blurImage(ee),this._lastBlurRadius=this._options.blurRadius),this._applyMask(ee,te);},K.prototype._blurImage=function($){var ee=$.getCanvas(),te=$.getContext(),re=new z.Vector2(ee.width,ee.height),oe=te.getImageData(0,0,ee.width,ee.height);H.default.stackBlurCanvasRGBA(oe,0,0,ee.width,ee.height,this._options.blurRadius*re.min());var ae=this._blurredRenderTarget.getContext();ae.putImageData(oe,0,0);},K.prototype._renderMask=function(){var $=this._maskRenderTarget.getCanvas(),ee=this._maskRenderTarget.getContext(),te=this._maskRenderTarget.getPixelRatio(),re=new z.Vector2($.width,$.height),oe=this._options.size*re.min()*te,ae=this._options.gradientSize*re.min()*te,ne=this._options.start.clone().multiply(re),ie=this._options.end.clone().multiply(re),le=ie.clone().subtract(ne),de=ne.clone().add(le.clone().divide(2)),se=le.len(),pe=le.clone().divide(se),ue=de.clone().add((oe+ae)*pe.y,-(oe+ae)*pe.x),_e=de.clone().add(-(oe+ae)*pe.y,(oe+ae)*pe.x),fe=ee.createLinearGradient(ue.x,ue.y,_e.x,_e.y),ye=_e.clone().subtract(ue).len();fe.addColorStop(0,'#000000'),fe.addColorStop(ae/2/ye,'#FFFFFF'),fe.addColorStop(1-ae/2/ye,'#FFFFFF'),fe.addColorStop(1,'#000000'),ee.fillStyle=fe,ee.fillRect(0,0,$.width,$.height);},K.prototype._applyMask=function($,ee){for(var te=ee.getContext(),re=$.getCanvas(),oe=$.getContext(),ae=this._blurredRenderTarget.getContext(),ne=this._maskRenderTarget.getContext(),ie=oe.getImageData(0,0,re.width,re.height),le=ie.data,de=ae.getImageData(0,0,re.width,re.height).data,se=ne.getImageData(0,0,re.width,re.height).data,pe=void 0,ue=0;ue<4*(re.width*re.height);ue+=4)pe=se[ue]/255,le[ue]=pe*le[ue]+(1-pe)*de[ue],le[ue+1]=pe*le[ue+1]+(1-pe)*de[ue+1],le[ue+2]=pe*le[ue+2]+(1-pe)*de[ue+2];te.putImageData(ie,0,0);},K;}(z.Engine.Filter);Z.prototype.availableOptions={blurRadius:{type:Y.NUMBER,default:30,uniformType:X.FLOAT},size:{type:Y.NUMBER,default:50,uniformType:X.FLOAT},gradientSize:{type:Y.NUMBER,default:50,uniformType:X.FLOAT},start:{type:Y.VECTOR2,default:new z.Vector2(0,0.5),uniformType:X.FLOAT2},end:{type:Y.VECTOR2,default:new z.Vector2(1,0.5),uniformType:X.FLOAT2},delta:{type:Y.VECTOR2,default:new z.Vector2(1,1),uniformType:X.FLOAT2},texSize:{type:Y.VECTOR2,default:new z.Vector2(100,100),uniformType:X.FLOAT2}},_.default=Z;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(36),H=R(W),Y=z.Constants.UniformType,X=z.Constants.OptionType,Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._fragmentSource=T(226),te._lastBlurRadius=null,te._lastGradientRadius=null,te._lastPosition=new z.Vector2(),te._blurredRenderTarget=new z.Engine.CanvasRenderTarget(100,100,1),te._maskRenderTarget=new z.Engine.CanvasRenderTarget(100,100,1),te;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getDimensions(),ae=!this._blurredRenderTarget.getDimensions().equals(oe);this._blurredRenderTarget.setPixelRatio(ee.getPixelRatio()),this._blurredRenderTarget.resizeTo(ee.getDimensions()),this._maskRenderTarget.setPixelRatio(ee.getPixelRatio()),this._maskRenderTarget.resizeTo(ee.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new z.Engine.RenderTexture($,ee.getWidth(),ee.getHeight(),ee.getPixelRatio())),(!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||ae)&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||ae)&&(this._blurImage(ee),this._lastBlurRadius=this._options.blurRadius),this._applyMask(ee,te);},K.prototype._blurImage=function($){var ee=$.getCanvas(),te=$.getContext(),re=new z.Vector2(ee.width,ee.height),oe=te.getImageData(0,0,ee.width,ee.height);H.default.stackBlurCanvasRGBA(oe,0,0,ee.width,ee.height,this._options.blurRadius*re.min());var ae=this._blurredRenderTarget.getContext();ae.putImageData(oe,0,0);},K.prototype._renderMask=function(){var $=this._maskRenderTarget.getCanvas(),ee=this._maskRenderTarget.getContext(),te=new z.Vector2($.width,$.height),re=this._maskRenderTarget.getPixelRatio(),oe=this._options.position.clone().multiply(te),ae=this._options,ne=ae.radius,ie=ae.gradientRadius;ne*=$.height,ie*=$.height;var le=ee.createRadialGradient(oe.x,oe.y,0,oe.x,oe.y,(ne+ie)*re);le.addColorStop(0,'#FFFFFF'),le.addColorStop(ne/(ne+ie),'#FFFFFF'),le.addColorStop(1,'#000000'),ee.fillStyle=le,ee.fillRect(0,0,te.x,te.y);},K.prototype._applyMask=function($,ee){for(var te=ee.getContext(),re=$.getCanvas(),oe=$.getContext(),ae=this._blurredRenderTarget.getContext(),ne=this._maskRenderTarget.getContext(),ie=oe.getImageData(0,0,re.width,re.height),le=ie.data,de=ae.getImageData(0,0,re.width,re.height).data,se=ne.getImageData(0,0,re.width,re.height).data,pe=void 0,ue=0;ue<4*(re.width*re.height);ue+=4)pe=se[ue]/255,le[ue]=pe*le[ue]+(1-pe)*de[ue],le[ue+1]=pe*le[ue+1]+(1-pe)*de[ue+1],le[ue+2]=pe*le[ue+2]+(1-pe)*de[ue+2];te.putImageData(ie,0,0);},K;}(z.Engine.Filter);Z.prototype.availableOptions={blurRadius:{type:X.NUMBER,default:30,uniformType:Y.FLOAT},radius:{type:X.NUMBER,default:50,uniformType:Y.FLOAT},gradientRadius:{type:X.NUMBER,default:25,uniformType:Y.FLOAT},position:{type:X.VECTOR2,default:new z.Vector2(0.5,0.5),uniformType:Y.FLOAT2},delta:{type:X.VECTOR2,default:new z.Vector2(1,1),uniformType:Y.FLOAT2},texSize:{type:X.VECTOR2,default:new z.Vector2(100,100),uniformType:Y.FLOAT2}},_.default=Z;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(21),I=R(M),U=T(0),N=R(U),G=T(2),V=R(G),z=T(1),W=R(z),H=T(3),Y=T(10),X=R(Y),Z=H.Constants.OptionType,J=H.Constants.RendererType,K;K=window.Image;var Q=function($){function ee(){(0,N.default)(this,ee);for(var te=arguments.length,re=Array(te),oe=0;oe<te;oe++)re[oe]=arguments[oe];var ae=(0,V.default)(this,$.call.apply($,[this].concat(re)));return ae._colorOverlayFilter=new H.Engine.Filters.ColorOverlayFilter({color:ae.getTintColor()}),ae._frameContainer=new H.Engine.Container(),ae._resetSprites(),ae._options.frame&&ae._createSpritesForFrame(ae._options.frame),ae;}return(0,W.default)(ee,$),ee.prototype._resetSprites=function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]};},ee.prototype._createSpritesForFrame=function(re){var oe=this;if(!re)return this._disposeSprites();var ae=re.imageGroups,ne=re.layoutMode;this._layoutMode=ne||'horizontal-inside',this._disposeSprites(),['top','left','right','bottom'].forEach(function(ie){'undefined'==typeof ae[ie]||['start','mid','end'].forEach(function(le){if('undefined'!=typeof ae[ie][le]){var de=ae[ie][le];'image'in de&&(de=de.image);var se=H.Engine.Texture.fromImage(de),pe=new H.Engine.Sprite(se);oe._spriteGroups[ie][le]=pe,oe._sprites.push(pe),oe._frameContainer.addChild(pe);}});});},ee.prototype._render=function(re){var oe=this._renderTexture.getDimensions();this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(re)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(oe):(this._frameRenderTexture=new H.Engine.RenderTexture(this._sdk.getRenderer(),oe.x,oe.y),this._frameSprite=new H.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite));var ae=this._sdk.getRenderer().isOfType(J.WEBGL);return ae&&(this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([])),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),H.Promise.resolve(this._renderTexture);},ee.prototype._updateSprites=function(re){var oe=re.getDimensions();this._frameWidth=Math.ceil(re.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(re,'top',0),this._updateHorizontalSpriteGroup(re,'bottom',oe.y-this._frameWidth),this._updateVerticalSpriteGroup(re,'left',0),this._updateVerticalSpriteGroup(re,'right',oe.x-this._frameWidth);},ee.prototype._updateHorizontalSpriteGroup=function(re,oe){var ae=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,ne=re.getDimensions(),ie='horizontal-inside'===this._layoutMode,le=this._spriteGroups[oe].start,de=this._spriteGroups[oe].mid,se=this._spriteGroups[oe].end,pe=0,ue=0,_e,fe;if(le){_e=le.getTexture().getDimensions(),fe=_e.y/_e.x,pe=Math.floor(this._frameWidth/fe);var ye=new H.Vector2(0,ae);ye.x=ie?this._frameWidth:0,le.setPosition(ye),le.setHeight(this._frameWidth),le.setWidth(pe);}if(se){_e=se.getTexture().getDimensions(),fe=_e.y/_e.x,ue=Math.floor(this._frameWidth*fe);var ge=new H.Vector2(ne.x-ue,ae);ge.x-=ie?this._frameWidth:0,se.setPosition(ge),se.setHeight(this._frameWidth),se.setWidth(ue);}if(de){_e=de.getTexture().getDimensions(),fe=_e.y/_e.x;var ce=new H.Vector2(pe,ae),me=ne.x-pe-ue;if(ie&&(ce.x+=this._frameWidth,me-=2*this._frameWidth),de.setPosition(ce),de.setWidth(me),de.setHeight(this._frameWidth),'repeat'===this._options.frame.imageGroups[oe].mid.mode){var he=this._frameWidth/fe,xe=Math.ceil(me/he),Te=0;if(-1!==xe){var ve=Math.round(me/xe);de.setWidth(ve),Te+=ve,this._ensureRepeatSpritesExist(xe-1,oe,de);for(var be=0;be<xe-1;be++){ve=Math.round((me-Te)/(xe-be-1));var Ce=this._repeatSprites[oe][be],Re=ce.clone().add(Te,0).floor();Ce.setPosition(Re),Ce.setWidth(ve),Ce.setHeight(this._frameWidth),Te+=ve;}}}}},ee.prototype._ensureRepeatSpritesExist=function(re,oe,ae){var ne=this;ae.getTexture().setMaxListeners(re+1);var ie=this._repeatSprites[oe].length;if(re>ie)for(var de=0,se;de<re-ie;de++)se=new H.Engine.Sprite(ae.getTexture()),this._repeatSprites[oe].push(se),this._frameContainer.addChild(se),this._sprites.push(se);else if(re<ie){var pe=this._repeatSprites[oe].splice(re);pe.forEach(function(ue){var _e=ne._sprites.indexOf(ue);-1===_e||(ne._sprites.splice(_e,1),ne._frameContainer.removeChild(ue),ue.dispose());});}},ee.prototype._updateVerticalSpriteGroup=function(re,oe){var ae=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,ne=re.getDimensions(),ie='vertical-inside'===this._layoutMode,le=this._spriteGroups[oe].start,de=this._spriteGroups[oe].mid,se=this._spriteGroups[oe].end,pe=0,ue=0,_e,fe;if(le){_e=le.getTexture().getDimensions(),fe=_e.y/_e.x,pe=Math.floor(this._frameWidth*fe);var ye=new H.Vector2(ae,0);ye.y=ie?this._frameWidth:0,le.setPosition(ye),le.setWidth(this._frameWidth),le.setHeight(pe);}if(se){_e=se.getTexture().getDimensions(),fe=_e.y/_e.x,ue=Math.floor(this._frameWidth*fe);var ge=new H.Vector2(ae,ne.y-ue);ge.y-=ie?this._frameWidth:0,se.setPosition(ge),se.setWidth(this._frameWidth),se.setHeight(ue);}if(de){_e=de.getTexture().getDimensions(),fe=_e.y/_e.x;var ce=new H.Vector2(ae,pe),me=ne.y-pe-ue;if(ie&&(ce.y+=this._frameWidth,me-=2*this._frameWidth),de.setPosition(ce),de.setHeight(me),de.setWidth(this._frameWidth),'repeat'===this._options.frame.imageGroups[oe].mid.mode){var he=this._frameWidth*fe,xe=Math.ceil(me/he),Te=0;if(-1!==xe){var ve=Math.round(me/xe);de.setHeight(ve),Te+=ve,this._ensureRepeatSpritesExist(xe-1,oe,de);for(var be=0;be<xe-1;be++){ve=Math.round((me-Te)/(xe-be-1));var Ce=this._repeatSprites[oe][be],Re=ce.clone().add(0,Te).floor();Ce.setPosition(Re),Ce.setHeight(ve),Ce.setWidth(this._frameWidth),Te+=ve;}}}}},ee.prototype._disposeSprites=function(){var re=this;this._sprites.forEach(function(oe){re._frameContainer.removeChild(oe);var ae=oe.getTexture().getBaseTexture();ae.dispose(),oe.dispose();}),this._resetSprites();},ee.prototype.dispose=function(){$.prototype.dispose.call(this),this._disposeSprites();},ee.validateFrame=function(re){if(re){var oe=re.imageGroups,ae=re.layoutMode;if('string'!=typeof re.name)throw new Error('Frame needs a property `name` of type String.');if('string'!=typeof re.label)throw new Error('Frame needs a property `label` of type String.');if('object'!==(0,I.default)(re.imageGroups))throw new Error('Frame needs a property `imageGroups` of type Object.');var ne=function(le){var de=oe[le],se=de.start,pe=de.end,ue=de.mid;if('undefined'!=typeof oe[le]){if('object'!==(0,I.default)(oe[le]))throw new Error('Frame: `imageGroups.'+le+'` needs to be of type Object.');if('undefined'!=typeof se&&!(se instanceof K||'undefined'!=typeof HTMLImageElement&&se instanceof HTMLImageElement))throw new Error('Frame: `imageGroups.'+le+'.start` needs to be of type Image.');if('undefined'!=typeof ue&&!(se instanceof K||'undefined'!=typeof HTMLImageElement&&se instanceof HTMLImageElement)&&'object'!==('undefined'==typeof ue?'undefined':(0,I.default)(ue)))throw new Error('Frame: `imageGroups.'+le+'.mid` needs to be of type Image or Object.');if('undefined'!=typeof pe&&!(pe instanceof K||'undefined'!=typeof HTMLImageElement&&pe instanceof HTMLImageElement))throw new Error('Frame: `imageGroups.'+le+'.end` needs to be of type Image.');}};if('undefined'!=typeof ae&&-1===['vertical-inside','horizontal-inside'].indexOf(ae))throw new Error('Frame: `layoutMode` must be one of vertical-inside, horizontal-inside');if('undefined'!=typeof tintable&&'boolean'!=typeof tintable)throw new Error('Frame: `tintable` needs to be of type Boolean.');ne('top'),ne('left'),ne('right'),ne('bottom');}},ee;}(X.default);Q.identifier='frame',Q.prototype.availableOptions={frame:{type:Z.OBJECT,validation:Q.validateFrame,setter:function(ee,te){return te||this._createSpritesForFrame(ee),ee;}},tintColor:{type:Z.COLOR,default:new H.Color(1,1,1,0)},scale:{type:Z.NUMBER,default:0.1}},_.default=Q;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(10),H=R(W),Y=T(7),X=R(Y),Z=T(165),J=R(Z),K=z.Constants.OptionType,Q=function($){function ee(){(0,I.default)(this,ee);for(var te=arguments.length,re=Array(te),oe=0;oe<te;oe++)re[oe]=arguments[oe];var ae=(0,N.default)(this,$.call.apply($,[this].concat(re)));return ae._lastBlurRadius=ae._options.blurRadius,ae._lastSize=ae._options.size,ae._lastGradientSize=ae._options.gradientSize,ae._horizontalFilter=new J.default(),ae._verticalFilter=new J.default(),ae._sprite.setFilters([ae._horizontalFilter,ae._verticalFilter]),ae._horizontalFilter.setDelta(new z.Vector2(1,1)),ae._verticalFilter.setDelta(new z.Vector2(-1,1)),ae._filter=new J.default(),ae;}return(0,V.default)(ee,$),ee.prototype.rotate=function(re){var oe=this._options.start,ae=this._options.end;90===re?(oe.flip(),oe.x=1-oe.x,ae.flip(),ae.x=1-ae.x):-90===re&&(oe.flip(),oe.y=1-oe.y,ae.flip(),ae.y=1-ae.y),this.set({start:oe,end:ae});},ee.prototype.flip=function(re){var oe=this._options.start,ae=this._options.end;'horizontal'===re?(oe.x=1-oe.x,ae.x=1-ae.x):'vertical'===re?(oe.y=1-oe.y,ae.y=1-ae.y):void 0,this.set({start:oe,end:ae});},ee.prototype._renderWebGL=function(re){var oe=re.getDimensions(),ae=oe.min(),ne=this._options.start.clone(),ie=this._options.end.clone(),le=this._options,de=le.blurRadius,se=le.size,pe=le.gradientSize,ue={blurRadius:de*ae,size:se*ae,gradientSize:pe*ae,start:ne.clone().multiply(oe),end:ie.clone().multiply(oe),texSize:oe};return this._horizontalFilter.set(ue),this._verticalFilter.set(ue),this._renderTexture.render(this._container),X.default.resolve();},ee.prototype._renderCanvas=function(re){var oe=re.getDimensions(),ae=this._options,ne=ae.blurRadius,ie=ae.size,le=ae.gradientSize,de=ae.start,se=ae.end;return this._filter.set({blurRadius:ne,gradientSize:le,size:ie,start:de.clone(),end:se.clone(),texSize:oe}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),X.default.resolve();},ee.prototype.dispose=function(){$.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose();},ee;}(H.default);Q.identifier='linear-focus',Q.prototype.availableOptions={start:{type:K.VECTOR2,default:new z.Vector2(0,0.5)},end:{type:K.VECTOR2,default:new z.Vector2(1,0.5)},blurRadius:{type:K.NUMBER,default:0.025},size:{type:K.NUMBER,default:0.1},gradientSize:{type:K.NUMBER,default:0.1}},_.default=Q;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(7),H=R(W),Y=T(20),X=R(Y),Z=T(10),J=R(Z),K=z.Constants.OptionType,Q=function($){function ee(){return(0,I.default)(this,ee),(0,N.default)(this,$.apply(this,arguments));}return(0,V.default)(ee,$),ee.prototype._render=function(){var oe=this._options.rotation%360,ae=oe*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(ae),this._sprite.setAnchor(0.5,0.5),this._sprite.updateTransform();var ne=this._sprite.getBounds();return this._renderTexture.resizeTo(new X.default(ne.width,ne.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),H.default.resolve();},ee.prototype.getNewDimensions=function(re){return re=re.clone(),this._options.rotation%180&&re.flip(),re;},ee.prototype.flip=function(re){var oe=this._options.rotation;(90===oe||270===oe)&&('vertical'===re?re='horizontal':re='vertical'),'vertical'===re?this.setFlipVertically(!this.getFlipVertically()):'horizontal'===re?this.setFlipHorizontally(!this.getFlipHorizontally()):void 0;},ee;}(J.default);Q.identifier='orientation',Q.prototype.availableOptions={rotation:{type:K.NUMBER,default:0,validation:function(ee){if(0!=ee%90)throw new Error('OrientationOperation: `rotation` has to be a multiple of 90.');},setter:function(ee){return(ee+360)%360;}},flipVertically:{type:K.BOOLEAN,default:!1},flipHorizontally:{type:K.BOOLEAN,default:!1}},_.default=Q;},function(u,_,T){"use strict";'use strict';function R($){return $&&$.__esModule?$:{default:$};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(10),H=R(W),Y=T(7),X=R(Y),Z=T(166),J=R(Z),K=z.Constants.OptionType,Q=function($){function ee(){(0,I.default)(this,ee);for(var te=arguments.length,re=Array(te),oe=0;oe<te;oe++)re[oe]=arguments[oe];var ae=(0,N.default)(this,$.call.apply($,[this].concat(re)));return ae._lastBlurRadius=ae._options.blurRadius,ae._lastGradientRadius=ae._options.gradientRadius,ae._horizontalFilter=new J.default(),ae._verticalFilter=new J.default(),ae._sprite.setFilters([ae._horizontalFilter,ae._verticalFilter]),ae._horizontalFilter.setDelta(new z.Vector2(1,1)),ae._verticalFilter.setDelta(new z.Vector2(-1,1)),ae._filter=new J.default(),ae;}return(0,V.default)(ee,$),ee.prototype.rotate=function(re){var oe=this._options.position;90===re?(oe.flip(),oe.x=1-oe.x):-90===re&&(oe.flip(),oe.y=1-oe.y),this.set({position:oe});},ee.prototype.flip=function(re){var oe=this._options.position;'horizontal'===re?oe.x=1-oe.x:'vertical'===re?oe.y=1-oe.y:void 0,this.set({position:oe});},ee.prototype._renderWebGL=function(re){var oe=re.getDimensions(),ae=oe.min(),ne=this._options,ie=ne.position,le=ne.blurRadius,de=ne.radius,se=ne.gradientRadius,pe={blurRadius:le*ae,radius:de*ae,gradientRadius:se*ae,position:ie.clone().multiply(oe),texSize:oe};return this._horizontalFilter.set(pe),this._verticalFilter.set(pe),this._renderTexture.render(this._container),X.default.resolve();},ee.prototype._renderCanvas=function(re){var oe=this._options,ae=oe.blurRadius,ne=oe.radius,ie=oe.gradientRadius,le=oe.position,de=re.getDimensions();return this._filter.set({blurRadius:ae,radius:ne,gradientRadius:ie,position:le,texSize:de}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),X.default.resolve();},ee.prototype.dispose=function(){$.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose();},ee;}(H.default);Q.identifier='radial-focus',Q.prototype.availableOptions={position:{type:K.VECTOR2,default:new z.Vector2(0.5,0.5)},radius:{type:K.NUMBER,default:0.25},gradientRadius:{type:K.NUMBER,default:0.125},blurRadius:{type:K.NUMBER,default:0.025}},_.default=Q;},function(u,_,T){"use strict";'use strict';function R(ae){return ae&&ae.__esModule?ae:{default:ae};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(10),H=R(W),Y=T(81),X=R(Y),Z=T(7),J=R(Z),K=T(172),Q=R(K),$=T(173),ee=R($),te=z.Constants.OptionType,re=z.Constants.RendererType,oe=function(ae){function ne(){(0,I.default)(this,ne);for(var ie=arguments.length,le=Array(ie),de=0;de<ie;de++)le[de]=arguments[de];var se=(0,N.default)(this,ae.call.apply(ae,[this].concat(le))),pe=se._sdk.getRenderer();se._lastBlurRadius=null,se._blurredRenderTexture=new z.Engine.RenderTexture(pe,100,100,1),se._maskRenderTexture=new z.Engine.RenderTexture(pe,100,100,1),se._brush=new X.default(se),se._brushContainer=new z.Engine.Container();var ue=se._brush.getDisplayObject();if(se._brushContainer.addChild(ue),se._outputSprite=new z.Engine.Sprite(),se._outputContainer=new z.Engine.Container(),se._outputContainer.addChild(se._outputSprite),se._maskFilter=new ee.default(),pe.isOfType(re.WEBGL)){se._horizontalFilter=new Q.default(),se._verticalFilter=new Q.default(),se._sprite.setFilters([se._horizontalFilter,se._verticalFilter]),se._horizontalFilter.setDelta(new z.Vector2(1,1)),se._verticalFilter.setDelta(new z.Vector2(-1,1));var _e=se._maskRenderTexture.getBaseTexture();_e.setGLUnit(se._maskFilter.getMaskImage()),pe.updateTexture(_e,!1),_e=se._blurredRenderTexture.getBaseTexture(),_e.setGLUnit(se._maskFilter.getFilterImage()),pe.updateTexture(_e,!1);}else pe.isOfType(re.CANVAS)&&(se._blurFilter=new Q.default(),se._sprite.setFilters([se._blurFilter]),se._maskFilter.setMaskCanvas(se._maskRenderTexture.getRenderTarget().getCanvas()),se._maskFilter.setFilterCanvas(se._blurredRenderTexture.getRenderTarget().getCanvas()));return se._outputSprite.setFilters([se._maskFilter]),se;}return(0,V.default)(ne,ae),ne.prototype.flip=function(le){this._brush.applyFlip(le),this.setDirty(!0,!0),this._lastBlurRadius=null;},ne.prototype.rotate=function(le){this._brush.applyRotation(le),this.setDirty(!0,!0),this._lastBlurRadius=null;},ne.prototype.crop=function(le,de){this._brush.applyCrop(le,de),this.setDirty(!0,!0),this._lastBlurRadius=null;},ne.prototype._render=function(le){return this._renderBlur(le),this._renderMask(le),this._outputSprite.setTexture(le),this._renderTexture.render(this._outputContainer),J.default.resolve();},ne.prototype._renderMask=function(le){var de=le.getDimensions(),se=this._maskRenderTexture.getDimensions();se.equals(de)||this._maskRenderTexture.resizeTo(de),this._brush.update(this._sdk,de),this._maskRenderTexture.clear(z.Color.BLACK),this._maskRenderTexture.render(this._brushContainer);var pe=this._sdk.getRenderer();pe.isOfType(re.WEBGL)&&pe.updateTexture(this._maskRenderTexture.getBaseTexture(),!1);},ne.prototype._renderBlur=function(le){var de=le.getDimensions(),se=this._blurredRenderTexture.getDimensions();se.equals(de)||this._blurredRenderTexture.resizeTo(de);var pe=this._options.blurRadius;if(this._lastBlurRadius!==pe||!se.equals(de)){var ue=this._sdk.getRenderer(),_e;if(ue.isOfType(re.WEBGL)){var fe=de.min();_e={blurRadius:pe*fe,texSize:de},this._horizontalFilter.set(_e),this._verticalFilter.set(_e);}else ue.isOfType(re.CANVAS)&&(_e={blurRadius:pe},this._blurFilter.set(_e));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=pe;}},ne.prototype.getBrush=function(){return this._brush;},ne.prototype.createPath=function(le){var de=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,se=this._brush.createPath(le,de,z.Color.WHITE);return this._options.paths.push(se),this.setDirty(!0),se;},ne.prototype.setDirtyForRenderer=function(le,de,se){ae.prototype.setDirtyForRenderer.call(this,le,de,se),this._brush.setDirtyForRenderer(le,de,se);},ne.prototype.dispose=function(){ae.prototype.dispose.call(this);var le=this._sdk.getRenderer();le.isOfType(re.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brush.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose();},ne;}(H.default);oe.identifier='selective-blur',oe.prototype.availableOptions={blurRadius:{type:te.NUMBER,default:0.05},paths:{type:te.ARRAY,default:[],setter:function(ne){return this._brush&&this._brush.setPaths(ne),ne;}}},_.default=oe;},function(u,_,T){"use strict";'use strict';function R(J){return J&&J.__esModule?J:{default:J};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(36),H=R(W),Y=z.Constants.OptionType,X=z.Constants.UniformType,Z=function(J){function K(){(0,I.default)(this,K);for(var Q=arguments.length,$=Array(Q),ee=0;ee<Q;ee++)$[ee]=arguments[ee];var te=(0,N.default)(this,J.call.apply(J,[this].concat($)));return te._fragmentSource=T(229),te._lastBlurRadius=null,te;}return(0,V.default)(K,J),K.prototype._applyCanvas=function($,ee,te){var re=3<arguments.length&&void 0!==arguments[3]&&arguments[3],oe=ee.getDimensions(),ae=!te.getDimensions().equals(oe);te.setPixelRatio(ee.getPixelRatio()),te.resizeTo(ee.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||ae)&&(this._blurImage(ee,te),this._lastBlurRadius=this._options.blurRadius);},K.prototype._blurImage=function($,ee){var te=$.getCanvas(),re=$.getContext(),oe=new z.Vector2(te.width,te.height),ae=re.getImageData(0,0,te.width,te.height);H.default.stackBlurCanvasRGBA(ae,0,0,te.width,te.height,this._options.blurRadius*oe.min());var ne=ee.getContext();ne.putImageData(ae,0,0);},K;}(z.Engine.Filter);Z.prototype.availableOptions={blurRadius:{type:Y.NUMBER,default:30,uniformType:X.FLOAT},delta:{type:Y.VECTOR2,default:new z.Vector2(1,1),uniformType:X.FLOAT2},texSize:{type:Y.VECTOR2,default:new z.Vector2(100,100),uniformType:X.FLOAT2}},_.default=Z;},function(u,_,T){"use strict";'use strict';function R(X){return X&&X.__esModule?X:{default:X};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=z.Constants.OptionType,H=z.Constants.UniformType,Y=function(X){function Z(){(0,I.default)(this,Z);var J=(0,N.default)(this,X.call(this));return J._fragmentSource=T(231),J;}return(0,V.default)(Z,X),Z.prototype._applyCanvas=function(K,Q,$){for(var ee=3<arguments.length&&void 0!==arguments[3]&&arguments[3],te=Q.getCanvas(),re=Q.getContext(),oe=$.getContext(),ae=this._options,ne=ae.maskCanvas,ie=ae.filterCanvas,le=ne.getContext('2d'),de=ie.getContext('2d'),se=le.getImageData(0,0,te.width,te.height).data,pe=re.getImageData(0,0,te.width,te.height),ue=pe.data,_e=de.getImageData(0,0,te.width,te.height).data,fe=void 0,ye=0;ye<4*(te.width*te.height);ye+=4)fe=se[ye]/255,ue[ye]=fe*_e[ye]+(1-fe)*ue[ye],ue[ye+1]=fe*_e[ye+1]+(1-fe)*ue[ye+1],ue[ye+2]=fe*_e[ye+2]+(1-fe)*ue[ye+2];oe.putImageData(pe,0,0);},Z;}(z.Engine.Filter);Y.prototype.availableOptions={maskImage:{type:W.NUMBER,default:1,uniformType:H.INT},maskCanvas:{type:W.OBJECT,default:null},filterImage:{type:W.NUMBER,default:2,uniformType:H.INT},filterCanvas:{type:W.OBJECT,default:null}},_.default=Y;},function(u,_,T){"use strict";'use strict';function R(oe){return oe&&oe.__esModule?oe:{default:oe};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(10),H=R(W),Y=T(35),X=R(Y),Z=T(177),J=R(Z),K=T(178),Q=R(K),$=T(81),ee=R($),te=z.Constants.OptionType,re=function(oe){function ae(){(0,I.default)(this,ae);for(var ne=arguments.length,ie=Array(ne),le=0;le<ne;le++)ie[le]=arguments[le];var de=(0,N.default)(this,oe.call.apply(oe,[this].concat(ie)));de._onSpriteUpdate=de._onSpriteUpdate.bind(de);var se=de._options.sprites.slice();return se.forEach(function(pe){de.removeSprite(pe),de.addSprite(pe);}),de;}return(0,V.default)(ae,oe),ae.prototype.getSpritesOfType=function(ie){return this._options.sprites.filter(function(le){return le instanceof ie;});},ae.prototype.rotate=function(ie){this._options.sprites.forEach(function(le){le.applyRotation(ie);});},ae.prototype.flip=function(ie){this._options.sprites.forEach(function(le){le.applyFlip(ie);});},ae.prototype._onSpriteUpdate=function(){this.setDirty(!0);},ae.prototype._applyRotation=function(ie,le){this._options.sprites.forEach(function(de){return de.applyRotation(ie,le);});},ae.prototype.crop=function(ie,le){this._options.sprites.forEach(function(de){return de.applyCrop(ie,le);});},ae.prototype._serializeOption=function(ie){return'sprites'===ie?this._options.sprites.map(function(le){return le.serializeOptions();}):oe.prototype._serializeOption.call(this,ie);},ae.prototype.createSticker=function(ie){return new J.default(this,ie);},ae.prototype.createText=function(ie){return new Q.default(this,ie);},ae.prototype.createBrush=function(ie){return new ee.default(this,ie);},ae.prototype.addSprite=function(ie){this._options.sprites.push(ie),this._container.addChild(ie.getDisplayObject()),this.setDirty(!0),ie.on('update',this._onSpriteUpdate);},ae.prototype.removeSprite=function(ie){var le=this._options.sprites,de=le.indexOf(ie);return-1!==de&&(ie.off('update',this._onSpriteUpdate),this._container.removeChild(ie.getDisplayObject()),le.splice(de,1),this.setDirty(!0),!0);},ae.prototype._render=function(ie){var le=this,de=this._container,se=this._options.sprites,pe=ie.getDimensions().clone().floor();return z.Promise.all(se.map(function(ue){return ue.validateSettings();})).then(function(){se.forEach(function(ue){ue.update(le._sdk,pe);}),le._renderTexture.clear(),le._renderTexture.render(de);});},ae.prototype.takeSpriteToFront=function(ie){var le=this._options.sprites,de=le.indexOf(ie);if(-1!==de){z.Utils.moveArrayItem(le,de,le.length-1);var se=ie.getDisplayObject();this._container.removeChild(se),this._container.addChild(se),this.setDirty(!0);}},ae.prototype.getSpritesAtPosition=function(ie,le){var de=this,se=[];this._options.sprites.forEach(function(Te){return Te.update(de._sdk,le);});var pe=this._sdk.getSprite(),ue=pe.getWorldTransform().applyInverseToVector(ie),_e=pe.getTexture().getFrame(),fe=_e.width,ye=_e.height,ge=pe.getAnchor().clone().multiply(-fe,-ye);ue.subtract(ge);for(var ce=this._options.sprites.slice(0).reverse(),me=0,he=ce.length,xe;me<he;me++)xe=ce[me],xe.getDisplayObject().isAtPosition(ue)&&se.push(xe);return se;},ae.prototype.setDirtyForRenderer=function(ie,le,de){oe.prototype.setDirtyForRenderer.call(this,ie,le,de),this._options.sprites.forEach(function(se){se.setDirtyForRenderer(ie,le,de);});},ae.prototype.dispose=function(){oe.prototype.dispose.call(this),this._options.sprites.forEach(function(ie){ie.dispose();});},ae;}(H.default);re.Sticker=J.default,re.Text=Q.default,re.Brush=ee.default,re.identifier='sprite',re.prototype.availableOptions={sprites:{type:te.ARRAY,default:[],setter:function(ae,ne){var ie=this;if(ae=ae.map(function(de){if(de instanceof X.default)return de;var pe=de.type;switch(delete de.type,pe){case'text':return new Q.default(ie,de);case'sticker':return new J.default(ie,de);case'brush':return new ee.default(ie,de);default:z.Log.error(ie.constructor.name,'Invalid sprite type: '+de.type);}}),!ne){if(this._options.sprites){var le=this._options.sprites.slice();le.forEach(function(de){de.dispose(),ie.removeSprite(de);});}ae.forEach(function(de){ie.addSprite(de);});}return ae;}}},_.default=re;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(G){return G&&G.__esModule?G:{default:G};}(M),U=T(3),N=function(){function G(V,z){(0,I.default)(this,G),this._path=V,this._drawnCanvases=[],this._position=z;}return G.prototype.renderToCanvas=function(z,W,H){if(-1===this._drawnCanvases.indexOf(W)){for(var Y=new U.Vector2(W.width,W.height),X=W.getContext('2d'),Z=this._position.clone().multiply(Y),J=H.getPosition().clone().multiply(Y),K=Z.clone().subtract(J).len(),Q=z.width/10,$=0;$<=K;){var ee=Math.max(0,Math.min(1,$/K)),te=J.x+(Z.x-J.x)*ee,re=J.y+(Z.y-J.y)*ee;X.drawImage(z,te-z.width/2,re-z.height/2),$+=Q;}this._drawnCanvases.push(W);}},G.prototype.setPosition=function(z){this._position=z;},G.prototype.getPosition=function(){return this._position.clone();},G.prototype.setDirty=function(){this._drawnCanvases=[];},G;}();_.default=N;},function(u,_,T){"use strict";'use strict';function R(Z){return Z&&Z.__esModule?Z:{default:Z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(175),H=R(W),Y=z.Constants.OptionType,X=function(Z){function J(K,Q,$){(0,I.default)(this,J);var ee=(0,N.default)(this,Z.call(this,Q));return ee._operation=K,ee._canvas=$||z.Utils.createCanvas(),ee._context=ee._canvas.getContext('2d'),ee;}return(0,V.default)(J,Z),J.prototype.render=function(Q){var $=this._options,ee=$.controlPoints,te=$.thickness;if(!(2>ee.length)){z.Utils.ensureCanvasDimensions(this._canvas,Q),this._brush&&this._lastBrushThickness===te&&Q.equals(this._brushInputDimensions)||(this._brush=this._createBrush(Q),this._brushInputDimensions=Q.clone(),this._lastBrushThickness=te);for(var re=ee[0],oe=re,ae=1;ae<ee.length;ae++)oe=ee[ae],oe.renderToCanvas(this._brush,this._canvas,re),re=oe;}},J.prototype._createBrush=function(Q){var $=this._options,ee=$.thickness,te=$.hardness,re=$.color,oe=z.Utils.createCanvas();oe.width=oe.height=Math.ceil(ee*Q.min());var ae=oe.getContext('2d');if(re=re.clone(),re.a=1,1===oe.width)ae.fillStyle=re.toRGBA(),ae.fillRect(0,0,1,1);else{var ne=ae.createRadialGradient(oe.width/2,oe.height/2,Math.min(oe.width/2-1,oe.width/2*te),oe.width/2,oe.height/2,oe.width/2);ne.addColorStop(0,re.toRGBA());var ie=re.clone();ie.a=0,ne.addColorStop(1,ie.toRGBA()),ae.fillStyle=ne,ae.fillRect(0,0,oe.width,oe.height);}return oe;},J.prototype.addControlPoint=function(Q){var $=new H.default(this,Q);this._options.controlPoints.push($),this.emit('update',this);},J.prototype.getCanvas=function(){return this._canvas;},J.prototype.setCanvas=function(Q){this._canvas=Q,this._context=Q.getContext('2d');},J.prototype.setDirty=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(Q){Q.setDirty();});},J.prototype.forEachControlPoint=function(Q){this._options.controlPoints.forEach(Q);},J.prototype.renderToCanvas=function(Q){var $=Q.getContext('2d');$.save(),$.globalAlpha=this._options.color.a,$.drawImage(this._canvas,0,0),$.restore();},J.prototype.getCanvasDimensions=function(){return this._canvasDimensions;},J;}(z.Configurable);X.prototype.availableOptions={id:{type:Y.STRING,default:function(){return z.Utils.getUUID();}},color:{type:Y.COLOR,default:z.Color.RED},hardness:{type:Y.NUMBER,default:1},thickness:{type:Y.NUMBER,default:0.05},controlPoints:{type:Y.ARRAY,default:[]},closed:{type:Y.BOOLEAN,default:!1}},_.default=X;},function(u,_,T){"use strict";'use strict';function R(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(35),H=R(W),Y=T(78),X=R(Y),Z=z.Constants.OptionType,J=z.Constants.RendererType,K=function(Q){function $(){(0,I.default)(this,$);for(var ee=arguments.length,te=Array(ee),re=0;re<ee;re++)te[re]=arguments[re];var oe=(0,N.default)(this,Q.call.apply(Q,[this].concat(te)));return oe._options.image&&oe._onImageUpdate(),oe._adjustmentsFilter=new X.default(),oe._onOptionsChange=oe._onOptionsChange.bind(oe),oe._options.adjustments.on('updated',oe._onOptionsChange),oe;}return(0,V.default)($,Q),$.prototype.serializeOptions=function(te){var re=1<arguments.length&&void 0!==arguments[1]&&arguments[1],oe=Q.prototype.serializeOptions.call(this,te,re);return te||(oe.type='sticker'),oe;},$.prototype._rendersToRenderTexture=function(te){var re=this._options.smoothDownscaling&&te.getRenderer().isOfType(J.WEBGL);return re||this._hasAdjustments();},$.prototype._getTexture=function(){return this._inputTexture;},$.prototype.update=function(te,re){var oe=this._options,ae=oe.dimensions,ne=oe.image;if(ae.equals(z.Vector2.NULL)&&ae.set(ne.width,ne.height),this._rendersToRenderTexture(te)&&this._prepareRenderTexture(te),this._hasAdjustments()){this._renderTextureSprite.setFilters([this._adjustmentsFilter]);var ie=this._options.adjustments;this._adjustmentsFilter.set({brightness:ie.getBrightness(),saturation:ie.getSaturation(),contrast:ie.getContrast()});}return this._updateSprite(re),this._rendersToRenderTexture(te)&&this._renderToRenderTexture(te),this._applyFlip(),z.Promise.resolve();},$.prototype._applyFlip=function(){var te=this._sprite.getScale();this._options.flipVertically&&(te.y*=-1),this._options.flipHorizontally&&(te.x*=-1),this._sprite.setScale(te);},$.prototype.applyFlip=function(te){Q.prototype.applyFlip.call(this,te);var re={rotation:this._options.rotation},oe=180*(re.rotation/Math.PI);re.rotation=-1*oe*Math.PI/180,'horizontal'===te?(re.flipHorizontally=!this._options.flipHorizontally,this.set(re)):'vertical'===te?(re.flipVertically=!this._options.flipVertically,this.set(re)):void 0;},$.prototype._hasAdjustments=function(){var te=this._options.adjustments;return 0!==te.getBrightness()||1!==te.getSaturation()||1!==te.getContrast();},$.prototype._onImageUpdate=function(){this._inputTexture=z.Engine.Texture.fromImage(this._options.image),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this.setDirty(!0);},$.prototype.setOption=function(te,re){var oe=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;Q.prototype.setOption.call(this,te,re,oe),'image'===te&&this._identitySprite&&this._onImageUpdate();},$.prototype._onOptionsChange=function(){var te=this._dirtiness;for(var re in te)te[re]=!0;},$.prototype.dispose=function(){Q.prototype.dispose.call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off('updated',this._onOptionsChange);},$;}(H.default);K.prototype.availableOptions={id:{type:Z.STRING,default:function(){return z.Utils.getUUID();}},name:{type:Z.STRING,default:''},image:{type:Z.OBJECT,required:!0},position:{type:Z.VECTOR2,default:z.Vector2.NULL},dimensions:{type:Z.VECTOR2,default:z.Vector2.NULL},anchor:{type:Z.VECTOR2,default:new z.Vector2(0,0)},pivot:{type:Z.VECTOR2,default:new z.Vector2(0.5,0.5)},rotation:{type:Z.NUMBER,default:0},flipHorizontally:{type:Z.BOOLEAN,default:!1},flipVertically:{type:Z.BOOLEAN,default:!1},smoothDownscaling:{type:Z.BOOLEAN,default:!1},adjustments:{type:Z.CONFIGURABLE,structure:{brightness:{type:Z.NUMBER,default:0},saturation:{type:Z.NUMBER,default:1},contrast:{type:Z.NUMBER,default:1}}}},_.default=K;},function(u,_,T){"use strict";'use strict';function R(Q){return Q&&Q.__esModule?Q:{default:Q};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(35),H=R(W),Y=T(179),X=R(Y),Z=z.Constants.OptionType,J=z.Constants.RendererType,K=function(Q){function $(){(0,I.default)(this,$);for(var ee=arguments.length,te=Array(ee),re=0;re<ee;re++)te[re]=arguments[re];var oe=(0,N.default)(this,Q.call.apply(Q,[this].concat(te)));return oe._textRenderer=new X.default(oe,oe._operation),oe._sprite.setTexture(oe._textRenderer.getTexture()),oe;}return(0,V.default)($,Q),$.prototype.serializeOptions=function(te){var re=1<arguments.length&&void 0!==arguments[1]&&arguments[1],oe=Q.prototype.serializeOptions.call(this,te,re);return te||(oe.type='text'),oe;},$.prototype.getDOMStyle=function(te,re){var oe=this.getFontSize()*re.y;return{fontWeight:this._options.fontWeight,fontSize:Math.round(oe)+'px',fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:Math.round(oe*this.getLineHeight())+'px',color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment};},$.prototype.getBoundingBox=function(te,re){return this._textRenderer.getBoundingBox(te,re);},$.prototype.applyFlip=function(te){Q.prototype.applyFlip.call(this,te);var re=this._options.rotation;'horizontal'===te?(re+=2*(Math.PI-re),this.setRotation(re)):'vertical'===te?(re+=2*(Math.PI/2-re),this.setRotation(re)):void 0;},$.prototype.applyCrop=function(te,re){Q.prototype.applyCrop.call(this,te,re);var oe=te.getEnd().clone().subtract(te.getStart()),ae=re.end.clone().subtract(re.start),ne=ae.clone().divide(oe),ie=re.scale/te.getScale();this.setFontSize(this.getFontSize()/ne.y*ie),this.setMaxWidth(this.getMaxWidth()/ne.x*ie);},$.prototype.applyRotation=function(te){Q.prototype.applyRotation.call(this,te);var re=this._operation.getInputDimensions();this.setMaxWidth(this.getMaxWidth()/re.x*re.y),this.setFontSize(this.getFontSize()/re.y*re.x);},$.prototype.update=function(te,re){this._textRenderer.update(te,re);var oe=this._textRenderer.getTexture(),ae=oe.getBaseTexture();ae.update();var ne=te.getRenderer();return ne.isOfType(J.WEBGL)&&ne.updateTexture(oe.getBaseTexture()),Q.prototype.update.call(this,te,re),Promise.resolve();},$.prototype.dispose=function(){Q.prototype.dispose.call(this),this._textRenderer.dispose();},$;}(H.default);K.prototype.availableOptions={id:{type:Z.STRING,default:function(){return z.Utils.getUUID();}},fontSize:{type:Z.NUMBER,default:0.1},lineHeight:{type:Z.NUMBER,default:1.1},fontFamily:{type:Z.STRING,default:'Times New Roman'},fontWeight:{type:Z.ALL,default:'normal'},fontStyle:{type:Z.STRING,default:'normal'},outlineWidth:{type:Z.NUMBER,default:0},outlineColor:{type:Z.COLOR,default:z.Color.BLACK},alignment:{type:Z.STRING,default:'left',available:['left','center','right']},verticalAlignment:{type:Z.STRING,default:'top',available:['top','center','bottom']},color:{type:Z.COLOR,default:new z.Color(1,0,0,1)},backgroundColor:{type:Z.COLOR,default:z.Color.TRANSPARENT},position:{type:Z.VECTOR2,default:new z.Vector2(0.5,0.5)},anchor:{type:Z.VECTOR2,default:new z.Vector2(0,0)},pivot:{type:Z.VECTOR2,default:new z.Vector2(0.5,0)},rotation:{type:Z.NUMBER,default:0},text:{type:Z.STRING,required:!0},maxWidth:{type:Z.NUMBER,default:0.5},maxHeight:{type:Z.NUMBER,default:0}},_.default=K;},function(u,_,T){"use strict";'use strict';function R(z){return z&&z.__esModule?z:{default:z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(3),N=T(180),G=R(N),V=function(){function z(W,H){(0,I.default)(this,z),this._text=W,this._operation=H,this._textOptions={},this._createCanvas(),this._createMeasurementCanvas(),this._createTexture();}return z.prototype._createCanvas=function(){this._canvas=U.Utils.createCanvas(),this._context=this._canvas.getContext('2d'),this._textSplitter=new G.default(this._context);},z.prototype._createMeasurementCanvas=function(){this._measurementCanvas=U.Utils.createCanvas(),this._measurementContext=this._measurementCanvas.getContext('2d');},z.prototype._createTexture=function(){this._texture=U.Engine.Texture.fromCanvas(this._canvas);},z.prototype._applyTextOptions=function(H,Y){Y.font=this._text.getFontWeight()+' '+H.fontSize+'px '+this._text.getFontFamily(),Y.textBaseline='top',Y.textAlign=this._text.getAlignment(),Y.fillStyle=this._text.getColor().toRGBA(),Y.strokeStyle=this._text.getOutlineColor().toRGBA();var X=this._text.getOutlineWidth();0<X&&(Y.lineWidth=X);},z.prototype._buildOutputLines=function(H){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(H),this._textSplitter.getLines();},z.prototype._renderTextLine=function(H,Y){var X=this._text.getAlignment(),Z=new U.Vector2(0,Y);'center'===X?Z.x=this._canvas.width/2:'right'===X?Z.x=this._canvas.width:void 0,this._context.fillText(H,Z.x,Z.y);var J=this._text.getOutlineWidth();0<J&&(this._context.miterLimit=2,this._context.strokeText(H,Z.x,Z.y));},z.prototype.update=function(H,Y){var X=this.calculateFontStyles(H,Y),Z=this._calculateText(H,X,Y),J=Z.boundingBox,K=Z.lines;return this._renderText(H,J,K,X,Y);},z.prototype._renderText=function(H,Y,X,Z,J){var K=this;return new U.Promise(function(Q){K._canvas.width=Y.x,K._canvas.height=Y.y,K._text.getMaxHeight()&&(K._canvas.height=Math.min(K._text.getMaxHeight()*J.y,K._canvas.height)),K._context=K._canvas.getContext('2d'),K._context.fillStyle=K._text.getBackgroundColor().toRGBA(),K._context.fillRect(0,0,Y.x,Y.y),K._applyTextOptions(Z,K._context);for(var ee=0,te;ee<X.length;ee++)te=X[ee],K._renderTextLine(te,Z.lineHeight*ee);Q();});},z.prototype.calculateFontStyles=function(H,Y){var X=this._text.getFontFamily(),Z=Math.round(this._text.getFontSize()*Y.y),J=Math.round(this._text.getLineHeight()*Z),K={fontFamily:X,fontSize:Z,lineHeight:J};return(this._textOptions.fontFamily!==X||this._textOptions.fontSize!==Z||this._textOptions.lineHeight!==J)&&(this._maxTextHeight=null,this._textOptions=K),K;},z.prototype._calculateText=function(H,Y,X){var Z=this._text.getMaxWidth()*X.x;this._applyTextOptions(Y,this._context);var J=new U.Vector2(),K=this._text.getText().split('\n');if('undefined'!=typeof Z)J.x=Z,K=this._buildOutputLines(Z);else for(var Q=0,$;Q<K.length;Q++)$=K[Q],J.x=Math.max(J.x,this._context.measureText($).width);var ee=Y.lineHeight,te=1.1*this._getMaxTextHeight(H,Y,X);return J.y+=K.length*ee+(te-ee),{boundingBox:J,lines:K};},z.prototype._getMaxTextHeight=function(H,Y,X){return this._maxTextHeight?this._maxTextHeight:(this._maxTextHeight=this._getMaxTextHeightUsingDOM(H,Y,X),this._maxTextHeight);},z.prototype._getMaxTextHeightUsingDOM=function(H,Y,X){var Z=document.createElement('span'),J=this._text.getDOMStyle(H,X),K=['lineHeight'];for(var Q in J)-1===K.indexOf(Q)&&(Z.style[Q]=J[Q]);Z.style.position='absolute',Z.style.left='-9999px',Z.style.top='-9999px',Z.style.whiteSpace='nowrap',document.body.appendChild(Z),Z.innerHTML='!"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~';var $=Z.offsetHeight;return document.body.removeChild(Z),$;},z.prototype._getMaxTextHeightUsingCanvas=function(H,Y){var Z=this._measurementCanvas,J=this._measurementContext,K=Y.fontSize;Z.width=10*K,Z.height=2*K,this._applyTextOptions(Y,this._measurementContext),J.textBaseline='middle',J.textAlign='center',J.fillStyle='black',J.clearRect(0,0,Z.width,Z.height);for(var Q='!"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~',$=Q.length,ee=0,te;ee<$;)te=Q.substr(ee,5),ee+=5,J.fillText(te,Z.width/2,Z.height/2);var re=J.getImageData(0,0,Z.width,Z.height),oe=re.data,ae=void 0,ne=null;for(ae=0;ae<Z.height;ae++){for(var ie=!1,le=0;le<Z.width;le++){var de=4*(ae*Z.width+le),se=oe[de]+oe[de+1]+oe[de+2]+oe[de+3];if(0<se){ie=!0;break;}}if(!ie){ne++;continue;}break;}var pe=Z.height;for(ae=Z.height-1;0<=ae;ae--){for(var ue=!1,_e=0;_e<Z.width;_e++){var fe=4*(ae*Z.width+_e),ye=oe[fe]+oe[fe+1]+oe[fe+2]+oe[fe+3];if(0<ye){ue=!0;break;}}if(!ue){pe--;continue;}break;}return this._maxTextHeight=pe-ne,this._maxTextHeight;},z.prototype.getTexture=function(){return this._texture;},z.prototype.getBoundingBox=function(H,Y){var X=this.calculateFontStyles(H,Y),Z=this._calculateText(H,X,Y),J=Z.boundingBox;return J;},z.prototype.dispose=function(){this._texture.getBaseTexture().dispose(),this._texture=null;},z;}();_.default=V;},function(u,_,T){"use strict";'use strict';Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=function(N){return N&&N.__esModule?N:{default:N};}(M),U=function(){function N(G){(0,I.default)(this,N),this._context=G,this._lastFontStyle={};}return N.prototype.getLines=function(){for(var V=[],z=[],W=this._lines.length,H=0;H<W;H++){for(var Y=this._lines[H],X=this._buildWords(Y),Z=X.length,J=0;J<Z;J++){var K=X[J],Q=z.concat(K).join('').replace(/\s+$/i,''),$=this._getWidth(Q);if($>this._maxWidth){0<z.length&&(V.push(z.join('')),z=[K]);var ee=K.replace(/\s+$/i,'');if(this._getWidth(ee)>this._maxWidth){var te=this._splitWord(K);V=V.concat(te.lines),te.rest&&(z=[te.rest]);}}else z.push(K);}V.push(z.join('')),z=[];}return V;},N.prototype._buildWords=function(V){for(var z=[],W='',H=V.length,Y=0,X;Y<H;Y++)X=V[Y],W+=X,(' '===X||'-'===X||Y===H-1)&&(z.push(W),W='');return z;},N.prototype._splitWord=function(V){for(var z={lines:[],rest:null},W=V.length,H=[],Y=0,X;Y<W;Y++)X=V[Y],this._getWidth(H.concat(X).join(''))>this._maxWidth?(0<H.length&&z.lines.push(H.join('')),H=[X]):H.push(X),Y===W-1&&0<H.length&&(z.rest=H.join(''));return z;},N.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0);},N.prototype._getWidth=function(V){return this._context.measureText(V).width;},N.prototype.setText=function(V){this._text=V,this._lines=V.split('\n');},N.prototype.setMaxWidth=function(V){this._maxWidth=V;},N;}();_.default=U;},function(u,_,T){"use strict";'use strict';function R(Z){return Z&&Z.__esModule?Z:{default:Z};}Object.defineProperty(_,"__esModule",{value:!0});var M=T(0),I=R(M),U=T(2),N=R(U),G=T(1),V=R(G),z=T(3),W=T(10),H=R(W),Y=z.Constants.OptionType,X=function(Z){function J(){(0,I.default)(this,J);for(var K=arguments.length,Q=Array(K),$=0;$<K;$++)Q[$]=arguments[$];var ee=(0,N.default)(this,Z.call.apply(Z,[this].concat(Q)));return ee._watermarkSprite=new z.Engine.Sprite(),ee._watermarkSprite.setAnchor(0.5,0.5),ee._container.addChild(ee._watermarkSprite),ee;}return(0,V.default)(J,Z),J.prototype._render=function(Q){this._watermarkTexture||(this._watermarkTexture=z.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var $=Q.getDimensions(),ee=this._options.image,te=ee.width,re=ee.height,oe=z.Utils.resizeVectorToFit(new z.Vector2(te,re),$);return this._watermarkSprite.setPosition($.clone().divide(2)),this._watermarkSprite.setWidth(oe.x),this._watermarkSprite.setHeight(oe.y),this._renderTexture.render(this._container),z.Promise.resolve();},J.prototype.dispose=function(){Z.prototype.dispose.call(this),this._watermarkSprite.dispose();},J;}(H.default);X.identifier='watermark',X.prototype.availableOptions={image:{type:Y.OBJECT,required:!0}},_.default=X;},function(u,_,T){"use strict";(function(R){'use strict';Object.defineProperty(_,"__esModule",{value:!0});/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */for(var M='undefined'==typeof window?R:window,I=M.requestAnimationFrame,U=M.cancelAnimationFrame,N=0,G=['ms','moz','webkit','o'],V=0;V<G.length&&!I;++V)_.requestAnimationFrame=I=M[G[V]+'RequestAnimationFrame'],_.cancelAnimationFrame=U=M[G[V]+'CancelAnimationFrame']||M[G[V]+'CancelRequestAnimationFrame'];I||(_.requestAnimationFrame=I=function(W){var Y=new Date().getTime(),X=Math.max(0,16-(Y-N)),Z=setTimeout(function(){W(Y+X);},X);return N=Y+X,Z;}),U||(_.cancelAnimationFrame=U=function(W){clearTimeout(W);}),_.requestAnimationFrame=I,_.cancelAnimationFrame=U;}).call(_,T(95));},function(u,_,T){u.exports={"default":T(187),__esModule:!0};},function(u,_,T){u.exports={"default":T(189),__esModule:!0};},function(u,_,T){u.exports={"default":T(190),__esModule:!0};},function(u,_,T){u.exports={"default":T(191),__esModule:!0};},function(u,_,T){T(212);var R=T(22).Object;u.exports=function(I,U){return R.create(I,U);};},function(u,_,T){T(213);var R=T(22).Object;u.exports=function(I,U,N){return R.defineProperty(I,U,N);};},function(u,_,T){T(214),u.exports=T(22).Object.setPrototypeOf;},function(u,_,T){T(217),T(215),T(218),T(219),u.exports=T(22).Symbol;},function(u,_,T){T(216),T(220),u.exports=T(61).f('iterator');},function(u){u.exports=function(T){if('function'!=typeof T)throw TypeError(T+' is not a function!');return T;};},function(u){u.exports=function(){};},function(u,_,T){var R=T(18),M=T(209),I=T(208);u.exports=function(U){return function(N,G,V){var z=R(N),W=M(z.length),H=I(V,W),Y;if(U&&G!=G){for(;W>H;)if(Y=z[H++],Y!=Y)return!0;}else for(;W>H;H++)if((U||H in z)&&z[H]===G)return U||H||0;return!U&&-1;};};},function(u,_,T){var R=T(39),M=T(91),I=T(54);u.exports=function(U){var N=R(U),G=M.f;if(G)for(var V=G(U),z=I.f,W=0,H;V.length>W;)z.call(U,H=V[W++])&&N.push(H);return N;};},function(u,_,T){u.exports=T(13).document&&document.documentElement;},function(u,_,T){var R=T(84);u.exports=Object('z').propertyIsEnumerable(0)?Object:function(M){return'String'==R(M)?M.split(''):Object(M);};},function(u,_,T){var R=T(84);u.exports=Array.isArray||function(I){return'Array'==R(I);};},function(u,_,T){"use strict";'use strict';var R=T(53),M=T(40),I=T(55),U={};T(23)(U,T(24)('iterator'),function(){return this;}),u.exports=function(N,G,V){N.prototype=R(U,{next:M(1,V)}),I(N,G+' Iterator');};},function(u){u.exports=function(T,R){return{value:R,done:!!T};};},function(u,_,T){var R=T(39),M=T(18);u.exports=function(I,U){for(var N=M(I),G=R(N),V=G.length,z=0,W;V>z;)if(N[W=G[z++]]===U)return W;};},function(u,_,T){var R=T(41)('meta'),M=T(30),I=T(16),U=T(17).f,N=0,G=Object.isExtensible||function(){return!0;},V=!T(38)(function(){return G(Object.preventExtensions({}));}),z=function(Z){U(Z,R,{value:{i:'O'+ ++N,w:{}}});},X=u.exports={KEY:R,NEED:!1,fastKey:function(Z,J){if(!M(Z))return'symbol'==typeof Z?Z:('string'==typeof Z?'S':'P')+Z;if(!I(Z,R)){if(!G(Z))return'F';if(!J)return'E';z(Z);}return Z[R].i;},getWeak:function(Z,J){if(!I(Z,R)){if(!G(Z))return!0;if(!J)return!1;z(Z);}return Z[R].w;},onFreeze:function(Z){return V&&X.NEED&&G(Z)&&!I(Z,R)&&z(Z),Z;}};},function(u,_,T){var R=T(17),M=T(28),I=T(39);u.exports=T(15)?Object.defineProperties:function(N,G){M(N);for(var V=I(G),z=V.length,W=0,H;z>W;)R.f(N,H=V[W++],G[H]);return N;};},function(u,_,T){var R=T(18),M=T(90).f,I={}.toString,U='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],N=function(G){try{return M(G);}catch(V){return U.slice();}};u.exports.f=function(V){return U&&'[object Window]'==I.call(V)?N(V):M(R(V));};},function(u,_,T){var R=T(16),M=T(210),I=T(56)('IE_PROTO'),U=Object.prototype;u.exports=Object.getPrototypeOf||function(N){return N=M(N),R(N,I)?N[I]:'function'==typeof N.constructor&&N instanceof N.constructor?N.constructor.prototype:N instanceof Object?U:null;};},function(u,_,T){var R=T(30),M=T(28),I=function(U,N){if(M(U),!R(N)&&null!==N)throw TypeError(N+": can't set as prototype!");};u.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(U,N,G){try{G=T(85)(Function.call,T(89).f(Object.prototype,'__proto__').set,2),G(U,[]),N=!(U instanceof Array);}catch(V){N=!0;}return function(z,W){return I(z,W),N?z.__proto__=W:G(z,W),z;};}({},!1):void 0),check:I};},function(u,_,T){var R=T(58),M=T(49);u.exports=function(I){return function(U,N){var G=M(U)+'',V=R(N),z=G.length,W,H;return 0>V||V>=z?I?'':void 0:(W=G.charCodeAt(V),0xd800>W||0xdbff<W||V+1===z||0xdc00>(H=G.charCodeAt(V+1))||0xdfff<H?I?G.charAt(V):W:I?G.slice(V,V+2):(W-0xd800<<10)+(H-0xdc00)+0x10000);};};},function(u,_,T){var R=T(58),M=Math.max,I=Math.min;u.exports=function(U,N){return U=R(U),0>U?M(U+N,0):I(U,N);};},function(u,_,T){var R=T(58),M=Math.min;u.exports=function(I){return 0<I?M(R(I),0x1fffffffffffff):0;};},function(u,_,T){var R=T(49);u.exports=function(M){return Object(R(M));};},function(u,_,T){"use strict";'use strict';var R=T(193),M=T(200),I=T(51),U=T(18);u.exports=T(88)(Array,'Array',function(N,G){this._t=U(N),this._i=0,this._k=G;},function(){var N=this._t,G=this._k,V=this._i++;return!N||V>=N.length?(this._t=void 0,M(1)):'keys'==G?M(0,V):'values'==G?M(0,N[V]):M(0,[V,N[V]]);},'values'),I.Arguments=I.Array,R('keys'),R('values'),R('entries');},function(u,_,T){var R=T(29);R(R.S,'Object',{create:T(53)});},function(u,_,T){var R=T(29);R(R.S+R.F*!T(15),'Object',{defineProperty:T(17).f});},function(u,_,T){var R=T(29);R(R.S,'Object',{setPrototypeOf:T(206).set});},function(){},function(u,_,T){"use strict";'use strict';var R=T(207)(!0);T(88)(String,'String',function(M){this._t=M+'',this._i=0;},function(){var M=this._t,I=this._i,U;return I>=M.length?{value:void 0,done:!0}:(U=R(M,I),this._i+=U.length,{value:U,done:!1});});},function(u,_,T){"use strict";'use strict';var R=T(13),M=T(16),I=T(15),U=T(29),N=T(93),G=T(202).KEY,V=T(38),z=T(57),W=T(55),H=T(41),Y=T(24),X=T(61),Z=T(60),J=T(201),K=T(195),Q=T(198),$=T(28),ee=T(18),te=T(59),re=T(40),oe=T(53),ae=T(204),ne=T(89),ie=T(17),le=T(39),de=ne.f,se=ie.f,pe=ae.f,ue=R.Symbol,_e=R.JSON,fe=_e&&_e.stringify,ye='prototype',ge=Y('_hidden'),ce=Y('toPrimitive'),me={}.propertyIsEnumerable,he=z('symbol-registry'),xe=z('symbols'),Te=z('op-symbols'),ve=Object[ye],be='function'==typeof ue,Ce=R.QObject,Re=!Ce||!Ce[ye]||!Ce[ye].findChild,Ee=I&&V(function(){return 7!=oe(se({},'a',{get:function(){return se(this,'a',{value:7}).a;}})).a;})?function(Le,Ue,Ne){var Ge=de(ve,Ue);Ge&&delete ve[Ue],se(Le,Ue,Ne),Ge&&Le!==ve&&se(ve,Ue,Ge);}:se,Oe=function(Le){var Ue=xe[Le]=oe(ue[ye]);return Ue._k=Le,Ue;},Fe=be&&'symbol'==typeof ue.iterator?function(Le){return'symbol'==typeof Le;}:function(Le){return Le instanceof ue;},ke=function(Ue,Ne,Ge){return Ue===ve&&ke(Te,Ne,Ge),$(Ue),Ne=te(Ne,!0),$(Ge),M(xe,Ne)?(Ge.enumerable?(M(Ue,ge)&&Ue[ge][Ne]&&(Ue[ge][Ne]=!1),Ge=oe(Ge,{enumerable:re(0,!1)})):(!M(Ue,ge)&&se(Ue,ge,re(1,{})),Ue[ge][Ne]=!0),Ee(Ue,Ne,Ge)):se(Ue,Ne,Ge);},Se=function(Ue,Ne){$(Ue);for(var Ge=K(Ne=ee(Ne)),Ve=0,ze=Ge.length,We;ze>Ve;)ke(Ue,We=Ge[Ve++],Ne[We]);return Ue;},Pe=function(Ue){var Ne=me.call(this,Ue=te(Ue,!0));return this===ve&&M(xe,Ue)&&!M(Te,Ue)?!1:Ne||!M(this,Ue)||!M(xe,Ue)||M(this,ge)&&this[ge][Ue]?Ne:!0;},De=function(Ue,Ne){if(Ue=ee(Ue),Ne=te(Ne,!0),Ue!==ve||!M(xe,Ne)||M(Te,Ne)){var Ge=de(Ue,Ne);return Ge&&M(xe,Ne)&&!(M(Ue,ge)&&Ue[ge][Ne])&&(Ge.enumerable=!0),Ge;}},Ae=function(Ue){for(var Ne=pe(ee(Ue)),Ge=[],Ve=0,ze;Ne.length>Ve;)M(xe,ze=Ne[Ve++])||ze==ge||ze==G||Ge.push(ze);return Ge;},Be=function(Ue){for(var Ne=Ue===ve,Ge=pe(Ne?Te:ee(Ue)),Ve=[],ze=0,We;Ge.length>ze;)M(xe,We=Ge[ze++])&&(!Ne||M(ve,We))&&Ve.push(xe[We]);return Ve;};be||(ue=function(){if(this instanceof ue)throw TypeError('Symbol is not a constructor!');var Ue=H(0<arguments.length?arguments[0]:void 0),Ne=function(Ge){this===ve&&Ne.call(Te,Ge),M(this,ge)&&M(this[ge],Ue)&&(this[ge][Ue]=!1),Ee(this,Ue,re(1,Ge));};return I&&Re&&Ee(ve,Ue,{configurable:!0,set:Ne}),Oe(Ue);},N(ue[ye],'toString',function(){return this._k;}),ne.f=De,ie.f=ke,T(90).f=ae.f=Ae,T(54).f=Pe,T(91).f=Be,I&&!T(52)&&N(ve,'propertyIsEnumerable',Pe,!0),X.f=function(Le){return Oe(Y(Le));}),U(U.G+U.W+U.F*!be,{Symbol:ue});for(var we='hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','),Ie=0;we.length>Ie;)Y(we[Ie++]);for(var we=le(Y.store),Ie=0;we.length>Ie;)Z(we[Ie++]);U(U.S+U.F*!be,'Symbol',{'for':function(Le){return M(he,Le+='')?he[Le]:he[Le]=ue(Le);},keyFor:function(Ue){if(Fe(Ue))return J(he,Ue);throw TypeError(Ue+' is not a symbol!');},useSetter:function(){Re=!0;},useSimple:function(){Re=!1;}}),U(U.S+U.F*!be,'Object',{create:function(Ue,Ne){return Ne===void 0?oe(Ue):Se(oe(Ue),Ne);},defineProperty:ke,defineProperties:Se,getOwnPropertyDescriptor:De,getOwnPropertyNames:Ae,getOwnPropertySymbols:Be}),_e&&U(U.S+U.F*(!be||V(function(){var Le=ue();return'[null]'!=fe([Le])||'{}'!=fe({a:Le})||'{}'!=fe(Object(Le));})),'JSON',{stringify:function(Ue){if(!(void 0===Ue||Fe(Ue))){for(var Ne=[Ue],Ge=1,Ve,ze;arguments.length>Ge;)Ne.push(arguments[Ge++]);return Ve=Ne[1],'function'==typeof Ve&&(ze=Ve),(ze||!Q(Ve))&&(Ve=function(We,je){if(ze&&(je=ze.call(this,We,je)),!Fe(je))return je;}),Ne[1]=Ve,fe.apply(_e,Ne);}}}),ue[ye][ce]||T(23)(ue[ye],ce,ue[ye].valueOf),W(ue,'Symbol'),W(Math,'Math',!0),W(R.JSON,'JSON',!0);},function(u,_,T){T(60)('asyncIterator');},function(u,_,T){T(60)('observable');},function(u,_,T){T(211);for(var R=T(13),M=T(23),I=T(51),U=T(24)('toStringTag'),N=['NodeList','DOMTokenList','MediaList','StyleSheetList','CSSRuleList'],G=0;5>G;G++){var V=N[G],z=R[V],W=z&&z.prototype;W&&!W[U]&&M(W,U,V),I[V]=I.Array;}},function(u){u.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n";},function(u){u.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n";},function(u){u.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n";},function(u){u.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n";},function(u){u.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n";},function(u){u.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\nuniform float u_saturation;\nuniform float u_contrast;\nuniform float u_gamma;\nuniform float u_exposure;\nuniform float u_shadows;\nuniform float u_highlights;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec4 color = texColor;\n\n  // Apply gamma\n  color.rgb = pow(color.rgb, vec3(1.0 / u_gamma));\n\n  // Apply shadows and highlights\n  float luminance = dot(color.rgb, luminanceWeighting);\n  float shadow = clamp((pow(luminance, 1.0/(u_shadows+1.0)) + (-0.76)*pow(luminance, 2.0/(u_shadows+1.0))) - luminance, 0.0, 1.0);\n  float highlight = clamp((1.0 - (pow(1.0-luminance, 1.0/(2.0-u_highlights)) + (-0.8)*pow(1.0-luminance, 2.0/(2.0-u_highlights)))) - luminance, -1.0, 0.0);\n  color.rgb = (luminance + shadow + highlight) * (color.rgb / luminance );\n\n  // Apply exposure\n  color.rgb = color.rgb * pow(2.0, u_exposure);\n\n  // Apply brightness\n  color.rgb = (color.rgb + u_brightness);\n\n  // Apply saturation\n  vec3 greyScaleColor = vec3(luminance);\n  color.rgb = mix(greyScaleColor, color.rgb, u_saturation);\n\n  // Apply contrast\n  color.rgb = (color.rgb - 0.5) * u_contrast + 0.5;\n\n  // Apply alpha\n  color = vec4(color.rgb * texColor.a, texColor.a);\n\n  gl_FragColor = color;\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n";},function(u){u.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_clarity;\nuniform vec2 u_texSize;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n  vec4 original = texture2D(u_image, v_texCoord);\n\n  vec4 color = texture2D(u_image, v_texCoord);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 0.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 0.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 1.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, -1.0) * u_texSize);\n\n  // apply unsharp mask\n  vec4 blurred = color / 9.0;\n  color = mix(blurred, original, 1.0 + u_clarity);\n\n  // desaturation, to emphesize the effect\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, color.xyz));\n  float desaturation = clamp(u_clarity * 0.13, 0.0, 1.0);\n  gl_FragColor = vec4(mix(color.xyz, gray, desaturation) * color.a, color.a);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colormatrix;\nuniform vec4 u_colormatrix_vec;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colormatrix + u_colormatrix_vec;\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n";},function(u){u.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n";},function(u){u.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n";},function(u,_,T){"use strict";'use strict';function R(he){if(he&&he.__esModule)return he;var xe={};if(null!=he)for(var Te in he)Object.prototype.hasOwnProperty.call(he,Te)&&(xe[Te]=he[Te]);return xe.default=he,xe;}function M(he){return he&&he.__esModule?he:{default:he};}var I=T(97),U=M(I),N=T(64),G=R(N),V=T(66),z=R(V),W=T(96),H=R(W),Y=T(5),X=R(Y),Z=T(12),J=M(Z),K=T(11),Q=M(K),$=T(4),ee=M($),te=T(10),re=M(te),oe=T(26),ae=M(oe),ne=T(19),ie=M(ne),le=T(65),de=M(le),se=T(42),pe=M(se),ue=T(7),_e=M(ue),fe=T(14),ye=M(fe),ge=T(9),ce=T(25),me=M(ce);U.default.version=T(67).version,U.default.Math=G,U.default.Operations=z,U.default.Filters=H,U.default.FilterPrimitives=X,U.default.Engine=J.default,U.default.Color=Q.default,U.default.Filter=ee.default,U.default.Operation=re.default,U.default.EventEmitter=ae.default,U.default.Utils=ie.default,U.default.OperationsStack=de.default,U.default.EXIF=pe.default,U.default.Promise=_e.default,U.default.Configurable=ye.default,U.default.RenderType=ge.RenderType,U.default.ImageFormat=ge.ImageFormat,U.default.OptionType=ge.OptionType,U.default.Base64=me.default,u.exports=U.default;}]);});